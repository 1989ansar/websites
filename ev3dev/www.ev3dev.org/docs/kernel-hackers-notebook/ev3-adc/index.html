<!doctype html>
<html>
﻿
<!-- Mirrored from www.ev3dev.org/docs/kernel-hackers-notebook/ev3-adc/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 01 Jun 2015 09:12:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>EV3 A/DC</title>
    <link rel="alternate" type="application/atom+xml" href="../../../news/atom.xml" title="Atom feed">
    <link rel="stylesheet" href="../../../stylesheets/styles.css">
    <link rel="stylesheet" href="../../../stylesheets/pygment_trac.css">
    <script src="../../../../ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="../../../javascripts/jquery.getUrlParam.js"></script>
    <script src="../../../javascripts/jquery.loadTemplate-1.4.4.min.js"></script>
    <script src="../../../javascripts/respond.js"></script>
    <script src="../../../javascripts/cards.js"></script>
    <script src="../../../javascripts/menu.js"></script>
    <script src="../../../javascripts/search.js"></script>
    <script src="../../../javascripts/tabs.js"></script>
    <script src="../../../javascripts/ua-parser.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <script type="text/html" id="search-result-template">
        <div class="search-result">
            <a data-href="href"><h4 data-content="title"></h4></a>
            <span data-content="breadcrumbs" class="search-result-breadcrumbs"></span>
            <span data-content="author" class="search-result-author"></span><br/>
            <span data-content="date" class="search-result-date"></span>
        </div>
    </script>

</head>

<body>
    <div id="header" class="mobile-hidden">
    <nav>
        <li class="nav-menu">
            <img src="../../../images/menu.png" />
        </li>

        <li class="left button">
            <a href="../../../index.html" title="There's no place like Home...">Home</a>
        </li>
        <li class="left button">
            <a href="../../index.html" title="Documentation on how to use ev3dev">Docs</a>
        </li>
        <li class="left button">
            <a href="../../../news/index.html" title="News about ev3dev">News</a>
        </li>
        <li class="left button dropdown-button">
            <a>
                Community
                <div class="nav-dropdown-arrow">
                    
                </div>
            </a>
            <ul class="button-dropdown">
                <li>
                    <a href="../../../share/index.html" title="Discover and share projects that use ev3dev">Share</a>
                </li>
                <li>
                    <a href="../../../contribute/index.html" title="How to contribute to ev3dev">Contribute</a>
                </li>
                <li>
                    <a href="../../../support/index.html" title="Found a bug? Have a question?">Get Help</a>
                </li>
            </ul>
        </li>
        <li class="left button">
            <a href="https://github.com/ev3dev/ev3dev/releases" title="SD card image files">Download</a>
        </li>
        <!-- items below float right, so appear in reverse order -->
        <li class="right header-box" id="search-li">
            <input type="text" id="search-input" onfocus="searchFocus()" onkeyup="searchTextChanged()" placeholder="Quick Nav" onkeypress="this.onkeyup();" onpaste="this.onkeyup();" oninput="this.onkeyup();" />
            <div id="search-dropdown">
                <div class="search-results-container" id="search-results-docs">
                    <h2>In docs</h2>
                    <div data-content="docs-results">
                        <div class="no-results-note">No results</div>
                    </div>
                </div>

                <div class="search-results-container" id="search-results-projects">
                    <h2>In projects</h2>
                    <div data-content="project-results">
                        <div class="no-results-note">No results</div>
                    </div>
                </div>

                <div class="search-results-container" id="search-results-news">
                    <h2>In news</h2>
                    <div data-content="news-results">
                        <div class="no-results-note">No results</div>
                    </div>
                </div>

                <div class="search-results-container" id="search-results-misc">
                    <h2>In other pages</h2>
                    <div data-content="misc-results">
                        <div class="no-results-note">No results</div>
                    </div>
                </div>
            </div>
        </li>
    </nav>
</div>

<!-- make sure this get included on every page -->
<!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <div class="wrapper">
        <section>
            <div id="title">
    <div id="logoContainer">
        <a href="../../../index.html">
            <img id="logo" src="../../../../avatars3.githubusercontent.com/u/6878323782c.png?s=140" />
        </a>
        <div id="titleHeader" class="clear">
            <h1 id="pageTitle">EV3 A/DC</h1>
            <p id="pageSubtitle">Analog to Digital Converter</p>
        </div>
    </div>
    <hr class="clear">
</div>


            <div id="mainContent">
                
    

<div class="edit-on-github">
<a href="https://github.com/ev3dev/ev3dev.github.io/edit/master/docs/kernel-hackers-notebook/ev3-adc.md">Edit on Github</a>
</div>
<div class="breadcrumbs">
﻿


    
        
        <a href="../../index.html">docs</a> &gt;
    

    
        
        <a href="../index.html">kernel-hackers-notebook</a> &gt;
    

    
        ev3-adc
    


</div>
<hr />

<p>The EV3 uses a Texas Instruments ADS7957 chip. It is connected to the CPU via an <a href="ev3-spi.html">SPI</a>. </p>

<h2 id="essentials">Essentials</h2>

<ul>
  <li>16 channels</li>
  <li>10-bit resolution</li>
  <li>20kHz max clock rate</li>
  <li>Using the 5V input mode (i.e. 1024 == 5.00V)</li>
</ul>

<h2 id="documentation">Documentation</h2>

<ul>
  <li><a href="../../../../www.ti.com/lit/ds/symlink/ads7957.pdf">Datasheet (pdf)</a></li>
</ul>

<h2 id="channel-usage">Channel Usage</h2>

<table>
    <tr>
        <th>Ch.</th>
        <th>Connection</th>
        <th>Notes</th>
    </tr>
    <tr>
        <td>0</td>
        <td>Output port B pin 5</td>
        <td></td>
    </tr>
    <tr>
        <td>1</td>
        <td>Output port A pin 5</td>
        <td></td>
    </tr>
    <tr>
        <td>2</td>
        <td>N/C</td>
        <td>Was battery temperature on pre-release hardware</td>
    </tr>
    <tr>
        <td>3</td>
        <td>Battery current</td>
        <td>Uses 0.05&#8486; shunt resistor, value read is 15x actual voltage</td>
    </tr>
    <tr>
        <td>4</td>
        <td>Battery voltage</td>
        <td>Value read is 1/2 actual voltage</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Input port 1 pin 6</td>
        <td></td>
    </tr>
    <tr>
        <td>6</td>
        <td>Input port 1 pin 1</td>
        <td></td>
    </tr>
    <tr>
        <td>7</td>
        <td>Input port 2 pin 6</td>
        <td></td>
    </tr>
    <tr>
        <td>8</td>
        <td>Input port 2 pin 1</td>
        <td></td>
    </tr>
    <tr>
        <td>9</td>
        <td>Input port 3 pin 6</td>
        <td></td>
    </tr>
    <tr>
        <td>10</td>
        <td>Input port 3 pin 1</td>
        <td></td>
    </tr>
    <tr>
        <td>11</td>
        <td>Input port 4 pin 6</td>
        <td></td>
    </tr>
    <tr>
        <td>12</td>
        <td>Input port 4 pin 1</td>
        <td></td>
    </tr>
    <tr>
        <td>13</td>
        <td>Output port C pin 5</td>
        <td></td>
    </tr>
    <tr>
        <td>14</td>
        <td>Output port D pin 5</td>
        <td></td>
    </tr>
    <tr>
        <td>15</td>
        <td>N/C<td>Was motor current on pre-release hardware</td>
        <td></td>
    


## Notes

* In lsm2012, you will see scaling of the value read from the ADC by 4096 (12-bits) instead of by 1024 (10-bits). This is because they are not shifting the value read to the right 2 bits. Since this is a 10-bit chip, the 2 least significant bits read will always be 0.
* A TI employee wrote a [hwmon](https://www.kernel.org/doc/Documentation/hwmon/) driver for the ADS7957 ([source](https://github.com/nmenon/linux-2.6-playground/blob/devel/beaglebone/base/drivers/hwmon/ads79xx.c)) which is used by [lm-sensors](http://www.lm-sensors.org/). This interface is generally for low-speed (on the order of 1Hz) polling of fan speeds, temperatures, voltages, etc. This does not really fit our needs for ev3dev, so we borrowed some code and wrote our own driver.
</td></tr></table>

            </div>
        </section>
        <div id="footer">
    <hr class="clear">
    <div class="cclicense">

        <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">
            www.ev3dev.org (with the exception of the projects pages)
        </span>
        is licensed under
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
            <img alt="Creative Commons License" style="border-width:0" src="../../../../licensebuttons.net/l/by-sa/4.0/80x15.png" />
        </a>.
        <br />
        You are free to copy the text and images, but please be courteous and acknowledge the source.

    </div>
    <br />
    <hr class="clear">
    <span class="credits left">
        Project maintained by <a href="https://github.com/rhempel">Ralph Hempel</a>
        and <a href="https://github.com/dlech">David Lechner</a>, with help from the community
    </span>
    <span class="credits right">
        Hosted on GitHub Pages <!--&mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a>-->
    </span>
</div>

    </div>
</body>

<!-- Mirrored from www.ev3dev.org/docs/kernel-hackers-notebook/ev3-adc/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 01 Jun 2015 09:15:02 GMT -->
</html>
