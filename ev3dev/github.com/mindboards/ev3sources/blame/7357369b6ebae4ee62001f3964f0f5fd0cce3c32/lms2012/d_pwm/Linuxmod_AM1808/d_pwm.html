


<!DOCTYPE html>
<html lang="en" class="">
  
<!-- Mirrored from github.com/mindboards/ev3sources/blame/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012/d_pwm/Linuxmod_AM1808/d_pwm.c by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 01 Jun 2015 09:40:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    
    
    <title>ev3sources/lms2012/d_pwm/Linuxmod_AM1808/d_pwm.c at 7357369b6ebae4ee62001f3964f0f5fd0cce3c32 · mindboards/ev3sources · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="../../../../../../../opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="../../../../../../../fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="../../../../../../../apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../../../../../../apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../../../../../../apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../../../../../../../apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="mindboards/ev3sources" name="twitter:title" /><meta content="LEGO MINDSTORMS EV3 source code. Contribute to ev3sources development by creating an account on GitHub." name="twitter:description" /><meta content="https://avatars3.githubusercontent.com/u/2578456?v=3&amp;s=400" name="twitter:image:src" />
      <meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars3.githubusercontent.com/u/2578456?v=3&amp;s=400" property="og:image" /><meta content="mindboards/ev3sources" property="og:title" /><meta content="https://github.com/mindboards/ev3sources" property="og:url" /><meta content="LEGO MINDSTORMS EV3 source code. Contribute to ev3sources development by creating an account on GitHub." property="og:description" />
      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">
    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">
    <link rel="assets" href="../../../../../../../../assets-cdn.github.com/index.html">
    
    <meta name="pjax-timeout" content="1000">
    

    <meta name="msapplication-TileImage" content="../../../../../../../windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_source" data-pjax-transient>
      <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="70C64D49:7BA4:5EDCFBE:556C26CD" name="octolytics-dimension-request_id" />
    
    <meta content="Rails, view, blob#blame" name="analytics-event" />
    <meta class="js-ga-set" name="dimension1" content="Logged Out">
    <meta class="js-ga-set" name="dimension2" content="Header v3">
    <meta name="is-dotcom" content="true">
      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

    
    <link rel="icon" type="image/x-icon" href="../../../../../../../../assets-cdn.github.com/favicon.ico">


    <meta content="authenticity_token" name="csrf-param" />
<meta content="7ZuuIIN7X5VvT7lRp/eFnDiBFG02eY1CgmWFgLxM02GTix/xlujcbOuc7jNfCKiKVKFbkPAKILSplf5hW0dqkg==" name="csrf-token" />

    <link href="../../../../../../../../assets-cdn.github.com/assets/github/index-7e77e66f8436e66d6a9791d7a09cec15828e9e04a0ad97cf73e83223f8b9cb3a.css" media="all" rel="stylesheet" />
    <link href="../../../../../../../../assets-cdn.github.com/assets/github2/index-5df271cf586eee5e48a88e30cdb6b5c32413ce1d7337835a905fc8c16294237e.css" media="all" rel="stylesheet" />
    
    


    <meta http-equiv="x-pjax-version" content="840467a6cd0c672c678f4fd42f529999">

            <meta content="noindex, nofollow" name="robots" />

  <meta name="description" content="LEGO MINDSTORMS EV3 source code. Contribute to ev3sources development by creating an account on GitHub.">
  <meta name="go-import" content="github.com/mindboards/ev3sources git https://github.com/mindboards/ev3sources.git">

  <meta content="2578456" name="octolytics-dimension-user_id" /><meta content="mindboards" name="octolytics-dimension-user_login" /><meta content="11771262" name="octolytics-dimension-repository_id" /><meta content="mindboards/ev3sources" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="11771262" name="octolytics-dimension-repository_network_root_id" /><meta content="mindboards/ev3sources" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="../../../../../commits/7357369b6ebae4ee62001f3964f0f5fd0cce3c32.atom" rel="alternate" title="Recent Commits to ev3sources:7357369b6ebae4ee62001f3964f0f5fd0cce3c32" type="application/atom+xml">

  </head>


  <body class="logged_out  env-production  vis-public">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      


        
        <div class="header header-logged-out" role="banner">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions" role="navigation">
        <a class="btn btn-primary" href="https://github.com/join" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
      <a class="btn" href="https://github.com/login?return_to=%2Fmindboards%2Fev3sources%2Fblame%2F7357369b6ebae4ee62001f3964f0f5fd0cce3c32%2Flms2012%2Fd_pwm%2FLinuxmod_AM1808%2Fd_pwm.c" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
    </div>

    <div class="site-search repo-scope js-site-search" role="search">
      <form accept-charset="UTF-8" action="https://github.com/mindboards/ev3sources/search" class="js-site-search-form" data-global-search-url="/search" data-repo-search-url="/mindboards/ev3sources/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <label class="js-chromeless-input-container form-control">
    <div class="scope-badge">This repository</div>
    <input type="text"
      class="js-site-search-focus js-site-search-field is-clearable chromeless-input"
      data-hotkey="s"
      name="q"
      placeholder="Search"
      data-global-scope-placeholder="Search GitHub"
      data-repo-scope-placeholder="Search"
      tabindex="1"
      autocapitalize="off">
  </label>
</form>
    </div>

      <ul class="header-nav left" role="navigation">
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://github.com/explore" data-ga-click="(Logged out) Header, go to explore, text:explore">Explore</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://github.com/features" data-ga-click="(Logged out) Header, go to features, text:features">Features</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://enterprise.github.com/" data-ga-click="(Logged out) Header, go to enterprise, text:enterprise">Enterprise</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://github.com/blog" data-ga-click="(Logged out) Header, go to blog, text:blog">Blog</a>
          </li>
      </ul>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        
<ul class="pagehead-actions">

  <li>
      <a href="https://github.com/login?return_to=%2Fmindboards%2Fev3sources"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <span class="octicon octicon-eye"></span>
    Watch
  </a>
  <a class="social-count" href="https://github.com/mindboards/ev3sources/watchers">
    82
  </a>

  </li>

  <li>
      <a href="https://github.com/login?return_to=%2Fmindboards%2Fev3sources"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>
    Star
  </a>

    <a class="social-count js-social-count" href="https://github.com/mindboards/ev3sources/stargazers">
      241
    </a>

  </li>

    <li>
      <a href="https://github.com/login?return_to=%2Fmindboards%2Fev3sources"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>
        Fork
      </a>
      <a href="https://github.com/mindboards/ev3sources/network" class="social-count">
        123
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="https://github.com/mindboards" class="url fn" itemprop="url" rel="author"><span itemprop="title">mindboards</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="https://github.com/mindboards/ev3sources" data-pjax="#js-repo-pjax-container">ev3sources</a></strong>

          <span class="page-context-loader">
            <img alt="" height="16" src="../../../../../../../../assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline  ">
        <div class="repository-sidebar clearfix">
            
<nav class="sunken-menu repo-nav js-repo-nav js-sidenav-container-pjax js-octicon-loaders"
     role="navigation"
     data-pjax="#js-repo-pjax-container"
     data-issue-count-url="/mindboards/ev3sources/issues/counts">
  <ul class="sunken-menu-group">
    <li class="tooltipped tooltipped-w" aria-label="Code">
      <a href="https://github.com/mindboards/ev3sources" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /mindboards/ev3sources">
        <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
        <img alt="" class="mini-loader" height="16" src="../../../../../../../../assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Issues">
        <a href="https://github.com/mindboards/ev3sources/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /mindboards/ev3sources/issues">
          <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
          <span class="js-issue-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="../../../../../../../../assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>      </li>

    <li class="tooltipped tooltipped-w" aria-label="Pull requests">
      <a href="https://github.com/mindboards/ev3sources/pulls" aria-label="Pull requests" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g p" data-selected-links="repo_pulls /mindboards/ev3sources/pulls">
          <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull requests</span>
          <span class="js-pull-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="../../../../../../../../assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Wiki">
        <a href="https://github.com/mindboards/ev3sources/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g w" data-selected-links="repo_wiki /mindboards/ev3sources/wiki">
          <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
          <img alt="" class="mini-loader" height="16" src="../../../../../../../../assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>      </li>
  </ul>
  <div class="sunken-menu-separator"></div>
  <ul class="sunken-menu-group">

    <li class="tooltipped tooltipped-w" aria-label="Pulse">
      <a href="https://github.com/mindboards/ev3sources/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-selected-links="pulse /mindboards/ev3sources/pulse">
        <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
        <img alt="" class="mini-loader" height="16" src="../../../../../../../../assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>

    <li class="tooltipped tooltipped-w" aria-label="Graphs">
      <a href="https://github.com/mindboards/ev3sources/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-selected-links="repo_graphs repo_contributors /mindboards/ev3sources/graphs">
        <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
        <img alt="" class="mini-loader" height="16" src="../../../../../../../../assets-cdn.github.com/assets/spinners/octocat-spinner-32-e513294efa576953719e4e2de888dd9cf929b7d62ed8d05f25e731d02452ab6c.gif" width="16" />
</a>    </li>
  </ul>


</nav>

              <div class="only-with-full-nav">
                  
<div class="js-clone-url clone-url open"
  data-protocol-type="http">
  <h3><span class="text-emphasized">HTTPS</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/mindboards/ev3sources.git" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="js-clone-url clone-url "
  data-protocol-type="subversion">
  <h3><span class="text-emphasized">Subversion</span> checkout URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/mindboards/ev3sources" readonly="readonly">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>



<div class="clone-options">You can clone with
  <form accept-charset="UTF-8" action="https://github.com/users/set_protocol?protocol_selector=http&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="obf57XlHmrJncuvj63T+/UczJaauuk9uo4d9QzRqXJeu5zj2cebPXCgFMR0rzsVt+ym6UdU0I5oBfd059Autiw==" /></div><button class="btn-link js-clone-selector" data-protocol="http" type="submit">HTTPS</button></form> or <form accept-charset="UTF-8" action="https://github.com/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="v9d2T7Itx4YxMCvwinS4aiVNGF2ZNukxNOIQ+h0P3/zoOJF7PSThOwOvFN1UybPj4EAEokjLBzmiv+kAofjMOw==" /></div><button class="btn-link js-clone-selector" data-protocol="subversion" type="submit">Subversion</button></form>.
  <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <span class="octicon octicon-question"></span>
  </a>
</div>




                <a href="https://github.com/mindboards/ev3sources/archive/7357369b6ebae4ee62001f3964f0f5fd0cce3c32.zip"
                   class="btn btn-sm sidebar-button"
                   aria-label="Download the contents of mindboards/ev3sources as a zip file"
                   title="Download the contents of mindboards/ev3sources as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>

          
<a href="d_pwm.html" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a>

<div class="breadcrumb css-truncate blame-breadcrumb js-zeroclipboard-container">
  <span class="css-truncate-target js-zeroclipboard-target"><span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://github.com/mindboards/ev3sources/tree/7357369b6ebae4ee62001f3964f0f5fd0cce3c32" class="" data-branch="7357369b6ebae4ee62001f3964f0f5fd0cce3c32" data-direction="back" data-pjax="true" itemscope="url" rel="nofollow"><span itemprop="title">ev3sources</span></a></span></span><span class="separator">/</span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://github.com/mindboards/ev3sources/tree/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012" class="" data-branch="7357369b6ebae4ee62001f3964f0f5fd0cce3c32" data-direction="back" data-pjax="true" itemscope="url" rel="nofollow"><span itemprop="title">lms2012</span></a></span><span class="separator">/</span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://github.com/mindboards/ev3sources/tree/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012/d_pwm" class="" data-branch="7357369b6ebae4ee62001f3964f0f5fd0cce3c32" data-direction="back" data-pjax="true" itemscope="url" rel="nofollow"><span itemprop="title">d_pwm</span></a></span><span class="separator">/</span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://github.com/mindboards/ev3sources/tree/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012/d_pwm/Linuxmod_AM1808" class="" data-branch="7357369b6ebae4ee62001f3964f0f5fd0cce3c32" data-direction="back" data-pjax="true" itemscope="url" rel="nofollow"><span itemprop="title">Linuxmod_AM1808</span></a></span><span class="separator">/</span><strong class="final-path">d_pwm.c</strong></span>
  <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
</div>

<div class="line-age-legend">
  <span>Newer</span>
  <ol>
      <li class="heat1"></li>
      <li class="heat2"></li>
      <li class="heat3"></li>
      <li class="heat4"></li>
      <li class="heat5"></li>
      <li class="heat6"></li>
      <li class="heat7"></li>
      <li class="heat8"></li>
      <li class="heat9"></li>
      <li class="heat10"></li>
  </ol>
  <span>Older</span>
</div>

<div class="file">
  <div class="file-header">
    <div class="file-actions">
      <div class="btn-group">
        <a href="https://github.com/mindboards/ev3sources/raw/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012/d_pwm/Linuxmod_AM1808/d_pwm.c" class="btn btn-sm" id="raw-url">Raw</a>
        <a href="../../../../../blob/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012/d_pwm/Linuxmod_AM1808/d_pwm.html" class="btn btn-sm js-update-url-with-hash">Normal view</a>
        <a href="../../../../../commits/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012/d_pwm/Linuxmod_AM1808/d_pwm.html" class="btn btn-sm" rel="nofollow">History</a>
      </div>
    </div>



    <div class="file-info">
      <span class="octicon octicon-file-text"></span>
      <span class="file-mode" title="File Mode">100644</span>
      <span class="file-info-divider"></span>
        4302 lines (3752 sloc)
        <span class="file-info-divider"></span>
      119.181 kb
    </div>
  </div>

  <div class="blob-wrapper">
    <table class="blame-container highlight data js-file-line-container">
        <tr class="blame-commit">
          <td class="blame-commit-info" rowspan="4302">
            <a href="https://github.com/mindboards/ev3sources/commit/e5be3a6d591c60b26a3fb853989a9c86f5a7cc56" class="blame-sha">e5be3a6</a>
            <img alt="" class="avatar blame-commit-avatar" height="32" src="../../../../../../../../1.gravatar.com/avatar/a3114595e89094e76e43ffc615e7655ffc55.jpeg?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="32" />
            <a href="https://github.com/mindboards/ev3sources/commit/e5be3a6d591c60b26a3fb853989a9c86f5a7cc56" class="blame-commit-title" title="Initial commit!  (so exciting!)">Initial commit!  (so exciting!)</a>
            <div class="blame-commit-meta">
              <span class="muted-link">Xander Soldaat</span> authored
              <time datetime="2013-07-30T17:57:56Z" is="relative-time">Jul 30, 2013</time>
            </div>
          </td>
        </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1">1</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1"><span class="pl-c">/*</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2">2</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2"><span class="pl-c"> * LEGO® MINDSTORMS EV3</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3">3</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4">4</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4"><span class="pl-c"> * Copyright (C) 2010-2013 The LEGO Group</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L5">5</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC5"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L6">6</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC6"><span class="pl-c"> * This program is free software; you can redistribute it and/or modify</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L7">7</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC7"><span class="pl-c"> * it under the terms of the GNU General Public License as published by</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L8">8</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC8"><span class="pl-c"> * the Free Software Foundation; either version 2 of the License, or</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L9">9</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC9"><span class="pl-c"> * (at your option) any later version.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L10">10</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC10"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L11">11</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC11"><span class="pl-c"> * This program is distributed in the hope that it will be useful,</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L12">12</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC12"><span class="pl-c"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L13">13</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC13"><span class="pl-c"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L14">14</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC14"><span class="pl-c"> * GNU General Public License for more details.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L15">15</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC15"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L16">16</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC16"><span class="pl-c"> * You should have received a copy of the GNU General Public License</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L17">17</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC17"><span class="pl-c"> * along with this program; if not, write to the Free Software</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L18">18</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC18"><span class="pl-c"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L19">19</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC19"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L20">20</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC20"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L21">21</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC21"><span class="pl-c">/*! \page PwmModule PWM Module</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L22">22</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC22"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L23">23</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC23"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L24">24</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC24"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L25">25</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC25">#<span class="pl-k">define</span>   <span class="pl-en">HW_ID_SUPPORT</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L26">26</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC26"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L27">27</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC27">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&quot;</span>../../lms2012/source/lms2012.h<span class="pl-pds">&quot;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L28">28</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC28">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&quot;</span>../../lms2012/source/am1808.h<span class="pl-pds">&quot;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L29">29</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC29"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L30">30</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC30"><span class="pl-k">int</span>       Hw         =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L31">31</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC31"><span class="pl-k">int</span>       HwInvBits  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L32">32</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC32"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L33">33</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC33">#<span class="pl-k">define</span>   <span class="pl-en">MODULE_NAME</span>                   <span class="pl-s"><span class="pl-pds">&quot;</span>pwm_module<span class="pl-pds">&quot;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L34">34</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC34">#<span class="pl-k">define</span>   <span class="pl-en">DEVICE1_NAME</span>                  PWM_DEVICE</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L35">35</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC35">#<span class="pl-k">define</span>   <span class="pl-en">DEVICE2_NAME</span>                  MOTOR_DEVICE</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L36">36</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC36"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L37">37</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC37"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L38">38</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC38">#<span class="pl-k">define</span>   <span class="pl-en">SOFT_TIMER_MS</span>                 <span class="pl-c1">2</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L39">39</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC39">#<span class="pl-k">define</span>   <span class="pl-en">SOFT_TIMER_SETUP</span>              (SOFT_TIMER_MS * <span class="pl-c1">1000000</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L40">40</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC40"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L41">41</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC41"><span class="pl-c">/*</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L42">42</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC42"><span class="pl-c"> *  NO_OF_TACHO_SAMPLES holds the number of recent tacho samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L43">43</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC43"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L44">44</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC44">#<span class="pl-k">define</span>   <span class="pl-en">NO_OF_TACHO_SAMPLES</span>           <span class="pl-c1">128</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L45">45</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC45">#<span class="pl-k">define</span>   <span class="pl-en">NO_OF_OUTPUT_PORTS</span>            <span class="pl-c1">4</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L46">46</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC46"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L47">47</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC47">#<span class="pl-k">define</span>   <span class="pl-en">MAX_PWM_CNT</span>                   (<span class="pl-c1">10000</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L48">48</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC48">#<span class="pl-k">define</span>   <span class="pl-en">MAX_SPEED</span>                     (<span class="pl-c1">100</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L49">49</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC49">#<span class="pl-k">define</span>   <span class="pl-en">SPEED_PWMCNT_REL</span>              (<span class="pl-c1">100</span>) <span class="pl-c">//(MAX_PWM_CNT/MAX_SPEED)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L50">50</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC50">#<span class="pl-k">define</span>   <span class="pl-en">RAMP_FACTOR</span>                   (<span class="pl-c1">1000</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L51">51</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC51">#<span class="pl-k">define</span>   <span class="pl-en">MAX_SYNC_MOTORS</span>               (<span class="pl-c1">2</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L52">52</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC52"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L53">53</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC53"><span class="pl-c">//#define   COUNTS_PER_PULSE_LM           25600L</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L54">54</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC54"><span class="pl-c">//#define   COUNTS_PER_PULSE_MM           16200L</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L55">55</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC55"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L56">56</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC56">#<span class="pl-k">define</span>   <span class="pl-en">COUNTS_PER_PULSE_LM</span>           <span class="pl-c1">12800L</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L57">57</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC57">#<span class="pl-k">define</span>   <span class="pl-en">COUNTS_PER_PULSE_MM</span>           <span class="pl-c1">8100L</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L58">58</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC58"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L59">59</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC59"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L60">60</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC60">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L61">61</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC61">  SAMPLES_BELOW_SPEED_25  =  <span class="pl-c1">0</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L62">62</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC62">  SAMPLES_SPEED_25_50     =  <span class="pl-c1">1</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L63">63</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC63">  SAMPLES_SPEED_50_75     =  <span class="pl-c1">2</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L64">64</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC64">  SAMPLES_ABOVE_SPEED_75  =  <span class="pl-c1">3</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L65">65</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC65">  NO_OF_SAMPLE_STEPS      =  <span class="pl-c1">4</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L66">66</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC66">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L67">67</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC67"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L68">68</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC68"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L69">69</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC69"><span class="pl-c">/*</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L70">70</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC70"><span class="pl-c"> * Defines related to hardware PWM output</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L71">71</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC71"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L72">72</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC72"><span class="pl-c">// TBCTL (Time-Base Control)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L73">73</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC73"><span class="pl-c">// = = = = = = = = = = = = = = = = = = = = = = = = = =</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L74">74</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC74">#<span class="pl-k">define</span>   <span class="pl-en">TB_COUNT_UP</span>                   0x0     <span class="pl-c">// TBCNT MODE bits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L75">75</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC75">#<span class="pl-k">define</span>   <span class="pl-en">TB_COUNT_FREEZE</span>               0x3     <span class="pl-c">// TBCNT MODE bits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L76">76</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC76">#<span class="pl-k">define</span>   <span class="pl-en">TB_DISABLE</span>                    0x0     <span class="pl-c">// PHSEN bit</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L77">77</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC77">#<span class="pl-k">define</span>   <span class="pl-en">TB_ENABLE</span>                     0x4</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L78">78</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC78">#<span class="pl-k">define</span>   <span class="pl-en">TB_SHADOW</span>                     0x0     <span class="pl-c">// PRDLD bit</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L79">79</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC79">#<span class="pl-k">define</span>   <span class="pl-en">TB_IMMEDIATE</span>                  0x8</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L80">80</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC80">#<span class="pl-k">define</span>   <span class="pl-en">TB_SYNC_DISABLE</span>               0x30    <span class="pl-c">// SYNCOSEL bits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L81">81</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC81">#<span class="pl-k">define</span>   <span class="pl-en">TB_HDIV1</span>                      0x0     <span class="pl-c">// HSPCLKDIV bits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L82">82</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC82">#<span class="pl-k">define</span>   <span class="pl-en">TB_DIV1</span>                       0x0     <span class="pl-c">// CLKDIV bits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L83">83</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC83">#<span class="pl-k">define</span>   <span class="pl-en">TB_UP</span>                         0x2000  <span class="pl-c">// PHSDIR bit</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L84">84</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC84"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L85">85</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC85"><span class="pl-c">// CMPCTL (Compare Control)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L86">86</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC86"><span class="pl-c">// = = = = = = = = = = = = = = = = = = = = = = = = = =</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L87">87</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC87">#<span class="pl-k">define</span>   <span class="pl-en">CC_CTR_A_ZERO</span>                 0x0     <span class="pl-c">// LOADAMODE bits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L88">88</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC88">#<span class="pl-k">define</span>   <span class="pl-en">CC_CTR_B_ZERO</span>                 0x0</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L89">89</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC89">#<span class="pl-k">define</span>   <span class="pl-en">CC_A_SHADOW</span>                   0x00    <span class="pl-c">// SHDWAMODE and SHDWBMODE bits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L90">90</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC90">#<span class="pl-k">define</span>   <span class="pl-en">CC_B_SHADOW</span>                   0x00</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L91">91</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC91"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L92">92</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC92">#<span class="pl-k">define</span>   <span class="pl-en">TBCTL</span>                         0x0</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L93">93</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC93">#<span class="pl-k">define</span>   <span class="pl-en">TBPHS</span>                         0x3</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L94">94</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC94">#<span class="pl-k">define</span>   <span class="pl-en">TBCNT</span>                         0x4</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L95">95</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC95">#<span class="pl-k">define</span>   <span class="pl-en">TBPRD</span>                         0x5</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L96">96</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC96">#<span class="pl-k">define</span>   <span class="pl-en">CMPCTL</span>                        0x7</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L97">97</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC97">#<span class="pl-k">define</span>   <span class="pl-en">CMPA</span>                          0x9</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L98">98</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC98">#<span class="pl-k">define</span>   <span class="pl-en">CMPB</span>                          0xA</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L99">99</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC99">#<span class="pl-k">define</span>   <span class="pl-en">AQCTLA</span>                        0xB</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L100">100</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC100">#<span class="pl-k">define</span>   <span class="pl-en">AQCTLB</span>                        0xC</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L101">101</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC101"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L102">102</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC102"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L103">103</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC103"><span class="pl-c">/* SYS config register configuration and bits*/</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L104">104</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC104"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L105">105</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC105">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L106">106</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC106">  CFGCHIP1    =  0x60,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L107">107</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC107">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L108">108</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC108"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L109">109</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC109"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L110">110</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC110">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L111">111</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC111">  TBCLKSYNC   =  0x00001000,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L112">112</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC112">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L113">113</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC113"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L114">114</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC114"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L115">115</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC115"><span class="pl-c">/* TIMER64 register configuration */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L116">116</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC116"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L117">117</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC117">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L118">118</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC118">  REVID       = <span class="pl-c1">0</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L119">119</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC119">  EMUMGT      = <span class="pl-c1">1</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L120">120</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC120">  GPINTGPEN   = <span class="pl-c1">2</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L121">121</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC121">  GPDATGPDIR  = <span class="pl-c1">3</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L122">122</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC122">  TIM12       = <span class="pl-c1">4</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L123">123</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC123">  TIM34       = <span class="pl-c1">5</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L124">124</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC124">  PRD12       = <span class="pl-c1">6</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L125">125</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC125">  PRD34       = <span class="pl-c1">7</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L126">126</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC126">  TCR         = <span class="pl-c1">8</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L127">127</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC127">  TGCR        = <span class="pl-c1">9</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L128">128</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC128">  WDTCR       = <span class="pl-c1">10</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L129">129</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC129">  NOTUSED1    = <span class="pl-c1">11</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L130">130</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC130">  NOTUSED2    = <span class="pl-c1">12</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L131">131</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC131">  REL12       = <span class="pl-c1">13</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L132">132</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC132">  REL34       = <span class="pl-c1">14</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L133">133</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC133">  CAP12       = <span class="pl-c1">15</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L134">134</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC134">  CAP34       = <span class="pl-c1">16</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L135">135</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC135">  NOTUSED3    = <span class="pl-c1">17</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L136">136</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC136">  NOTUSED4    = <span class="pl-c1">18</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L137">137</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC137">  NOTUSED5    = <span class="pl-c1">19</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L138">138</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC138">  NOTUSED6    = <span class="pl-c1">20</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L139">139</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC139">  NOTUSED7    = <span class="pl-c1">21</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L140">140</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC140">  NOTUSED8    = <span class="pl-c1">22</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L141">141</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC141">  INTCTLSTAT  = <span class="pl-c1">23</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L142">142</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC142">  CMP0        = <span class="pl-c1">24</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L143">143</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC143">  CMP1        = <span class="pl-c1">25</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L144">144</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC144">  CMP2        = <span class="pl-c1">26</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L145">145</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC145">  CMP3        = <span class="pl-c1">27</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L146">146</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC146">  CMP4        = <span class="pl-c1">28</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L147">147</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC147">  CMP5        = <span class="pl-c1">39</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L148">148</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC148">  CMP6        = <span class="pl-c1">30</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L149">149</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC149">  CMP7        = <span class="pl-c1">31</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L150">150</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC150">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L151">151</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC151"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L152">152</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC152"><span class="pl-c">/* eCAP Register configuration */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L153">153</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC153"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L154">154</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC154">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L155">155</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC155">  TSCTR       =  <span class="pl-c1">0</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L156">156</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC156">  CTRPHS      =  <span class="pl-c1">2</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L157">157</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC157">  CAP1        =  <span class="pl-c1">4</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L158">158</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC158">  CAP2        =  <span class="pl-c1">6</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L159">159</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC159">  CAP3        =  <span class="pl-c1">8</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L160">160</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC160">  CAP4        = <span class="pl-c1">10</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L161">161</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC161">  ECCTL1      = <span class="pl-c1">20</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L162">162</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC162">  ECCTL2      = <span class="pl-c1">21</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L163">163</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC163">  ECEINT      = <span class="pl-c1">22</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L164">164</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC164">  ECFLG       = <span class="pl-c1">23</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L165">165</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC165">  ECCLR       = <span class="pl-c1">24</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L166">166</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC166">  ECFRC       = <span class="pl-c1">25</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L167">167</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC167">  ECAP_REVID  = <span class="pl-c1">46</span>,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L168">168</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC168">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L169">169</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC169"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L170">170</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC170"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L171">171</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC171">#<span class="pl-k">define</span>  <span class="pl-en">NON_INV</span>   <span class="pl-c1">1</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L172">172</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC172">#<span class="pl-k">define</span>  <span class="pl-en">INV</span>      -<span class="pl-c1">1</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L173">173</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC173"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L174">174</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC174"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L175">175</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC175"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L176">176</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC176">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L177">177</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC177">  FORWARD,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L178">178</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC178">  BACKWARD,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L179">179</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC179">  BRAKE,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L180">180</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC180">  COAST,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L181">181</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC181">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L182">182</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC182"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L183">183</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC183"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L184">184</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC184">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L185">185</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC185">  UNLIMITED_UNREG,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L186">186</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC186">  UNLIMITED_REG,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L187">187</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC187">  LIMITED_REG_STEPUP,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L188">188</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC188">  LIMITED_REG_STEPCONST,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L189">189</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC189">  LIMITED_REG_STEPDOWN,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L190">190</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC190">  LIMITED_UNREG_STEPUP,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L191">191</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC191">  LIMITED_UNREG_STEPCONST,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L192">192</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC192">  LIMITED_UNREG_STEPDOWN,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L193">193</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC193">  LIMITED_REG_TIMEUP,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L194">194</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC194">  LIMITED_REG_TIMECONST,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L195">195</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC195">  LIMITED_REG_TIMEDOWN,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L196">196</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC196">  LIMITED_UNREG_TIMEUP,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L197">197</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC197">  LIMITED_UNREG_TIMECONST,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L198">198</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC198">  LIMITED_UNREG_TIMEDOWN,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L199">199</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC199">  LIMITED_STEP_SYNC,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L200">200</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC200">  LIMITED_TURN_SYNC,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L201">201</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC201">  LIMITED_DIFF_TURN_SYNC,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L202">202</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC202">  SYNCED_SLAVE,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L203">203</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC203">  RAMP_DOWN_SYNC,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L204">204</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC204">  HOLD,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L205">205</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC205">  BRAKED,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L206">206</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC206">  STOP_MOTOR,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L207">207</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC207">  IDLE,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L208">208</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC208">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L209">209</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC209"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L210">210</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC210"><span class="pl-k">enum</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L211">211</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC211">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L212">212</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC212">  UNUSED_SYNC_MOTOR = 0xFF</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L213">213</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC213">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L214">214</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC214"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L215">215</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC215"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L216">216</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC216"><span class="pl-k">typedef</span>   <span class="pl-k">struct</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L217">217</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC217">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L218">218</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC218">  SLONG   IrqTacho;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L219">219</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC219">  SLONG   TachoCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L220">220</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC220">  SLONG   TachoSensor;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L221">221</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC221">  SLONG   TimeCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L222">222</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC222">  SLONG   TimeInc;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L223">223</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC223">  SLONG   OldTachoCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L224">224</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC224">  SLONG   TachoCntUp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L225">225</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC225">  SLONG   TachoCntConst;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L226">226</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC226">  SLONG   TachoCntDown;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L227">227</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC227">  SLONG   RampUpFactor;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L228">228</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC228">  SLONG   RampUpOffset;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L229">229</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC229">  SLONG   RampDownFactor;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L230">230</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC230">  SLONG   PVal;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L231">231</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC231">  SLONG   IVal;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L232">232</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC232">  SLONG   DVal;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L233">233</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC233">  SLONG   OldSpeedErr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L234">234</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC234">  SLONG   Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L235">235</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC235">  SLONG   TargetPower;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L236">236</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC236">  SLONG   Dir;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L237">237</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC237">  SBYTE   Speed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L238">238</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC238">  SBYTE   TargetSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L239">239</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC239">  SBYTE   TargetBrake;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L240">240</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC240">  UBYTE   BrakeAfter;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L241">241</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC241">  UBYTE   LockRampDown;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L242">242</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC242">  SBYTE   Pol;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L243">243</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC243">  UBYTE   Direction;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L244">244</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC244">  UBYTE   Type;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L245">245</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC245">  UBYTE   State;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L246">246</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC246">  UBYTE   TargetState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L247">247</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC247">  UBYTE   Owner;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L248">248</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC248">  UBYTE   Mutex;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L249">249</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC249">  UBYTE   DirChgPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L250">250</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC250">  SWORD   TurnRatio;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L251">251</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC251">}MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L252">252</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC252"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L253">253</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC253"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L254">254</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC254"><span class="pl-k">typedef</span>   <span class="pl-k">struct</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L255">255</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC255">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L256">256</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC256">  ULONG   TachoArray[NO_OF_TACHO_SAMPLES];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L257">257</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC257">  UBYTE   ArrayPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L258">258</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC258">  UBYTE   ArrayPtrOld;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L259">259</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC259">}TACHOSAMPLES;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L260">260</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC260"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L261">261</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC261"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L262">262</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC262"><span class="pl-k">static</span>    <span class="pl-k">int</span>  <span class="pl-en">ModuleInit</span>(<span class="pl-k">void</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L263">263</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC263"><span class="pl-k">static</span>    <span class="pl-k">void</span> <span class="pl-en">ModuleExit</span>(<span class="pl-k">void</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L264">264</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC264"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L265">265</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC265"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntA</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L266">266</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC266"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntB</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L267">267</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC267"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntC</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L268">268</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC268"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntD</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L269">269</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC269"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L270">270</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC270">UBYTE     <span class="pl-en">dCalculateSpeed</span>(UBYTE No, SBYTE *pSpeed);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L271">271</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC271"><span class="pl-k">void</span>      <span class="pl-en">SetGpioRisingIrq</span>(UBYTE PinNo, <span class="pl-c1">irqreturn_t</span> (*IntFuncPtr)(<span class="pl-k">int</span>, <span class="pl-k">void</span> *));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L272">272</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC272"><span class="pl-k">void</span>      <span class="pl-en">GetSyncDurationCnt</span>(SLONG *pCount0, SLONG *pCount1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L273">273</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC273"><span class="pl-k">void</span>      <span class="pl-en">CheckforEndOfSync</span>(<span class="pl-k">void</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L274">274</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC274"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L275">275</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC275"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L276">276</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC276"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMA</span>(ULONG Duty);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L277">277</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC277"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMB</span>(ULONG Duty);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L278">278</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC278"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMC</span>(ULONG Duty);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L279">279</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC279"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMD</span>(ULONG Duty);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L280">280</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC280"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L281">281</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC281">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/kernel.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L282">282</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC282">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/fs.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L283">283</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC283">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/signal.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L284">284</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC284">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/sched.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L285">285</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC285"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L286">286</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC286">#<span class="pl-k">ifndef</span>   PCASM</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L287">287</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC287">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/ioport.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L288">288</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC288">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>asm/gpio.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L289">289</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC289">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>asm/uaccess.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L290">290</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC290">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/module.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L291">291</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC291">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/miscdevice.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L292">292</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC292"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L293">293</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC293">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/mm.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L294">294</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC294">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/hrtimer.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L295">295</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC295"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L296">296</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC296">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/init.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L297">297</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC297">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>asm/siginfo.h<span class="pl-pds">&gt;</span></span>     <span class="pl-c">//siginfo</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L298">298</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC298">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/rcupdate.h<span class="pl-pds">&gt;</span></span>  <span class="pl-c">//rcu_read_lock</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L299">299</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC299">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/uaccess.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L300">300</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC300">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/debugfs.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L301">301</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC301"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L302">302</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC302">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>asm/io.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L303">303</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC303">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>asm/uaccess.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L304">304</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC304"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L305">305</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC305">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/irq.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L306">306</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC306">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>linux/interrupt.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L307">307</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC307"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L308">308</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC308"><span class="pl-en">MODULE_LICENSE</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>GPL<span class="pl-pds">&quot;</span></span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L309">309</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC309"><span class="pl-en">MODULE_AUTHOR</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>The LEGO Group<span class="pl-pds">&quot;</span></span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L310">310</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC310"><span class="pl-en">MODULE_DESCRIPTION</span>(MODULE_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L311">311</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC311"><span class="pl-en">MODULE_SUPPORTED_DEVICE</span>(DEVICE1_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L312">312</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC312"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L313">313</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC313"><span class="pl-en">module_init</span>(ModuleInit);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L314">314</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC314"><span class="pl-en">module_exit</span>(ModuleExit);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L315">315</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC315"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L316">316</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC316">#<span class="pl-k">include</span>  <span class="pl-s"><span class="pl-pds">&lt;</span>mach/mux.h<span class="pl-pds">&gt;</span></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L317">317</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC317"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L318">318</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC318">#<span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L319">319</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC319"><span class="pl-c">// Keep Eclipse happy</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L320">320</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC320">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L321">321</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC321"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L322">322</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC322"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L323">323</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC323"><span class="pl-k">enum</span>      OutputPortPins</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L324">324</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC324">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L325">325</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC325">  PWM,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L326">326</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC326">  DIR0,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L327">327</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC327">  DIR1,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L328">328</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC328">  INT,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L329">329</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC329">  DIR,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L330">330</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC330">  SLEEP,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L331">331</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC331">  FAULT,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L332">332</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC332">  OUTPUT_PORT_PINS</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L333">333</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC333">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L334">334</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC334"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L335">335</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC335"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L336">336</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC336">#<span class="pl-k">define</span>   <span class="pl-en">IRQA_PINNO</span>                  ((pOutputPortPin[Hw])[(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + INT].Pin)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L337">337</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC337">#<span class="pl-k">define</span>   <span class="pl-en">IRQB_PINNO</span>                  ((pOutputPortPin[Hw])[(<span class="pl-c1">1</span> * OUTPUT_PORT_PINS) + INT].Pin)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L338">338</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC338">#<span class="pl-k">define</span>   <span class="pl-en">IRQC_PINNO</span>                  ((pOutputPortPin[Hw])[(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + INT].Pin)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L339">339</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC339">#<span class="pl-k">define</span>   <span class="pl-en">IRQD_PINNO</span>                  ((pOutputPortPin[Hw])[(<span class="pl-c1">3</span> * OUTPUT_PORT_PINS) + INT].Pin)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L340">340</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC340"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L341">341</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC341"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L342">342</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC342"><span class="pl-c">/* EP2 hardware have sanyo motor driver */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L343">343</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC343">INPIN     EP2_OutputPortPin[][OUTPUT_PORT_PINS] =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L344">344</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC344">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L345">345</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC345">  { <span class="pl-c">// Output port A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L346">346</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC346">    { EPWM1B , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor A (GPIO 2_14)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L347">347</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC347">    { GP3_15 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L348">348</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC348">    { GP3_6  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L349">349</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC349">    { GP5_11 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L350">350</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC350">    { GP0_4  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L351">351</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC351">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L352">352</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC352">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L353">353</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC353">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L354">354</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC354">  { <span class="pl-c">// Output port B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L355">355</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC355">    { EPWM1A , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor B (GPIO 2_15)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L356">356</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC356">    { GP2_1  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L357">357</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC357">    { GP0_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L358">358</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC358">    { GP5_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L359">359</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC359">    { GP2_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L360">360</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC360">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L361">361</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC361">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L362">362</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC362">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L363">363</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC363">  { <span class="pl-c">// Output port C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L364">364</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC364">    { APWM0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor C (GPIO 8_7)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L365">365</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC365">    { GP6_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L366">366</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC366">    { GP5_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L367">367</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC367">    { GP5_13 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L368">368</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC368">    { GP3_14 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L369">369</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC369">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L370">370</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC370">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L371">371</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC371">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L372">372</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC372">  { <span class="pl-c">// Output port D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L373">373</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC373">    { APWM1  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM MOTOR D (GPIO 0_0)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L374">374</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC374">    { GP5_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L375">375</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC375">    { GP5_10 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L376">376</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC376">    { GP6_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L377">377</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC377">    { GP2_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L378">378</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC378">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L379">379</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC379">    { -<span class="pl-c1">1</span>     , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L380">380</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC380">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L381">381</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC381">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L382">382</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC382"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L383">383</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC383"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L384">384</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC384"><span class="pl-c">/* FINALB have TI motor driver */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L385">385</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC385">INPIN     FINALB_OutputPortPin[][OUTPUT_PORT_PINS] =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L386">386</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC386">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L387">387</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC387">  { <span class="pl-c">// Output port A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L388">388</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC388">    { EPWM1A , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor A (GPIO 2_15)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L389">389</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC389">    { GP0_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L390">390</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC390">    { GP4_12 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L391">391</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC391">    { GP5_11 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L392">392</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC392">    { GP0_4  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L393">393</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC393">    { GP3_10 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L394">394</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC394">    { GP2_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L395">395</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC395">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L396">396</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC396">  { <span class="pl-c">// Output port B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L397">397</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC397">    { EPWM1B , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor B (GPIO 2_14)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L398">398</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC398">    { GP3_15 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L399">399</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC399">    { GP3_6  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L400">400</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC400">    { GP5_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L401">401</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC401">    { GP2_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L402">402</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC402">    { GP3_10 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L403">403</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC403">    { GP2_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L404">404</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC404">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L405">405</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC405">  { <span class="pl-c">// Output port C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L406">406</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC406">    { APWM1  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor C (GPIO 0_0)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L407">407</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC407">    { GP5_10 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L408">408</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC408">    { GP5_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L409">409</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC409">    { GP5_13 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L410">410</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC410">    { GP3_14 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L411">411</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC411">    { GP2_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep CD</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L412">412</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC412">    { GP6_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault CD</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L413">413</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC413">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L414">414</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC414">  { <span class="pl-c">// Output port D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L415">415</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC415">    { APWM0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM MOTOR D (GPIO 8_7)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L416">416</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC416">    { GP6_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L417">417</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC417">    { GP5_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L418">418</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC418">    { GP6_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L419">419</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC419">    { GP2_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L420">420</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC420">    { GP2_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep CD - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L421">421</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC421">    { GP6_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault CD - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L422">422</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC422">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L423">423</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC423">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L424">424</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC424"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L425">425</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC425"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L426">426</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC426">INPIN     FINAL_OutputPortPin[][OUTPUT_PORT_PINS] =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L427">427</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC427">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L428">428</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC428">  { <span class="pl-c">// Output port A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L429">429</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC429">    { EPWM1A , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor A (GPIO 2_15)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L430">430</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC430">    { GP0_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L431">431</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC431">    { GP4_12 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L432">432</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC432">    { GP5_11 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L433">433</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC433">    { GP0_4  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  A</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L434">434</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC434">    { GP3_10 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L435">435</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC435">    { GP2_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L436">436</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC436">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L437">437</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC437">  { <span class="pl-c">// Output port B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L438">438</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC438">    { EPWM1B , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor B (GPIO 2_14)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L439">439</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC439">    { GP3_15 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L440">440</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC440">    { GP3_6  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L441">441</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC441">    { GP5_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L442">442</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC442">    { GP2_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  B</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L443">443</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC443">    { GP3_10 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep AB - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L444">444</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC444">    { GP2_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault AB - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L445">445</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC445">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L446">446</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC446">  { <span class="pl-c">// Output port C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L447">447</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC447">    { APWM1  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM motor C (GPIO 0_0)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L448">448</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC448">    { GP5_10 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L449">449</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC449">    { GP5_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L450">450</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC450">    { GP5_13 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L451">451</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC451">    { GP3_14 , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  C</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L452">452</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC452">    { GP2_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep CD</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L453">453</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC453">    { GP6_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault CD</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L454">454</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC454">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L455">455</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC455">  { <span class="pl-c">// Output port D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L456">456</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC456">    { APWM0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// PWM MOTOR D (GPIO 8_7)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L457">457</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC457">    { GP6_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR0 D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L458">458</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC458">    { GP5_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR1 D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L459">459</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC459">    { GP6_9  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// INT  D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L460">460</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC460">    { GP2_8  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// DIR  D</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L461">461</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC461">    { GP2_3  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Sleep CD - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L462">462</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC462">    { GP6_0  , <span class="pl-c1">NULL</span>, <span class="pl-c1">0</span> }, <span class="pl-c">// Fault CD - Same as above</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L463">463</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC463">  },</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L464">464</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC464">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L465">465</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC465"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L466">466</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC466"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L467">467</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC467">INPIN     *pOutputPortPin[] =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L468">468</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC468">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L469">469</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC469">  [FINAL]     =   (INPIN*)&amp;FINAL_OutputPortPin[<span class="pl-c1">0</span>],    <span class="pl-c">//  FINAL   platform</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L470">470</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC470">  [FINALB]    =   (INPIN*)&amp;FINALB_OutputPortPin[<span class="pl-c1">0</span>],   <span class="pl-c">//  FINALB  platform</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L471">471</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC471">  [EP2]       =   (INPIN*)&amp;EP2_OutputPortPin[<span class="pl-c1">0</span>],      <span class="pl-c">//  EP2     platform</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L472">472</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC472">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L473">473</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC473"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L474">474</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC474"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L475">475</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC475">#<span class="pl-k">define</span>   <span class="pl-en">OutputReadDir</span>(<span class="pl-v">port,pin</span>)       ((HwInvBits ^ (*pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].pGpio).in_data)  &amp;  pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].Mask)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L476">476</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC476">#<span class="pl-k">define</span>   <span class="pl-en">READDirA</span>                      <span class="pl-en">OutputReadDir</span>(<span class="pl-c1">0</span>,DIR)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L477">477</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC477">#<span class="pl-k">define</span>   <span class="pl-en">READDirB</span>                      <span class="pl-en">OutputReadDir</span>(<span class="pl-c1">1</span>,DIR)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L478">478</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC478">#<span class="pl-k">define</span>   <span class="pl-en">READDirC</span>                      <span class="pl-en">OutputReadDir</span>(<span class="pl-c1">2</span>,DIR)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L479">479</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC479">#<span class="pl-k">define</span>   <span class="pl-en">READDirD</span>                      <span class="pl-en">OutputReadDir</span>(<span class="pl-c1">3</span>,DIR)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L480">480</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC480"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L481">481</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC481"><span class="pl-c">/*</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L482">482</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC482"><span class="pl-c"> * Variables</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L483">483</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC483"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L484">484</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC484">static    ULONG   *GPIO;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L485">485</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC485"><span class="pl-k">static</span>    ULONG   *SYSCFG0;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L486">486</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC486"><span class="pl-k">static</span>    ULONG   *SYSCFG1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L487">487</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC487"><span class="pl-k">static</span>    ULONG   *PLLC1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L488">488</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC488"><span class="pl-k">static</span>    ULONG   *PSC1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L489">489</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC489"><span class="pl-k">static</span>    UWORD   *eHRPWM1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L490">490</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC490"><span class="pl-k">static</span>    UWORD   *eCAP0;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L491">491</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC491"><span class="pl-k">static</span>    UWORD   *eCAP1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L492">492</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC492"><span class="pl-k">static</span>    ULONG   *TIMER64P3;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L493">493</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC493"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L494">494</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC494"><span class="pl-k">static</span>    MOTOR   Motor[NO_OF_OUTPUT_PORTS];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L495">495</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC495"><span class="pl-k">static</span>    SLONG   *(StepPowerSteps[NO_OF_OUTPUT_PORTS]);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L496">496</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC496"><span class="pl-k">static</span>    SLONG   *(TachoSteps[NO_OF_OUTPUT_PORTS])  =  {&amp;(Motor[<span class="pl-c1">0</span>].<span class="pl-smi">TachoCnt</span>),&amp;(Motor[<span class="pl-c1">1</span>].<span class="pl-smi">TachoCnt</span>),&amp;(Motor[<span class="pl-c1">2</span>].<span class="pl-smi">TachoCnt</span>),&amp;(Motor[<span class="pl-c1">3</span>].<span class="pl-smi">TachoCnt</span>)};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L497">497</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC497"><span class="pl-k">static</span>    SLONG   *(TimerSteps[NO_OF_OUTPUT_PORTS])  =  {&amp;(Motor[<span class="pl-c1">0</span>].<span class="pl-smi">TimeCnt</span>),&amp;(Motor[<span class="pl-c1">1</span>].<span class="pl-smi">TimeCnt</span>),&amp;(Motor[<span class="pl-c1">2</span>].<span class="pl-smi">TimeCnt</span>),&amp;(Motor[<span class="pl-c1">3</span>].<span class="pl-smi">TimeCnt</span>)};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L498">498</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC498"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L499">499</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC499"><span class="pl-k">static</span>    <span class="pl-en">void</span>    (*SetDuty[NO_OF_OUTPUT_PORTS])(ULONG)  = {SetDutyMA,SetDutyMB,SetDutyMC,SetDutyMD};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L500">500</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC500"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L501">501</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC501"><span class="pl-k">static</span>    TACHOSAMPLES    TachoSamples[NO_OF_OUTPUT_PORTS];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L502">502</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC502"><span class="pl-k">static</span>    UBYTE           ReadyStatus = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L503">503</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC503"><span class="pl-k">static</span>    UBYTE           TestStatus  = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L504">504</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC504"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L505">505</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC505"><span class="pl-k">static</span>    MOTORDATA       MotorData[NO_OF_OUTPUT_PORTS];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L506">506</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC506"><span class="pl-k">static</span>    MOTORDATA       *pMotor = MotorData;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L507">507</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC507"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L508">508</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC508"><span class="pl-k">static</span>    ULONG           TimeOutSpeed0[NO_OF_OUTPUT_PORTS];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L509">509</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC509"><span class="pl-k">static</span>    UBYTE           MinRegEnabled[NO_OF_OUTPUT_PORTS];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L510">510</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC510"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L511">511</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC511"><span class="pl-k">static</span>    UBYTE           SyncMNos[MAX_SYNC_MOTORS];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L512">512</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC512"><span class="pl-k">static</span>    SBYTE           MaxSyncSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L513">513</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC513"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L514">514</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC514"><span class="pl-k">static</span>    <span class="pl-k">struct</span> hrtimer  Device1Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L515">515</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC515"><span class="pl-k">static</span>    <span class="pl-c1">ktime_t</span>         Device1Time;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L516">516</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC516"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L517">517</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC517"><span class="pl-k">static</span>    UBYTE           PrgStopTimer[NO_OF_OUTPUT_PORTS];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L518">518</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC518"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L519">519</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC519"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L520">520</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC520"><span class="pl-k">static</span>    ULONG    CountsPerPulse[<span class="pl-c1">4</span>]     = {COUNTS_PER_PULSE_LM, COUNTS_PER_PULSE_LM, COUNTS_PER_PULSE_LM, COUNTS_PER_PULSE_LM};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L521">521</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC521"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L522">522</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC522"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L523">523</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC523"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L524">524</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC524"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L525">525</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC525"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L526">526</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC526"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L527">527</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC527"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L528">528</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC528"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L529">529</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC529"><span class="pl-c">/*! \brief    Number of average samples for each motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L530">530</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC530"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L531">531</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC531"><span class="pl-c"> *  - Medium motor = 1, 2,  4,  8</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L532">532</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC532"><span class="pl-c"> *  - Large motor  = 2, 8, 16, 32</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L533">533</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC533"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L534">534</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC534"><span class="pl-c"> *  Medium motor has not the jitter on the tacho when as large motor because</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L535">535</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC535"><span class="pl-c"> *  it has one gear wheel less that the large motor.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L536">536</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC536"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L537">537</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC537"><span class="pl-c"> *  Medium motor reaction time is much faster than large motor due to smaller motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L538">538</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC538"><span class="pl-c"> *  and smaller gearbox</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L539">539</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC539"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L540">540</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC540"><span class="pl-k">static</span>    UBYTE    SamplesMediumMotor[NO_OF_SAMPLE_STEPS] = {<span class="pl-c1">2</span>, <span class="pl-c1">4</span>,  <span class="pl-c1">8</span>,  <span class="pl-c1">16</span>};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L541">541</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC541"><span class="pl-k">static</span>    UBYTE    SamplesLargeMotor[NO_OF_SAMPLE_STEPS]  = {<span class="pl-c1">4</span>, <span class="pl-c1">16</span>, <span class="pl-c1">32</span>, <span class="pl-c1">64</span>};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L542">542</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC542"><span class="pl-c">//static    UBYTE    SamplesMediumMotor[NO_OF_SAMPLE_STEPS] = {1, 2,  4,  8};</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L543">543</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC543"><span class="pl-c">//static    UBYTE    SamplesLargeMotor[NO_OF_SAMPLE_STEPS]  = {2, 8, 16, 32};</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L544">544</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC544"><span class="pl-k">static</span>    UBYTE    *SamplesPerSpeed[NO_OF_OUTPUT_PORTS]   = {SamplesLargeMotor, SamplesLargeMotor, SamplesLargeMotor, SamplesLargeMotor};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L545">545</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC545"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L546">546</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC546"><span class="pl-k">static</span>    UBYTE    AVG_TACHO_COUNTS[NO_OF_OUTPUT_PORTS]   = {<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>,<span class="pl-c1">2</span>};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L547">547</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC547"><span class="pl-k">static</span>    ULONG    AVG_COUNTS[NO_OF_OUTPUT_PORTS]         = {(<span class="pl-c1">2</span> * COUNTS_PER_PULSE_LM),(<span class="pl-c1">2</span> * COUNTS_PER_PULSE_LM),(<span class="pl-c1">2</span> * COUNTS_PER_PULSE_LM),(<span class="pl-c1">2</span> * COUNTS_PER_PULSE_LM)};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L548">548</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC548"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L549">549</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC549"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L550">550</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC550"><span class="pl-c">/*</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L551">551</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC551"><span class="pl-c"> * Macros</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L552">552</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC552"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L553">553</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC553">#<span class="pl-k">define</span>   <span class="pl-en">FLOATFaultPins</span>                {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L554">554</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC554">                                          <span class="pl-k">if</span> (((pOutputPortPin[Hw])[(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + FAULT].<span class="pl-smi">Pin</span>) != -<span class="pl-c1">1</span>)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L555">555</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC555">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L556">556</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC556">                                            (*pOutputPortPin[Hw][(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + FAULT].<span class="pl-smi">pGpio</span>).<span class="pl-smi">dir</span> |=  pOutputPortPin[Hw][(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + FAULT].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L557">557</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC557">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L558">558</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC558">                                          <span class="pl-k">if</span> (((pOutputPortPin[Hw])[(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + FAULT].<span class="pl-smi">Pin</span>) != -<span class="pl-c1">1</span>)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L559">559</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC559">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L560">560</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC560">                                            (*pOutputPortPin[Hw][(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + FAULT].<span class="pl-smi">pGpio</span>).<span class="pl-smi">dir</span> |=  pOutputPortPin[Hw][(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + FAULT].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L561">561</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC561">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L562">562</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC562">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L563">563</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC563"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L564">564</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC564">#<span class="pl-k">define</span>   <span class="pl-en">SETSleepPins</span>                  {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L565">565</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC565">                                          <span class="pl-k">if</span> (((pOutputPortPin[Hw])[(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">Pin</span>) != -<span class="pl-c1">1</span>)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L566">566</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC566">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L567">567</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC567">                                            (*pOutputPortPin[Hw][(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">pGpio</span>).<span class="pl-smi">set_data</span>  =  pOutputPortPin[Hw][(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L568">568</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC568">                                            (*pOutputPortPin[Hw][(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">pGpio</span>).<span class="pl-smi">dir</span>      &amp;= ~pOutputPortPin[Hw][(<span class="pl-c1">0</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L569">569</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC569">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L570">570</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC570">                                          <span class="pl-k">if</span> (((pOutputPortPin[Hw])[(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">Pin</span>) != -<span class="pl-c1">1</span>)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L571">571</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC571">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L572">572</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC572">                                            (*pOutputPortPin[Hw][(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">pGpio</span>).<span class="pl-smi">set_data</span>  =  pOutputPortPin[Hw][(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L573">573</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC573">                                            (*pOutputPortPin[Hw][(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">pGpio</span>).<span class="pl-smi">dir</span>      &amp;= ~pOutputPortPin[Hw][(<span class="pl-c1">2</span> * OUTPUT_PORT_PINS) + SLEEP].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L574">574</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC574">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L575">575</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC575">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L576">576</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC576"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L577">577</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC577">#<span class="pl-k">define</span>   <span class="pl-en">SETMotorType</span>(<span class="pl-v">Port, NewType</span>)   {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L578">578</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC578">                                          Motor[Port].<span class="pl-smi">Type</span> = NewType;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L579">579</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC579">                                          <span class="pl-k">if</span> (TYPE_MINITACHO == NewType)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L580">580</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC580">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L581">581</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC581">                                            CountsPerPulse[Port]      =  COUNTS_PER_PULSE_MM;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L582">582</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC582">                                            SamplesPerSpeed[Port]     = SamplesMediumMotor;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L583">583</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC583">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L584">584</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC584">                                          <span class="pl-k">else</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L585">585</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC585">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L586">586</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC586">                                            CountsPerPulse[Port]      =  COUNTS_PER_PULSE_LM;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L587">587</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC587">                                            SamplesPerSpeed[Port]     =  SamplesLargeMotor;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L588">588</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC588">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L589">589</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC589">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L590">590</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC590"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L591">591</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC591">#<span class="pl-k">define</span>   <span class="pl-en">SETAvgTachoCount</span>(<span class="pl-v">Port, Speed</span>) {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L592">592</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC592">                                          <span class="pl-k">if</span> (Speed &gt; <span class="pl-c1">80</span>)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L593">593</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC593">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L594">594</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC594">                                            AVG_TACHO_COUNTS[Port] = SamplesPerSpeed[Port][<span class="pl-c1">3</span>];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L595">595</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC595">                                            AVG_COUNTS[Port]       = SamplesPerSpeed[Port][<span class="pl-c1">3</span>] * CountsPerPulse[Port];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L596">596</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC596">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L597">597</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC597">                                          <span class="pl-k">else</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L598">598</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC598">                                          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L599">599</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC599">                                            <span class="pl-k">if</span> (Speed &gt; <span class="pl-c1">60</span>)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L600">600</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC600">                                            {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L601">601</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC601">                                              AVG_TACHO_COUNTS[Port] = SamplesPerSpeed[Port][<span class="pl-c1">2</span>];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L602">602</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC602">                                              AVG_COUNTS[Port]       = SamplesPerSpeed[Port][<span class="pl-c1">2</span>] * CountsPerPulse[Port];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L603">603</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC603">                                            }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L604">604</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC604">                                            <span class="pl-k">else</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L605">605</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC605">                                            {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L606">606</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC606">                                              <span class="pl-k">if</span> (Speed &gt; <span class="pl-c1">40</span>)\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L607">607</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC607">                                              {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L608">608</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC608">                                                AVG_TACHO_COUNTS[Port] = SamplesPerSpeed[Port][<span class="pl-c1">1</span>];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L609">609</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC609">                                                AVG_COUNTS[Port]       = SamplesPerSpeed[Port][<span class="pl-c1">1</span>] * CountsPerPulse[Port];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L610">610</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC610">                                              }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L611">611</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC611">                                              <span class="pl-k">else</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L612">612</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC612">                                              {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L613">613</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC613">                                                AVG_TACHO_COUNTS[Port] = SamplesPerSpeed[Port][<span class="pl-c1">0</span>];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L614">614</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC614">                                                AVG_COUNTS[Port]       = SamplesPerSpeed[Port][<span class="pl-c1">0</span>] * CountsPerPulse[Port];\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L615">615</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC615">                                              }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L616">616</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC616">                                            }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L617">617</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC617">                                          }\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L618">618</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC618">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L619">619</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC619"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L620">620</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC620">#<span class="pl-k">define</span>   <span class="pl-en">FREERunning24bittimer</span>         ((ULONG)((((ULONG*)(TIMER64P3))[TIM34])&gt;&gt;<span class="pl-c1">8</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L621">621</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC621"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L622">622</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC622">#<span class="pl-k">define</span>   <span class="pl-en">CLEARTachoArray</span>(<span class="pl-v">No</span>)           {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L623">623</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC623">                                          Motor[No].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L624">624</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC624">                                          <span class="pl-c1">memset</span>(&amp;TachoSamples[No], <span class="pl-c1">0</span>, <span class="pl-k">sizeof</span>(TACHOSAMPLES));\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L625">625</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC625">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L626">626</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC626"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L627">627</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC627">#<span class="pl-k">define</span>   <span class="pl-en">OutputFloat</span>(<span class="pl-v">port,pin</span>)         {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L628">628</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC628">                                          (*pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">pGpio</span>).<span class="pl-smi">dir</span> |=  pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L629">629</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC629">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L630">630</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC630"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L631">631</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC631">#<span class="pl-k">define</span>   <span class="pl-en">OutputRead</span>(<span class="pl-v">port,pin</span>)          ((*pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].pGpio).in_data &amp; pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].Mask)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L632">632</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC632"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L633">633</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC633">#<span class="pl-k">define</span>   <span class="pl-en">OutputHigh</span>(<span class="pl-v">port,pin</span>)          {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L634">634</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC634">                                          (*pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">pGpio</span>).<span class="pl-smi">set_data</span>  =  pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L635">635</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC635">                                          (*pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">pGpio</span>).<span class="pl-smi">dir</span>      &amp;= ~pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L636">636</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC636">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L637">637</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC637"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L638">638</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC638">#<span class="pl-k">define</span>   <span class="pl-en">OutputLow</span>(<span class="pl-v">port,pin</span>)           {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L639">639</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC639">                                          (*pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">pGpio</span>).<span class="pl-smi">clr_data</span>  =  pOutputPortPin[Hw][(OUTPUT_PORT_PINS * port) + pin].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L640">640</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC640">                                          (*pOutputPortPin[Hw][(port * OUTPUT_PORT_PINS) + pin].<span class="pl-smi">pGpio</span>).<span class="pl-smi">dir</span>      &amp;= ~pOutputPortPin[Hw][(OUTPUT_PORT_PINS * port) + pin].<span class="pl-smi">Mask</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L641">641</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC641">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L642">642</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC642"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L643">643</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC643"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L644">644</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC644">#<span class="pl-k">define</span>   <span class="pl-en">EHRPWMClkDis</span>                  {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L645">645</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC645">                                          eHRPWM1[TBCTL]  = (TB_UP | TB_DISABLE | TB_SHADOW | TB_SYNC_DISABLE | TB_HDIV1 | TB_DIV1 | TB_COUNT_FREEZE);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L646">646</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC646">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L647">647</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC647"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L648">648</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC648">#<span class="pl-k">define</span>   <span class="pl-en">EHRPWMClkEna</span>                  {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L649">649</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC649">                                          eHRPWM1[TBCTL]  = (TB_UP | TB_DISABLE | TB_SHADOW | TB_SYNC_DISABLE | TB_HDIV1 | TB_DIV1 | TB_COUNT_UP);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L650">650</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC650">                                          REGUnlock;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L651">651</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC651">                                          <span class="pl-c1">iowrite32</span>((<span class="pl-c1">ioread32</span>(&amp;SYSCFG0[CFGCHIP1]) | TBCLKSYNC),&amp;SYSCFG0[CFGCHIP1]); <span class="pl-c">/*This is the clock to all eHRPWM&#39;s*/</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L652">652</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC652">                                          REGLock;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L653">653</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC653">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L654">654</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC654"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L655">655</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC655">#<span class="pl-k">define</span>   <span class="pl-en">STOPPwm</span>                       {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L656">656</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC656">                                          <span class="pl-c1">iowrite16</span>(0x00, &amp;eCAP0[0x15]);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L657">657</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC657">                                          <span class="pl-c1">iowrite16</span>(0x00, &amp;eCAP1[0x15]);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L658">658</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC658">                                          TIMER64P3[TGCR]  = 0x00000000;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L659">659</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC659">                                          <span class="pl-c1">iowrite16</span>(0x00, &amp;eHRPWM1[TBCTL]);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L660">660</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC660">                                          <span class="pl-c1">iowrite16</span>(0x00, &amp;eHRPWM1[CMPCTL]);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L661">661</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC661">                                          EHRPWMClkDis;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L662">662</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC662">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L663">663</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC663"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L664">664</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC664">#<span class="pl-k">define</span>   <span class="pl-en">SETPwmFreqKHz</span>(<span class="pl-v">KHz</span>)            {\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L665">665</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC665">                                          eHRPWM1[TBPRD] = KHz; <span class="pl-c">/* For Motor A and Motor B */</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L666">666</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC666">                                          eCAP0[CAP1]    = KHz; <span class="pl-c">/* For Motor C             */</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L667">667</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC667">                                          eCAP1[CAP1]    = KHz; <span class="pl-c">/* For Motor D             */</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L668">668</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC668">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L669">669</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC669"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L670">670</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC670">#<span class="pl-k">define</span>   <span class="pl-en">SETUPPwmModules</span>               { \</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L671">671</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC671">                                          \</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L672">672</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC672">                                          <span class="pl-c">/* eHRPWM Module */</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L673">673</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC673">                                          EHRPWMClkDis;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L674">674</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC674">                                          eHRPWM1[TBPHS]  = <span class="pl-c1">0</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L675">675</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC675">                                          eHRPWM1[TBCNT]  = <span class="pl-c1">0</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L676">676</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC676">                                          eHRPWM1[CMPCTL] = (CC_A_SHADOW | CC_B_SHADOW | CC_CTR_A_ZERO | CC_CTR_B_ZERO);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L677">677</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC677">                                          eHRPWM1[AQCTLA] = 0x00000021;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L678">678</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC678">                                          eHRPWM1[AQCTLB] = 0x00000201;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L679">679</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC679">                                          EHRPWMClkEna;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L680">680</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC680">                                          \</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L681">681</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC681">                                          <span class="pl-c">/* eCAP modules - APWM */</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L682">682</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC682">                                          (eCAP0)[TSCTR]    = <span class="pl-c1">0</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L683">683</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC683">                                          (eCAP1)[TSCTR]    = <span class="pl-c1">0</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L684">684</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC684">                                          (eCAP0)[CTRPHS]   = <span class="pl-c1">0</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L685">685</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC685">                                          (eCAP1)[CTRPHS]   = <span class="pl-c1">0</span>;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L686">686</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC686">                                          eCAP0[ECCTL2]     = 0x0690;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L687">687</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC687">                                          eCAP1[ECCTL2]     = 0x0690;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L688">688</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC688">                                          TIMER64P3[TGCR]   = 0x00003304;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L689">689</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC689">                                          TIMER64P3[TGCR]  |= 0x00000002;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L690">690</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC690">                                          TIMER64P3[PRD34]  = 0xFFFFFFFF;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L691">691</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC691">                                          TIMER64P3[TCR]    = 0x00800000;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L692">692</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC692">                                          \</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L693">693</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC693">                                          <span class="pl-c">/* Setup PWM */</span>\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L694">694</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC694">                                          <span class="pl-c1">SetDutyMA</span>(<span class="pl-c1">0</span>);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L695">695</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC695">                                          <span class="pl-c1">SetDutyMB</span>(<span class="pl-c1">0</span>);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L696">696</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC696">                                          <span class="pl-c1">SetDutyMC</span>(<span class="pl-c1">0</span>);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L697">697</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC697">                                          <span class="pl-c1">SetDutyMD</span>(<span class="pl-c1">0</span>);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L698">698</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC698">                                          <span class="pl-c1">SETPwmFreqKHz</span>(MAX_PWM_CNT-<span class="pl-c1">1</span>);\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L699">699</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC699">                                          FLOATFaultPins;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L700">700</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC700">                                          SETSleepPins;\</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L701">701</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC701">                                        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L702">702</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC702"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L703">703</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC703">#<span class="pl-k">define</span>   <span class="pl-en">READIntA</span>                      <span class="pl-en">OutputRead</span>(<span class="pl-c1">0</span>,INT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L704">704</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC704">#<span class="pl-k">define</span>   <span class="pl-en">READIntB</span>                      <span class="pl-en">OutputRead</span>(<span class="pl-c1">1</span>,INT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L705">705</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC705">#<span class="pl-k">define</span>   <span class="pl-en">READIntC</span>                      <span class="pl-en">OutputRead</span>(<span class="pl-c1">2</span>,INT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L706">706</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC706">#<span class="pl-k">define</span>   <span class="pl-en">READIntD</span>                      <span class="pl-en">OutputRead</span>(<span class="pl-c1">3</span>,INT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L707">707</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC707"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L708">708</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC708"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L709">709</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC709"><span class="pl-c">/*</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L710">710</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC710"><span class="pl-c"> * Functions</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L711">711</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC711"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L712">712</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC712">void      CheckSpeedPowerLimits(SBYTE *pCheckVal)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L713">713</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC713">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L714">714</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC714">  <span class="pl-k">if</span> (MAX_SPEED &lt; *pCheckVal)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L715">715</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC715">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L716">716</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC716">    *pCheckVal = MAX_SPEED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L717">717</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC717">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L718">718</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC718">  <span class="pl-k">if</span> (-MAX_SPEED &gt; *pCheckVal)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L719">719</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC719">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L720">720</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC720">    *pCheckVal = -MAX_SPEED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L721">721</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC721">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L722">722</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC722">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L723">723</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC723"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L724">724</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC724"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L725">725</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC725">UBYTE     <span class="pl-en">CheckLessThanSpecial</span>(SLONG Param1, SLONG Param2, SLONG Inv)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L726">726</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC726">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L727">727</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC727">  UBYTE   RtnVal = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L728">728</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC728"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L729">729</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC729">  <span class="pl-k">if</span> ((Param1 * Inv) &lt; (Param2 * Inv))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L730">730</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC730">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L731">731</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC731">    RtnVal = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L732">732</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC732">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L733">733</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC733">  <span class="pl-k">return</span>(RtnVal);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L734">734</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC734">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L735">735</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC735"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L736">736</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC736"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L737">737</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC737"><span class="pl-k">void</span>      <span class="pl-en">IncSpeed</span>(SBYTE Dir, SBYTE *pSpeed)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L738">738</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC738">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L739">739</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC739">  <span class="pl-k">if</span> ((NON_INV == Dir) &amp;&amp; (MAX_SPEED &gt; *pSpeed))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L740">740</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC740">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L741">741</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC741">    (*pSpeed)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L742">742</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC742">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L743">743</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC743">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L744">744</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC744">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L745">745</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC745">    <span class="pl-k">if</span> ((INV == Dir) &amp;&amp; (-MAX_SPEED &lt; *pSpeed))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L746">746</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC746">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L747">747</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC747">      (*pSpeed)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L748">748</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC748">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L749">749</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC749">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L750">750</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC750">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L751">751</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC751"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L752">752</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC752"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L753">753</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC753"><span class="pl-k">void</span>      <span class="pl-en">DecSpeed</span>(SBYTE Dir, SBYTE *pSpeed)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L754">754</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC754">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L755">755</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC755">  <span class="pl-k">if</span> ((NON_INV == Dir) &amp;&amp; (<span class="pl-c1">0</span> &lt; *pSpeed))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L756">756</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC756">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L757">757</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC757">    (*pSpeed)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L758">758</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC758">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L759">759</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC759">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L760">760</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC760">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L761">761</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC761">    <span class="pl-k">if</span> ((INV == Dir) &amp;&amp; (<span class="pl-c1">0</span> &gt; *pSpeed))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L762">762</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC762">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L763">763</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC763">      (*pSpeed)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L764">764</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC764">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L765">765</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC765">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L766">766</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC766">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L767">767</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC767"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L768">768</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC768"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L769">769</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC769"><span class="pl-k">void</span>      <span class="pl-en">SetDirRwd</span>(UBYTE Port)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L770">770</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC770">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L771">771</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC771">  <span class="pl-c1">OutputFloat</span>(Port,DIR0);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L772">772</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC772">  <span class="pl-c1">OutputHigh</span>(Port,DIR1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L773">773</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC773">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L774">774</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC774"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L775">775</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC775"><span class="pl-k">void</span>      <span class="pl-en">SetDirFwd</span>(UBYTE Port)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L776">776</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC776">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L777">777</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC777">  <span class="pl-c1">OutputHigh</span>(Port,DIR0);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L778">778</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC778">  <span class="pl-c1">OutputFloat</span>(Port,DIR1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L779">779</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC779">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L780">780</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC780"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L781">781</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC781"><span class="pl-k">void</span>      <span class="pl-en">SetBrake</span>(UBYTE Port)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L782">782</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC782">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L783">783</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC783">  <span class="pl-c1">OutputHigh</span>(Port,DIR0);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L784">784</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC784">  <span class="pl-c1">OutputHigh</span>(Port,DIR1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L785">785</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC785">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L786">786</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC786"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L787">787</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC787"><span class="pl-k">void</span>      <span class="pl-en">SetCoast</span>(UBYTE Port)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L788">788</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC788">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L789">789</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC789">  <span class="pl-c1">OutputLow</span>(Port,DIR0);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L790">790</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC790">  <span class="pl-c1">OutputLow</span>(Port,DIR1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L791">791</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC791">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L792">792</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC792"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L793">793</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC793"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L794">794</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC794">UWORD     <span class="pl-en">GetTachoDir</span>(UBYTE Port)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L795">795</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC795">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L796">796</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC796">  <span class="pl-k">return</span>(<span class="pl-c1">OutputRead</span>(Port,DIR));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L797">797</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC797">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L798">798</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC798"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L799">799</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC799"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L800">800</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC800">UWORD     <span class="pl-en">GetTachoInt</span>(UBYTE Port)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L801">801</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC801">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L802">802</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC802">  <span class="pl-k">return</span>(<span class="pl-c1">OutputRead</span>(Port,INT));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L803">803</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC803">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L804">804</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC804"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L805">805</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC805"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L806">806</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC806"><span class="pl-k">void</span>      <span class="pl-en">SetPower</span>(UBYTE Port, SLONG Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L807">807</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC807">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L808">808</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC808">  <span class="pl-k">if</span> (MAX_PWM_CNT &lt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L809">809</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC809">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L810">810</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC810">    Power             = MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L811">811</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC811">    Motor[Port].<span class="pl-smi">Power</span> = Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L812">812</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC812">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L813">813</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC813">  <span class="pl-k">if</span> (-MAX_PWM_CNT &gt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L814">814</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC814">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L815">815</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC815">    Power             = -MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L816">816</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC816">    Motor[Port].<span class="pl-smi">Power</span> = Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L817">817</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC817">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L818">818</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC818"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L819">819</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC819">  <span class="pl-k">if</span> (TYPE_MINITACHO == Motor[Port].<span class="pl-smi">Type</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L820">820</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC820">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L821">821</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC821">    <span class="pl-c">// Medium Motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L822">822</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC822">    <span class="pl-k">if</span> (<span class="pl-c1">0</span> != Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L823">823</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC823">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L824">824</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC824">      <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L825">825</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC825">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L826">826</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC826">        <span class="pl-c1">SetDirFwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L827">827</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC827">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L828">828</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC828">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L829">829</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC829">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L830">830</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC830">        <span class="pl-c1">SetDirRwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L831">831</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC831">        Power = <span class="pl-c1">0</span> - Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L832">832</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC832">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L833">833</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC833">      Power = ((Power * <span class="pl-c1">8000</span>)/<span class="pl-c1">10000</span>) + <span class="pl-c1">2000</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L834">834</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC834">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L835">835</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC835">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L836">836</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC836">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L837">837</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC837">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L838">838</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC838">    <span class="pl-c">// Large motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L839">839</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC839">    <span class="pl-k">if</span> (<span class="pl-c1">0</span> != Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L840">840</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC840">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L841">841</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC841">      <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L842">842</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC842">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L843">843</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC843">        <span class="pl-c1">SetDirFwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L844">844</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC844">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L845">845</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC845">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L846">846</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC846">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L847">847</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC847">        <span class="pl-c1">SetDirRwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L848">848</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC848">        Power = <span class="pl-c1">0</span> - Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L849">849</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC849">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L850">850</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC850">      Power = ((Power * <span class="pl-c1">9500</span>)/<span class="pl-c1">10000</span>) + <span class="pl-c1">500</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L851">851</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC851">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L852">852</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC852">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L853">853</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC853">  SetDuty[Port](Power);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L854">854</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC854">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L855">855</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC855"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L856">856</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC856"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L857">857</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC857"><span class="pl-k">void</span>      <span class="pl-en">SetRegulationPower</span>(UBYTE Port, SLONG Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L858">858</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC858">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L859">859</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC859">  <span class="pl-k">if</span> (MAX_PWM_CNT &lt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L860">860</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC860">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L861">861</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC861">    Power             = MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L862">862</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC862">    Motor[Port].<span class="pl-smi">Power</span> = Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L863">863</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC863">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L864">864</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC864">  <span class="pl-k">if</span> (-MAX_PWM_CNT &gt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L865">865</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC865">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L866">866</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC866">    Power             = -MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L867">867</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC867">    Motor[Port].<span class="pl-smi">Power</span> = Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L868">868</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC868">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L869">869</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC869"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L870">870</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC870">  <span class="pl-k">if</span> (TYPE_MINITACHO == Motor[Port].<span class="pl-smi">Type</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L871">871</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC871">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L872">872</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC872">    <span class="pl-c">// Medium Motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L873">873</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC873">    <span class="pl-k">if</span> (<span class="pl-c1">0</span> != Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L874">874</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC874">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L875">875</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC875">      <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L876">876</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC876">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L877">877</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC877">        <span class="pl-c1">SetDirFwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L878">878</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC878">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L879">879</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC879">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L880">880</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC880">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L881">881</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC881">        <span class="pl-c1">SetDirRwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L882">882</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC882">        Power = <span class="pl-c1">0</span> - Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L883">883</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC883">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L884">884</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC884">      Power = ((Power * <span class="pl-c1">9000</span>)/<span class="pl-c1">10000</span>) + <span class="pl-c1">1000</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L885">885</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC885">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L886">886</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC886">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L887">887</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC887">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L888">888</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC888">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L889">889</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC889">    <span class="pl-c">// Large motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L890">890</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC890">    <span class="pl-k">if</span> (<span class="pl-c1">0</span> != Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L891">891</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC891">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L892">892</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC892">      <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt; Power)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L893">893</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC893">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L894">894</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC894">        <span class="pl-c1">SetDirFwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L895">895</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC895">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L896">896</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC896">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L897">897</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC897">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L898">898</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC898">        <span class="pl-c1">SetDirRwd</span>(Port);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L899">899</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC899">        Power = <span class="pl-c1">0</span> - Power;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L900">900</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC900">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L901">901</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC901">      Power = ((Power * <span class="pl-c1">10000</span>)/<span class="pl-c1">10000</span>) + <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L902">902</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC902">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L903">903</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC903">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L904">904</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC904">  SetDuty[Port](Power);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L905">905</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC905">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L906">906</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC906"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L907">907</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC907"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L908">908</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC908"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMA</span>(ULONG Duty)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L909">909</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC909">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L910">910</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC910">  eHRPWM1[CMPA] = (UWORD)Duty;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L911">911</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC911">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L912">912</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC912"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMB</span>(ULONG Duty)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L913">913</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC913">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L914">914</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC914">  eHRPWM1[CMPB] = (UWORD)Duty;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L915">915</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC915">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L916">916</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC916"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMC</span>(ULONG Duty)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L917">917</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC917">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L918">918</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC918">  eCAP1[CAP2]   = Duty;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L919">919</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC919">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L920">920</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC920"><span class="pl-k">void</span>      <span class="pl-en">SetDutyMD</span>(ULONG Duty)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L921">921</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC921">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L922">922</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC922">  eCAP0[CAP2]   = Duty;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L923">923</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC923">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L924">924</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC924"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L925">925</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC925"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L926">926</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC926"><span class="pl-k">void</span>      <span class="pl-en">ClearPIDParameters</span>(UBYTE No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L927">927</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC927">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L928">928</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC928">  Motor[No].<span class="pl-smi">PVal</span>        = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L929">929</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC929">  Motor[No].<span class="pl-smi">IVal</span>        = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L930">930</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC930">  Motor[No].<span class="pl-smi">DVal</span>        = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L931">931</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC931">  Motor[No].<span class="pl-smi">OldSpeedErr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L932">932</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC932">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L933">933</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC933"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L934">934</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC934"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L935">935</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC935"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L936">936</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC936"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L937">937</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC937"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L938">938</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC938"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L939">939</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC939"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L940">940</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC940"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L941">941</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC941"><span class="pl-c">/*! \brief    StepPowerStopMotor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L942">942</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC942"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L943">943</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC943"><span class="pl-c"> *  Helper function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L944">944</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC944"><span class="pl-c"> *  Checks how the motor should stop</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L945">945</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC945"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L946">946</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC946"><span class="pl-c"> *  Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L947">947</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC947"><span class="pl-c"> *  No: The motor number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L948">948</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC948"><span class="pl-c"> *  AdjustTachoValue: The value that the tacho should be decremented</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L949">949</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC949"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L950">950</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC950"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L951">951</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC951"><span class="pl-k">void</span>    <span class="pl-en">StepPowerStopMotor</span>(UBYTE No, SLONG AdjustTachoValue)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L952">952</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC952">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L953">953</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC953">  *StepPowerSteps[No] -= AdjustTachoValue;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L954">954</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC954">  <span class="pl-c1">SetPower</span>(No, <span class="pl-c1">0</span>);                <span class="pl-c">// Don&#39;t destroy power level if next command needs to use it</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L955">955</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC955">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TargetBrake</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L956">956</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC956">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L957">957</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC957">    <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L958">958</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC958">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L959">959</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC959">      <span class="pl-c">// To be able to brake at tacho = 0 if this was timed command</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L960">960</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC960">      Motor[No].<span class="pl-smi">TachoCnt</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L961">961</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC961">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L962">962</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC962">    Motor[No].<span class="pl-smi">State</span>  = BRAKED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L963">963</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC963">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L964">964</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC964">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L965">965</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC965">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L966">966</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC966">    Motor[No].<span class="pl-smi">State</span>  = IDLE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L967">967</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC967">    <span class="pl-c1">SetCoast</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L968">968</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC968">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L969">969</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC969">  Motor[No].<span class="pl-smi">TargetState</span> = UNLIMITED_UNREG;  <span class="pl-c">// Default motor startup</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L970">970</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC970"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L971">971</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC971">  <span class="pl-c">// If this was a synced motor then clear it</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L972">972</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC972">  <span class="pl-k">if</span> (SyncMNos[<span class="pl-c1">0</span>] == No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L973">973</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC973">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L974">974</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC974">    SyncMNos[<span class="pl-c1">0</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L975">975</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC975">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L976">976</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC976">  <span class="pl-k">if</span> (SyncMNos[<span class="pl-c1">1</span>] == No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L977">977</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC977">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L978">978</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC978">    SyncMNos[<span class="pl-c1">1</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L979">979</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC979">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L980">980</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC980">  ReadyStatus &amp;= ~(0x01 &lt;&lt; No);             <span class="pl-c">// Clear ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L981">981</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC981">  TestStatus  &amp;= ~(0x01 &lt;&lt; No);             <span class="pl-c">// Clear ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L982">982</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC982">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L983">983</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC983"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L984">984</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC984"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L985">985</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC985"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L986">986</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC986"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L987">987</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC987"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L988">988</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC988"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L989">989</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC989"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L990">990</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC990"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L991">991</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC991"><span class="pl-c">/*! \brief    StepSpeedCheckTachoCntUp</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L992">992</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC992"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L993">993</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC993"><span class="pl-c"> *  Helper function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L994">994</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC994"><span class="pl-c"> *  Checks if step power should have a Count up sequence</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L995">995</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC995"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L996">996</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC996"><span class="pl-c"> *  Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L997">997</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC997"><span class="pl-c"> *  No: The motor number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L998">998</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC998"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L999">999</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC999"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1000">1000</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1000">UBYTE    <span class="pl-en">StepSpeedCheckTachoCntUp</span>(UBYTE No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1001">1001</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1001">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1002">1002</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1002">  UBYTE  Return;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1003">1003</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1003">  SLONG  CorrPower;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1004">1004</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1004"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1005">1005</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1005">  Return = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1006">1006</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1006">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TachoCntUp</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1007">1007</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1007">  { <span class="pl-c">// RampUp enabled</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1008">1008</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1008"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1009">1009</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1009">    Motor[No].<span class="pl-smi">State</span> = LIMITED_REG_STEPUP;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1010">1010</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1010"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1011">1011</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1011">    <span class="pl-k">if</span> (<span class="pl-c1">0</span> != Motor[No].<span class="pl-smi">Speed</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1012">1012</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1012">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1013">1013</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1013">      CorrPower = Motor[No].<span class="pl-smi">TargetPower</span> - (SLONG)(Motor[No].<span class="pl-smi">Speed</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1014">1014</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1014">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1015">1015</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1015">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1016">1016</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1016">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1017">1017</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1017">      CorrPower = Motor[No].<span class="pl-smi">TargetPower</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1018">1018</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1018">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1019">1019</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1019"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1020">1020</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1020">    <span class="pl-c">// Number of powersteps per tacho count</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1021">1021</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1021">    Motor[No].<span class="pl-smi">RampUpFactor</span> = ((CorrPower * RAMP_FACTOR) + (Motor[No].<span class="pl-smi">TachoCntUp</span>/<span class="pl-c1">2</span>))/Motor[No].<span class="pl-smi">TachoCntUp</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1022">1022</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1022"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1023">1023</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1023">    <span class="pl-k">if</span> (<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">RampUpFactor</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1024">1024</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1024">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1025">1025</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1025">      Motor[No].<span class="pl-smi">RampUpFactor</span> = <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1026">1026</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1026">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1027">1027</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1027">    Motor[No].<span class="pl-smi">RampUpOffset</span> = Motor[No].<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1028">1028</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1028"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1029">1029</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1029">    <span class="pl-k">if</span> (<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">Speed</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1030">1030</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1030">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1031">1031</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1031">      <span class="pl-c1">ClearPIDParameters</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1032">1032</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1032">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1033">1033</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1033"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1034">1034</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1034">    <span class="pl-k">if</span>((<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">TachoCntConst</span>) &amp;&amp; (<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">TachoCntDown</span>) &amp;&amp; (<span class="pl-c1">1</span> == Motor[No].<span class="pl-smi">TargetBrake</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1035">1035</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1035">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1036">1036</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1036">      Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1037">1037</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1037">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1038">1038</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1038">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1039">1039</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1039">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1040">1040</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1040">      Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1041">1041</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1041">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1042">1042</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1042">    Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1043">1043</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1043">    Return                 = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1044">1044</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1044">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1045">1045</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1045">  <span class="pl-k">return</span>(Return);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1046">1046</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1046">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1047">1047</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1047"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1048">1048</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1048"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1049">1049</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1049"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1050">1050</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1050"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1051">1051</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1051"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1052">1052</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1052"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1053">1053</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1053"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1054">1054</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1054"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1055">1055</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1055"><span class="pl-c">/*! \brief    StepPowerCheckTachoCntConst</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1056">1056</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1056"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1057">1057</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1057"><span class="pl-c"> *  Helper function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1058">1058</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1058"><span class="pl-c"> *  Checks if step power should have a constant power sequence</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1059">1059</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1059"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1060">1060</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1060"><span class="pl-c"> *  Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1061">1061</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1061"><span class="pl-c"> *  No: The motor number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1062">1062</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1062"><span class="pl-c"> *  AdjustTachoValue: The value that the tacho should be decremented</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1063">1063</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1063"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1064">1064</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1064"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1065">1065</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1065">UBYTE   <span class="pl-en">StepSpeedCheckTachoCntConst</span>(UBYTE No, SLONG AdjustTachoValue)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1066">1066</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1066">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1067">1067</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1067">  UBYTE ReturnState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1068">1068</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1068"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1069">1069</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1069">  ReturnState = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1070">1070</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1070"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1071">1071</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1071">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TachoCntConst</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1072">1072</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1072">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1073">1073</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1073">    *StepPowerSteps[No]  -= AdjustTachoValue;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1074">1074</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1074">    Motor[No].<span class="pl-smi">TargetSpeed</span> = Motor[No].<span class="pl-smi">TargetPower</span>; <span class="pl-c">//(Motor[No].TargetPower / SPEED_PWMCNT_REL);</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1075">1075</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1075">    Motor[No].<span class="pl-smi">State</span>       = LIMITED_REG_STEPCONST;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1076">1076</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1076">    <span class="pl-c1">ClearPIDParameters</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1077">1077</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1077"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1078">1078</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1078">    <span class="pl-k">if</span>((<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">TachoCntDown</span>) &amp;&amp; (<span class="pl-c1">1</span> == Motor[No].<span class="pl-smi">TargetBrake</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1079">1079</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1079">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1080">1080</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1080">      Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1081">1081</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1081">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1082">1082</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1082">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1083">1083</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1083">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1084">1084</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1084">      Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1085">1085</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1085">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1086">1086</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1086">    Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1087">1087</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1087">    ReturnState            =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1088">1088</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1088">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1089">1089</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1089">  <span class="pl-k">return</span>(ReturnState);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1090">1090</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1090">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1091">1091</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1091"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1092">1092</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1092"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1093">1093</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1093"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1094">1094</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1094"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1095">1095</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1095"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1096">1096</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1096"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1097">1097</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1097"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1098">1098</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1098"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1099">1099</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1099"><span class="pl-c">/*! \brief    StepSpeedCheckTachoCntDown</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1100">1100</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1100"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1101">1101</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1101"><span class="pl-c"> *  Helper function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1102">1102</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1102"><span class="pl-c"> *  Checks if step power should ramp down or stop</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1103">1103</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1103"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1104">1104</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1104"><span class="pl-c"> *  Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1105">1105</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1105"><span class="pl-c"> *  No: The motor number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1106">1106</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1106"><span class="pl-c"> *  AdjustTachoValue: The value that the tacho should be decremented</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1107">1107</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1107"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1108">1108</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1108"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1109">1109</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1109"><span class="pl-k">void</span>    <span class="pl-en">StepSpeedCheckTachoCntDown</span>(UBYTE No, SLONG AdjustTachoValue)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1110">1110</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1110">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1111">1111</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1111">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TachoCntDown</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1112">1112</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1112">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1113">1113</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1113">    Motor[No].<span class="pl-smi">RampDownFactor</span> = ((Motor[No].<span class="pl-smi">TargetPower</span> * RAMP_FACTOR) + (Motor[No].<span class="pl-smi">TachoCntDown</span>/<span class="pl-c1">2</span>))/Motor[No].<span class="pl-smi">TachoCntDown</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1114">1114</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1114"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1115">1115</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1115">    *StepPowerSteps[No]     -= AdjustTachoValue;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1116">1116</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1116">    Motor[No].<span class="pl-smi">State</span>          = LIMITED_REG_STEPDOWN;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1117">1117</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1117">    MinRegEnabled[No]        = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1118">1118</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1118">    <span class="pl-c1">ClearPIDParameters</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1119">1119</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1119">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1120">1120</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1120">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1121">1121</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1121">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1122">1122</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1122">    <span class="pl-c1">StepPowerStopMotor</span>(No, AdjustTachoValue);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1123">1123</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1123">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1124">1124</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1124">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1125">1125</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1125"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1126">1126</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1126"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1127">1127</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1127"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1128">1128</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1128"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1129">1129</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1129"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1130">1130</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1130"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1131">1131</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1131"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1132">1132</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1132"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1133">1133</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1133"><span class="pl-c">/*! \brief    StepPowerCheckTachoCntUp</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1134">1134</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1134"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1135">1135</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1135"><span class="pl-c"> *  Helper function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1136">1136</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1136"><span class="pl-c"> *  Checks if step power should have a Count up sequence</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1137">1137</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1137"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1138">1138</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1138"><span class="pl-c"> *  Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1139">1139</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1139"><span class="pl-c"> *  No: The motor number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1140">1140</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1140"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1141">1141</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1141"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1142">1142</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1142">UBYTE    <span class="pl-en">StepPowerCheckTachoCntUp</span>(UBYTE No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1143">1143</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1143">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1144">1144</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1144">  UBYTE Return;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1145">1145</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1145"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1146">1146</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1146">  Return = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1147">1147</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1147"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1148">1148</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1148">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TachoCntUp</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1149">1149</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1149">  { <span class="pl-c">// RampUp enabled</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1150">1150</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1150"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1151">1151</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1151">    Motor[No].<span class="pl-smi">State</span>        = LIMITED_UNREG_STEPUP;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1152">1152</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1152">    Motor[No].<span class="pl-smi">RampUpFactor</span> = ((Motor[No].<span class="pl-smi">TargetPower</span> * RAMP_FACTOR) + (Motor[No].<span class="pl-smi">TachoCntUp</span>/<span class="pl-c1">2</span>))/Motor[No].<span class="pl-smi">TachoCntUp</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1153">1153</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1153">    <span class="pl-c1">ClearPIDParameters</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1154">1154</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1154"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1155">1155</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1155">    <span class="pl-k">if</span>((<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">TachoCntConst</span>) &amp;&amp; (<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">TachoCntDown</span>) &amp;&amp; (<span class="pl-c1">1</span> == Motor[No].<span class="pl-smi">TargetBrake</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1156">1156</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1156">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1157">1157</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1157">      Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1158">1158</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1158">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1159">1159</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1159">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1160">1160</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1160">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1161">1161</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1161">      Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1162">1162</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1162">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1163">1163</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1163">    Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1164">1164</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1164">    Return                 = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1165">1165</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1165">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1166">1166</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1166">  <span class="pl-k">return</span>(Return);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1167">1167</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1167">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1168">1168</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1168"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1169">1169</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1169"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1170">1170</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1170"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1171">1171</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1171"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1172">1172</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1172"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1173">1173</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1173"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1174">1174</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1174"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1175">1175</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1175"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1176">1176</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1176"><span class="pl-c">/*! \brief    StepPowerCheckTachoCntConst</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1177">1177</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1177"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1178">1178</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1178"><span class="pl-c"> *  Helper function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1179">1179</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1179"><span class="pl-c"> *  Checks if step power should have a constant power sequense</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1180">1180</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1180"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1181">1181</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1181"><span class="pl-c"> *  Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1182">1182</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1182"><span class="pl-c"> *  No: The motor number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1183">1183</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1183"><span class="pl-c"> *  AdjustTachoValue: The value that the tacho should be decremented</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1184">1184</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1184"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1185">1185</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1185"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1186">1186</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1186">UBYTE   <span class="pl-en">StepPowerCheckTachoCntConst</span>(UBYTE No, SLONG AdjustTachoValue)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1187">1187</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1187">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1188">1188</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1188">  UBYTE ReturnState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1189">1189</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1189"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1190">1190</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1190">  ReturnState = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1191">1191</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1191"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1192">1192</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1192">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TachoCntConst</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1193">1193</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1193">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1194">1194</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1194">   *StepPowerSteps[No] -= AdjustTachoValue;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1195">1195</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1195">   Motor[No].<span class="pl-smi">Power</span>      = Motor[No].<span class="pl-smi">TargetPower</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1196">1196</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1196">   Motor[No].<span class="pl-smi">State</span>      = LIMITED_UNREG_STEPCONST;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1197">1197</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1197">   <span class="pl-c1">SetPower</span>(No,Motor[No].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1198">1198</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1198">   <span class="pl-c1">ClearPIDParameters</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1199">1199</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1199"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1200">1200</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1200">   <span class="pl-k">if</span>((<span class="pl-c1">0</span> == Motor[No].<span class="pl-smi">TachoCntDown</span>) &amp;&amp; (<span class="pl-c1">1</span> == Motor[No].<span class="pl-smi">TargetBrake</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1201">1201</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1201">   {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1202">1202</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1202">     Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1203">1203</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1203">   }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1204">1204</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1204">   <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1205">1205</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1205">   {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1206">1206</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1206">     Motor[No].<span class="pl-smi">BrakeAfter</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1207">1207</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1207">   }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1208">1208</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1208">   Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1209">1209</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1209">   ReturnState            = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1210">1210</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1210">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1211">1211</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1211">  <span class="pl-k">return</span>(ReturnState);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1212">1212</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1212">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1213">1213</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1213"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1214">1214</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1214"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1215">1215</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1215"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1216">1216</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1216"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1217">1217</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1217"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1218">1218</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1218"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1219">1219</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1219"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1220">1220</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1220"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1221">1221</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1221"><span class="pl-c">/*! \brief    StepPowerCheckTachoCntDown</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1222">1222</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1222"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1223">1223</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1223"><span class="pl-c"> *  Helper function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1224">1224</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1224"><span class="pl-c"> *  Checks if step power should ramp down or stop</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1225">1225</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1225"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1226">1226</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1226"><span class="pl-c"> *  Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1227">1227</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1227"><span class="pl-c"> *  No: The motor number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1228">1228</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1228"><span class="pl-c"> *  AdjustTachoValue: The value that the tacho should be decremented</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1229">1229</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1229"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1230">1230</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1230"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1231">1231</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1231"><span class="pl-k">void</span>    <span class="pl-en">StepPowerCheckTachoCntDown</span>(UBYTE No, SLONG AdjustTachoValue)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1232">1232</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1232">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1233">1233</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1233">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TachoCntDown</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1234">1234</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1234">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1235">1235</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1235"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1236">1236</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1236">    Motor[No].<span class="pl-smi">RampDownFactor</span>  = ((Motor[No].<span class="pl-smi">TargetPower</span> * RAMP_FACTOR) + (Motor[No].<span class="pl-smi">TachoCntDown</span>/<span class="pl-c1">2</span>))/Motor[No].<span class="pl-smi">TachoCntDown</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1237">1237</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1237">    *StepPowerSteps[No]      -= AdjustTachoValue;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1238">1238</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1238">    Motor[No].<span class="pl-smi">State</span>           = LIMITED_UNREG_STEPDOWN;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1239">1239</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1239">    MinRegEnabled[No]         = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1240">1240</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1240">    <span class="pl-c1">ClearPIDParameters</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1241">1241</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1241">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1242">1242</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1242">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1243">1243</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1243">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1244">1244</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1244">    <span class="pl-c1">StepPowerStopMotor</span>(No, AdjustTachoValue);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1245">1245</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1245">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1246">1246</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1246">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1247">1247</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1247"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1248">1248</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1248"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1249">1249</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1249"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1250">1250</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1250"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1251">1251</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1251"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1252">1252</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1252"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1253">1253</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1253"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1254">1254</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1254"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1255">1255</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1255"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1256">1256</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1256"><span class="pl-c">/*! \brief    dRegulateSpeed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1257">1257</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1257"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1258">1258</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1258"><span class="pl-c"> *  - Calculates the new motor power value (duty cycle)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1259">1259</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1259"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1260">1260</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1260"><span class="pl-c"> *  - Regulation method:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1261">1261</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1261"><span class="pl-c"> *    To be defined</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1262">1262</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1262"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1263">1263</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1263"><span class="pl-c"> *  - Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1264">1264</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1264"><span class="pl-c"> *    - Input:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1265">1265</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1265"><span class="pl-c"> *      - No:       Motor output number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1266">1266</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1266"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1267">1267</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1267"><span class="pl-c"> *    -Output:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1268">1268</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1268"><span class="pl-c"> *      - None</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1269">1269</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1269"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1270">1270</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1270"><span class="pl-k">void</span>      <span class="pl-en">dRegulateSpeed</span>(UBYTE No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1271">1271</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1271">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1272">1272</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1272"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1273">1273</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1273">  SLONG   SpeedErr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1274">1274</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1274"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1275">1275</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1275">  <span class="pl-k">if</span> (TYPE_MINITACHO == Motor[No].<span class="pl-smi">Type</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1276">1276</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1276">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1277">1277</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1277">    SpeedErr       = ((SLONG)(Motor[No].<span class="pl-smi">TargetSpeed</span>) - (SLONG)(Motor[No].<span class="pl-smi">Speed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1278">1278</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1278">    Motor[No].<span class="pl-smi">PVal</span> = SpeedErr * <span class="pl-c1">4</span>; </td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1279">1279</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1279">    Motor[No].<span class="pl-smi">IVal</span> = ((Motor[No].<span class="pl-smi">IVal</span> * <span class="pl-c1">9</span>)/<span class="pl-c1">10</span>) + (SpeedErr / <span class="pl-c1">3</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1280">1280</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1280">    Motor[No].<span class="pl-smi">DVal</span> = (((SpeedErr - (Motor[No].<span class="pl-smi">OldSpeedErr</span>)) * <span class="pl-c1">4</span>)/<span class="pl-c1">2</span>) * <span class="pl-c1">40</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1281">1281</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1281">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1282">1282</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1282">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1283">1283</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1283">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1284">1284</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1284">    SpeedErr       = ((SLONG)(Motor[No].<span class="pl-smi">TargetSpeed</span>) - (SLONG)(Motor[No].<span class="pl-smi">Speed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1285">1285</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1285">    Motor[No].<span class="pl-smi">PVal</span> = SpeedErr * <span class="pl-c1">2</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1286">1286</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1286">    Motor[No].<span class="pl-smi">IVal</span> = ((Motor[No].<span class="pl-smi">IVal</span> * <span class="pl-c1">9</span>)/<span class="pl-c1">10</span>) + (SpeedErr / <span class="pl-c1">4</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1287">1287</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1287">    Motor[No].<span class="pl-smi">DVal</span> = (((SpeedErr - (Motor[No].<span class="pl-smi">OldSpeedErr</span>)) * <span class="pl-c1">4</span>)/<span class="pl-c1">2</span>) * <span class="pl-c1">40</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1288">1288</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1288">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1289">1289</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1289"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1290">1290</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1290">  Motor[No].<span class="pl-smi">Power</span> = Motor[No].<span class="pl-smi">Power</span> + ((Motor[No].<span class="pl-smi">PVal</span> + Motor[No].<span class="pl-smi">IVal</span> + Motor[No].<span class="pl-smi">DVal</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1291">1291</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1291"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1292">1292</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1292">  <span class="pl-k">if</span>(Motor[No].<span class="pl-smi">Power</span> &gt; MAX_PWM_CNT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1293">1293</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1293">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1294">1294</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1294">    Motor[No].<span class="pl-smi">Power</span> = MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1295">1295</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1295">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1296">1296</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1296"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1297">1297</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1297">  <span class="pl-k">if</span>(Motor[No].<span class="pl-smi">Power</span> &lt; -MAX_PWM_CNT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1298">1298</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1298">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1299">1299</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1299">    Motor[No].<span class="pl-smi">Power</span> = -MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1300">1300</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1300">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1301">1301</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1301">  Motor[No].<span class="pl-smi">OldSpeedErr</span> = SpeedErr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1302">1302</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1302"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1303">1303</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1303"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1304">1304</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1304">  <span class="pl-k">if</span> (((Motor[No].<span class="pl-smi">TargetSpeed</span>) &gt; <span class="pl-c1">0</span>) &amp;&amp; (Motor[No].<span class="pl-smi">Power</span> &lt; <span class="pl-c1">0</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1305">1305</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1305">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1306">1306</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1306">    Motor[No].<span class="pl-smi">Power</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1307">1307</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1307">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1308">1308</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1308"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1309">1309</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1309">  <span class="pl-k">if</span> (((Motor[No].<span class="pl-smi">TargetSpeed</span>) &lt; <span class="pl-c1">0</span>) &amp;&amp; (Motor[No].<span class="pl-smi">Power</span> &gt; <span class="pl-c1">0</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1310">1310</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1310">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1311">1311</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1311">    Motor[No].<span class="pl-smi">Power</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1312">1312</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1312">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1313">1313</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1313"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1314">1314</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1314">  <span class="pl-c1">SetRegulationPower</span>(No, Motor[No].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1315">1315</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1315">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1316">1316</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1316"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1317">1317</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1317"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1318">1318</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1318"><span class="pl-k">void</span>      <span class="pl-en">BrakeMotor</span>(UBYTE No, SLONG TachoCnt)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1319">1319</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1319">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1320">1320</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1320">  SLONG TmpTacho;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1321">1321</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1321"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1322">1322</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1322">  TmpTacho = TachoCnt * <span class="pl-c1">100</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1323">1323</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1323"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1324">1324</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1324">  TmpTacho &lt;&lt;= <span class="pl-c1">2</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1325">1325</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1325"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1326">1326</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1326">  <span class="pl-k">if</span> (TmpTacho &gt; MAX_PWM_CNT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1327">1327</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1327">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1328">1328</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1328">    TmpTacho = MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1329">1329</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1329">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1330">1330</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1330">  <span class="pl-k">if</span> (TmpTacho &lt; -MAX_PWM_CNT)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1331">1331</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1331">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1332">1332</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1332">    TmpTacho = -MAX_PWM_CNT;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1333">1333</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1333">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1334">1334</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1334"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1335">1335</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1335">  Motor[No].<span class="pl-smi">Power</span> = <span class="pl-c1">0</span> - TmpTacho;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1336">1336</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1336">  <span class="pl-c1">SetRegulationPower</span>(No,Motor[No].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1337">1337</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1337">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1338">1338</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1338"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1339">1339</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1339"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1340">1340</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1340">UBYTE      <span class="pl-en">RampDownToBrake</span>(UBYTE No, SLONG CurrentCnt, SLONG TargetCnt, SLONG Dir)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1341">1341</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1341">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1342">1342</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1342">  UBYTE    Status;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1343">1343</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1343"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1344">1344</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1344">  Status = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1345">1345</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1345"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1346">1346</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1346">  <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(CurrentCnt, TargetCnt, Dir))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1347">1347</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1347">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1348">1348</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1348"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1349">1349</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1349"><span class="pl-c">//    Motor[No].TargetSpeed = (SBYTE)((Motor[No].TachoCntConst - CurrentCnt));</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1350">1350</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1350">    Motor[No].<span class="pl-smi">TargetSpeed</span> = (SBYTE)(TargetCnt - CurrentCnt);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1351">1351</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1351"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1352">1352</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1352">    <span class="pl-k">if</span> ((Motor[No].<span class="pl-smi">TargetSpeed</span> &gt; <span class="pl-c1">5</span>) || (Motor[No].<span class="pl-smi">TargetSpeed</span> &lt; -<span class="pl-c1">5</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1353">1353</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1353">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1354">1354</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1354">      <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Motor[No].<span class="pl-smi">TargetSpeed</span>, Motor[No].<span class="pl-smi">Speed</span>, Dir))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1355">1355</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1355">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1356">1356</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1356">        Motor[No].<span class="pl-smi">TargetSpeed</span> = <span class="pl-c1">1</span> * Dir;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1357">1357</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1357">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1358">1358</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1358">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1359">1359</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1359"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1360">1360</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1360">    <span class="pl-c1">dRegulateSpeed</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1361">1361</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1361">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1362">1362</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1362">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1363">1363</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1363">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1364">1364</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1364">    <span class="pl-c">// Done ramping down to brake</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1365">1365</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1365">    Status = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1366">1366</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1366">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1367">1367</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1367">  <span class="pl-k">return</span>(Status);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1368">1368</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1368">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1369">1369</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1369"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1370">1370</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1370"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1371">1371</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1371"><span class="pl-k">void</span>      <span class="pl-en">CalcRampDownFactor</span>(UBYTE No, ULONG CurrentPower, ULONG Counts)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1372">1372</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1372">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1373">1373</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1373"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1374">1374</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1374">  <span class="pl-k">if</span> (Counts != <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1375">1375</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1375">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1376">1376</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1376">    Motor[No].<span class="pl-smi">RampDownFactor</span> = ((CurrentPower * RAMP_FACTOR) + (Counts/<span class="pl-c1">2</span>))/Counts;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1377">1377</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1377">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1378">1378</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1378">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1379">1379</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1379"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1380">1380</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1380"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1381">1381</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1381"><span class="pl-k">void</span>      <span class="pl-en">GetCompareCounts</span>(UBYTE No, SLONG *Counts, SLONG *CompareCounts)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1382">1382</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1382">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1383">1383</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1383">  *Counts = *StepPowerSteps[No];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1384">1384</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1384"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1385">1385</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1385">  <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == Motor[No].<span class="pl-smi">BrakeAfter</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1386">1386</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1386">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1387">1387</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1387">    <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1388">1388</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1388">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1389">1389</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1389">      <span class="pl-c">// Run for time</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1390">1390</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1390">      *CompareCounts = *Counts + (Motor[No].<span class="pl-smi">Speed</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1391">1391</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1391">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1392">1392</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1392">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1393">1393</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1393">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1394">1394</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1394">      <span class="pl-c">// Run for tacho</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1395">1395</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1395">      <span class="pl-k">if</span> (TYPE_TACHO == Motor[No].<span class="pl-smi">Type</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1396">1396</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1396">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1397">1397</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1397">        *CompareCounts = *Counts + ((Motor[No].<span class="pl-smi">Speed</span>)/<span class="pl-c1">2</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1398">1398</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1398">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1399">1399</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1399">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1400">1400</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1400">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1401">1401</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1401">        *CompareCounts = *Counts + ((Motor[No].<span class="pl-smi">Speed</span>/<span class="pl-c1">3</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1402">1402</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1402">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1403">1403</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1403">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1404">1404</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1404">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1405">1405</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1405">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1406">1406</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1406">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1407">1407</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1407">    *CompareCounts = *Counts;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1408">1408</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1408">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1409">1409</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1409">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1410">1410</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1410"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1411">1411</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1411"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1412">1412</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1412"><span class="pl-k">void</span>      <span class="pl-en">StopAndBrakeMotor</span>(UBYTE MotorNo)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1413">1413</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1413">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1414">1414</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1414">  ReadyStatus             &amp;=  ~(0x01 &lt;&lt; MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1415">1415</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1415">  TestStatus              &amp;=  ~(0x01 &lt;&lt; MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1416">1416</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1416">  Motor[MotorNo].<span class="pl-smi">Power</span>     =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1417">1417</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1417">  Motor[MotorNo].<span class="pl-smi">Speed</span>     =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1418">1418</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1418">  Motor[MotorNo].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1419">1419</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1419">  Motor[MotorNo].<span class="pl-smi">State</span>     =  BRAKED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1420">1420</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1420">  <span class="pl-c1">CLEARTachoArray</span>(MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1421">1421</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1421">  <span class="pl-c1">SetPower</span>(MotorNo, Motor[MotorNo].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1422">1422</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1422">  <span class="pl-c1">SetBrake</span>(MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1423">1423</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1423">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1424">1424</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1424"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1425">1425</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1425"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1426">1426</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1426"><span class="pl-k">void</span>      <span class="pl-en">StopAndFloatMotor</span>(UBYTE MotorNo)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1427">1427</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1427">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1428">1428</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1428">  ReadyStatus             &amp;=  ~(0x01 &lt;&lt; MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1429">1429</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1429">  TestStatus              &amp;=  ~(0x01 &lt;&lt; MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1430">1430</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1430">  Motor[MotorNo].<span class="pl-smi">Power</span>     =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1431">1431</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1431">  Motor[MotorNo].<span class="pl-smi">Speed</span>     =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1432">1432</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1432">  Motor[MotorNo].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1433">1433</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1433">  Motor[MotorNo].<span class="pl-smi">State</span>     =  IDLE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1434">1434</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1434">  <span class="pl-c1">CLEARTachoArray</span>(MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1435">1435</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1435">  <span class="pl-c1">SetPower</span>(MotorNo, Motor[MotorNo].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1436">1436</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1436">  <span class="pl-c1">SetCoast</span>(MotorNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1437">1437</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1437">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1438">1438</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1438"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1439">1439</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1439"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1440">1440</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1440"><span class="pl-k">void</span>     <span class="pl-en">FloatSyncedMotors</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1441">1441</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1441">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1442">1442</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1442">  UBYTE   TmpNo0, TmpNo1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1443">1443</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1443"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1444">1444</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1444">  TmpNo0 = SyncMNos[<span class="pl-c1">0</span>];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1445">1445</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1445">  TmpNo1 = SyncMNos[<span class="pl-c1">1</span>];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1446">1446</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1446"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1447">1447</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1447">  Motor[TmpNo0].<span class="pl-smi">Mutex</span>  =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1448">1448</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1448">  Motor[TmpNo1].<span class="pl-smi">Mutex</span>  =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1449">1449</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1449"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1450">1450</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1450">  <span class="pl-c1">StopAndFloatMotor</span>(TmpNo0);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1451">1451</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1451">  <span class="pl-c1">StopAndFloatMotor</span>(TmpNo1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1452">1452</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1452">  SyncMNos[<span class="pl-c1">0</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1453">1453</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1453">  SyncMNos[<span class="pl-c1">1</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1454">1454</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1454"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1455">1455</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1455">  MaxSyncSpeed              = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1456">1456</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1456">  Motor[TmpNo0].<span class="pl-smi">TargetSpeed</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1457">1457</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1457">  Motor[TmpNo1].<span class="pl-smi">TargetSpeed</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1458">1458</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1458"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1459">1459</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1459">  Motor[TmpNo0].<span class="pl-smi">Mutex</span>  =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1460">1460</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1460">  Motor[TmpNo1].<span class="pl-smi">Mutex</span>  =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1461">1461</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1461">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1462">1462</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1462"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1463">1463</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1463"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1464">1464</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1464"><span class="pl-k">void</span>      <span class="pl-en">TestAndFloatSyncedMotors</span>(UBYTE MotorBitField, UBYTE SyncCmd)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1465">1465</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1465">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1466">1466</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1466"><span class="pl-c">//  UBYTE   TmpNo0, TmpNo1;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1467">1467</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1467"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1468">1468</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1468">  <span class="pl-c">// Only if motors are already sync&#39;ed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1469">1469</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1469">  <span class="pl-k">if</span> ((SyncMNos[<span class="pl-c1">0</span>] != UNUSED_SYNC_MOTOR) &amp;&amp; (SyncMNos[<span class="pl-c1">1</span>] != UNUSED_SYNC_MOTOR))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1470">1470</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1470">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1471">1471</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1471">    <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == SyncCmd)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1472">1472</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1472">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1473">1473</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1473">      <span class="pl-c">//This is new sync&#39;ed motor command</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1474">1474</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1474">      <span class="pl-k">if</span> (((MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[<span class="pl-c1">0</span>])) &amp;&amp; (MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[<span class="pl-c1">1</span>]))))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1475">1475</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1475">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1476">1476</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1476">        <span class="pl-c">// Same motors used -&gt; don&#39;t stop motors</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1477">1477</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1477">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1478">1478</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1478">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1479">1479</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1479">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1480">1480</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1480">        <span class="pl-c">// Only 2 motors can be sync&#39;ed at a time -&gt; stop sync&#39;ed command</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1481">1481</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1481">        <span class="pl-c1">FloatSyncedMotors</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1482">1482</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1482">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1483">1483</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1483">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1484">1484</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1484">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1485">1485</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1485">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1486">1486</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1486">      <span class="pl-k">if</span> ((MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[<span class="pl-c1">0</span>])) || (MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[<span class="pl-c1">1</span>])))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1487">1487</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1487">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1488">1488</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1488">        <span class="pl-c">// Same motors used -&gt; stop sync&#39;ed command</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1489">1489</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1489">        <span class="pl-c1">FloatSyncedMotors</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1490">1490</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1490">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1491">1491</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1491">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1492">1492</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1492"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1493">1493</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1493"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1494">1494</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1494"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1495">1495</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1495"><span class="pl-c">/*</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1496">1496</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1496"><span class="pl-c"></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1497">1497</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1497"><span class="pl-c">    // Check if new sync&#39;ed motor command uses same motors as previous sync cmd</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1498">1498</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1498"><span class="pl-c">    if ((MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[0])) &amp;&amp; (MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[1])))</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1499">1499</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1499"><span class="pl-c">    {</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1500">1500</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1500"><span class="pl-c">      // Check if only one of the sync&#39;ed motors are affected by the new motor cmd</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1501">1501</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1501"><span class="pl-c">      if (((MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[0])) || (MotorBitField &amp; (0x01 &lt;&lt; SyncMNos[1]))) || (TRUE == SyncCmd))</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1502">1502</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1502"><span class="pl-c">      {</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1503">1503</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1503"><span class="pl-c">        // The motor is in sync&#39;ed mode -&gt; float both sync&#39;ed motors</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1504">1504</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1504"><span class="pl-c">        TmpNo0 = SyncMNos[0];</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1505">1505</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1505"><span class="pl-c">        TmpNo1 = SyncMNos[1];</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1506">1506</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1506"><span class="pl-c"></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1507">1507</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1507"><span class="pl-c">        Motor[TmpNo0].Mutex  =  TRUE;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1508">1508</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1508"><span class="pl-c">        Motor[TmpNo1].Mutex  =  TRUE;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1509">1509</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1509"><span class="pl-c"></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1510">1510</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1510"><span class="pl-c">        StopAndFloatMotor(TmpNo0);</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1511">1511</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1511"><span class="pl-c">        StopAndFloatMotor(TmpNo1);</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1512">1512</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1512"><span class="pl-c">        SyncMNos[0] = UNUSED_SYNC_MOTOR;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1513">1513</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1513"><span class="pl-c">        SyncMNos[1] = UNUSED_SYNC_MOTOR;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1514">1514</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1514"><span class="pl-c"></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1515">1515</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1515"><span class="pl-c">        MaxSyncSpeed              = 0;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1516">1516</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1516"><span class="pl-c">        Motor[TmpNo0].TargetSpeed = 0;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1517">1517</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1517"><span class="pl-c">        Motor[TmpNo1].TargetSpeed = 0;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1518">1518</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1518"><span class="pl-c"></span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1519">1519</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1519"><span class="pl-c">        Motor[TmpNo0].Mutex  =  FALSE;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1520">1520</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1520"><span class="pl-c">        Motor[TmpNo1].Mutex  =  FALSE;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1521">1521</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1521"><span class="pl-c">      }</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1522">1522</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1522"><span class="pl-c">    }*/</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1523">1523</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1523">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1524">1524</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1524">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1525">1525</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1525"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1526">1526</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1526"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1527">1527</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1527"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1528">1528</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1528"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1529">1529</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1529"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1530">1530</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1530"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1531">1531</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1531"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1532">1532</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1532"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1533">1533</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1533"><span class="pl-c">/*! \brief    Device1TimerInterrupt1</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1534">1534</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1534"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1535">1535</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1535"><span class="pl-c"> *  Motor timer interrupt function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1536">1536</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1536"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1537">1537</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1537"><span class="pl-c"> *  Handles all motor regulation and timing related functionality</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1538">1538</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1538"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1539">1539</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1539"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1540">1540</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1540"><span class="pl-k">static</span> <span class="pl-k">enum</span> hrtimer_restart <span class="pl-en">Device1TimerInterrupt1</span>(<span class="pl-k">struct</span> hrtimer *pTimer)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1541">1541</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1541">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1542">1542</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1542">  UBYTE No;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1543">1543</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1543">  UBYTE Test;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1544">1544</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1544"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1545">1545</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1545">  <span class="pl-k">static</span> SLONG <span class="pl-k">volatile</span> TmpTacho;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1546">1546</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1546">  <span class="pl-k">static</span> SLONG <span class="pl-k">volatile</span> Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1547">1547</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1547"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1548">1548</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1548">  <span class="pl-c1">hrtimer_forward_now</span>(pTimer,Device1Time);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1549">1549</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1549">  <span class="pl-k">for</span> (No = <span class="pl-c1">0</span>; No &lt; NO_OF_OUTPUT_PORTS; No++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1550">1550</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1550">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1551">1551</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1551">    TmpTacho = Motor[No].<span class="pl-smi">IrqTacho</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1552">1552</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1552">    Tmp      = (TmpTacho - Motor[No].<span class="pl-smi">OldTachoCnt</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1553">1553</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1553"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1554">1554</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1554">    Motor[No].<span class="pl-smi">TachoCnt</span>      +=  Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1555">1555</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1555">    Motor[No].<span class="pl-smi">TachoSensor</span>   +=  Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1556">1556</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1556">    Motor[No].<span class="pl-smi">OldTachoCnt</span>    =  TmpTacho;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1557">1557</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1557"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1558">1558</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1558">    <span class="pl-c">/* Update shared memory */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1559">1559</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1559">    pMotor[No].<span class="pl-smi">TachoCounts</span>   =  Motor[No].<span class="pl-smi">TachoCnt</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1560">1560</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1560">    pMotor[No].<span class="pl-smi">Speed</span>         =  Motor[No].<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1561">1561</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1561">    pMotor[No].<span class="pl-smi">TachoSensor</span>   =  Motor[No].<span class="pl-smi">TachoSensor</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1562">1562</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1562"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1563">1563</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1563">    Motor[No].<span class="pl-smi">TimeCnt</span>       +=  Motor[No].<span class="pl-smi">TimeInc</span>;  <span class="pl-c">// Add or sub so that TimerCnt is 1 mS resolution</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1564">1564</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1564"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1565">1565</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1565">    <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == Motor[No].<span class="pl-smi">Mutex</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1566">1566</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1566">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1567">1567</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1567"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1568">1568</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1568">      Test = <span class="pl-c1">dCalculateSpeed</span>(No, &amp;(Motor[No].<span class="pl-smi">Speed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1569">1569</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1569">      <span class="pl-k">switch</span>(Motor[No].<span class="pl-smi">State</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1570">1570</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1570">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1571">1571</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1571">        <span class="pl-k">case</span> UNLIMITED_UNREG:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1572">1572</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1572">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1573">1573</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1573">          <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">TargetPower</span> != Motor[No].<span class="pl-smi">Power</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1574">1574</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1574">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1575">1575</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1575">            Motor[No].<span class="pl-smi">Power</span>  = Motor[No].<span class="pl-smi">TargetPower</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1576">1576</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1576">            <span class="pl-c1">SetPower</span>(No,Motor[No].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1577">1577</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1577">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1578">1578</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1578">          Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1579">1579</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1579">          Motor[No].<span class="pl-smi">TimeCnt</span>   =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1580">1580</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1580"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1581">1581</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1581">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1582">1582</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1582">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1583">1583</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1583"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1584">1584</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1584">        <span class="pl-k">case</span> UNLIMITED_REG:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1585">1585</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1585">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1586">1586</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1586">          <span class="pl-c1">dRegulateSpeed</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1587">1587</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1587">          Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1588">1588</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1588">          Motor[No].<span class="pl-smi">TimeCnt</span>   =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1589">1589</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1589">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1590">1590</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1590">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1591">1591</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1591"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1592">1592</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1592">        <span class="pl-k">case</span> LIMITED_REG_STEPUP:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1593">1593</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1593">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1594">1594</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1594">          UBYTE  Status;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1595">1595</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1595">          SLONG  StepCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1596">1596</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1596">          SLONG  StepCntTst;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1597">1597</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1597"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1598">1598</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1598">          <span class="pl-c">// Status used to check if ramp up has completed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1599">1599</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1599">          Status  = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1600">1600</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1600"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1601">1601</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1601">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1602">1602</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1602">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1603">1603</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1603">            Motor[No].<span class="pl-smi">TachoCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1604">1604</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1604">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1605">1605</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1605">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1606">1606</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1606">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1607">1607</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1607">            Motor[No].<span class="pl-smi">TimeCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1608">1608</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1608">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1609">1609</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1609"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1610">1610</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1610">          <span class="pl-c1">GetCompareCounts</span>(No, &amp;StepCnt, &amp;StepCntTst);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1611">1611</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1611"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1612">1612</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1612">          <span class="pl-k">if</span> ((<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(StepCntTst, Motor[No].<span class="pl-smi">TachoCntUp</span>, Motor[No].<span class="pl-smi">Dir</span>)) &amp;&amp; (<span class="pl-c1">FALSE</span> == Motor[No].<span class="pl-smi">LockRampDown</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1613">1613</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1613">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1614">1614</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1614">            Motor[No].<span class="pl-smi">TargetSpeed</span> = ((StepCnt * (Motor[No].<span class="pl-smi">RampUpFactor</span>))/ RAMP_FACTOR) + Motor[No].<span class="pl-smi">RampUpOffset</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1615">1615</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1615">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)Motor[No].<span class="pl-smi">TargetSpeed</span>,((SLONG)<span class="pl-c1">6</span> * Motor[No].<span class="pl-smi">Dir</span>), Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1616">1616</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1616">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1617">1617</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1617">              <span class="pl-c">//Ensure minimum speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1618">1618</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1618">              Motor[No].<span class="pl-smi">TargetSpeed</span> = <span class="pl-c1">6</span> * Motor[No].<span class="pl-smi">Dir</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1619">1619</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1619">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1620">1620</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1620">            <span class="pl-c1">dRegulateSpeed</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1621">1621</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1621">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1622">1622</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1622">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1623">1623</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1623">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1624">1624</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1624">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == Motor[No].<span class="pl-smi">BrakeAfter</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1625">1625</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1625">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1626">1626</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1626"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1627">1627</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1627">              Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1628">1628</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1628">              Status = <span class="pl-c1">RampDownToBrake</span>(No, StepCnt, Motor[No].<span class="pl-smi">TachoCntUp</span>, Motor[No].<span class="pl-smi">Dir</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1629">1629</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1629">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1630">1630</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1630">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1631">1631</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1631">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1632">1632</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1632">              Status = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1633">1633</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1633">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1634">1634</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1634">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1635">1635</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1635"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1636">1636</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1636">          <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == Status)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1637">1637</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1637">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1638">1638</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1638">            <span class="pl-c">// Ramp up completed check for next step</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1639">1639</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1639">            <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepSpeedCheckTachoCntConst</span>(No, Motor[No].<span class="pl-smi">TachoCntUp</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1640">1640</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1640">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1641">1641</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1641">              <span class="pl-c1">StepSpeedCheckTachoCntDown</span>(No, Motor[No].<span class="pl-smi">TachoCntUp</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1642">1642</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1642">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1643">1643</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1643">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1644">1644</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1644">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1645">1645</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1645">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1646">1646</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1646"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1647">1647</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1647">        <span class="pl-k">case</span> LIMITED_REG_STEPCONST:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1648">1648</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1648">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1649">1649</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1649">          SLONG   StepCnt, StepCntTst;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1650">1650</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1650"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1651">1651</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1651">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1652">1652</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1652">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1653">1653</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1653">            Motor[No].<span class="pl-smi">TachoCnt</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1654">1654</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1654">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1655">1655</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1655">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1656">1656</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1656">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1657">1657</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1657">            Motor[No].<span class="pl-smi">TimeCnt</span>  = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1658">1658</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1658">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1659">1659</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1659"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1660">1660</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1660">          <span class="pl-c1">GetCompareCounts</span>(No, &amp;StepCnt, &amp;StepCntTst);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1661">1661</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1661"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1662">1662</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1662">          <span class="pl-k">if</span> ((<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(StepCntTst, Motor[No].<span class="pl-smi">TachoCntConst</span>, Motor[No].<span class="pl-smi">Dir</span>)) &amp;&amp; (<span class="pl-c1">FALSE</span> == Motor[No].<span class="pl-smi">LockRampDown</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1663">1663</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1663">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1664">1664</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1664">            <span class="pl-c1">dRegulateSpeed</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1665">1665</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1665">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1666">1666</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1666">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1667">1667</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1667">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1668">1668</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1668">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == Motor[No].<span class="pl-smi">BrakeAfter</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1669">1669</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1669">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1670">1670</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1670">              Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1671">1671</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1671">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">RampDownToBrake</span>(No, StepCnt, Motor[No].<span class="pl-smi">TachoCntConst</span>, Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1672">1672</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1672">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1673">1673</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1673">                <span class="pl-c1">StepSpeedCheckTachoCntDown</span>(No, Motor[No].<span class="pl-smi">TachoCntConst</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1674">1674</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1674">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1675">1675</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1675">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1676">1676</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1676">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1677">1677</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1677">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1678">1678</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1678">              <span class="pl-c1">StepSpeedCheckTachoCntDown</span>(No, Motor[No].<span class="pl-smi">TachoCntConst</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1679">1679</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1679">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1680">1680</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1680">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1681">1681</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1681">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1682">1682</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1682">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1683">1683</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1683"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1684">1684</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1684">        <span class="pl-k">case</span> LIMITED_REG_STEPDOWN:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1685">1685</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1685">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1686">1686</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1686">          SLONG   StepCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1687">1687</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1687">          SBYTE   NewSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1688">1688</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1688"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1689">1689</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1689">          StepCnt = *StepPowerSteps[No];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1690">1690</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1690"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1691">1691</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1691">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1692">1692</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1692">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1693">1693</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1693">            Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1694">1694</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1694">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1695">1695</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1695">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1696">1696</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1696">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1697">1697</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1697">            Motor[No].<span class="pl-smi">TimeCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1698">1698</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1698">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1699">1699</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1699"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1700">1700</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1700">          <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(StepCnt, Motor[No].<span class="pl-smi">TachoCntDown</span>, Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1701">1701</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1701">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1702">1702</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1702">            NewSpeed = Motor[No].<span class="pl-smi">TargetPower</span> - ((StepCnt * (Motor[No].<span class="pl-smi">RampDownFactor</span>))/ RAMP_FACTOR);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1703">1703</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1703">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((<span class="pl-c1">4</span> * Motor[No].<span class="pl-smi">Dir</span>), NewSpeed, Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1704">1704</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1704">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1705">1705</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1705">              Motor[No].<span class="pl-smi">TargetSpeed</span> = NewSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1706">1706</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1706">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1707">1707</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1707">            <span class="pl-c1">dRegulateSpeed</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1708">1708</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1708">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1709">1709</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1709">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1710">1710</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1710">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1711">1711</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1711">            <span class="pl-c1">StepPowerStopMotor</span>(No, Motor[No].<span class="pl-smi">TachoCntDown</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1712">1712</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1712">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1713">1713</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1713">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1714">1714</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1714">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1715">1715</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1715"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1716">1716</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1716">        <span class="pl-k">case</span> LIMITED_UNREG_STEPUP:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1717">1717</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1717">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1718">1718</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1718"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1719">1719</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1719">          UBYTE  Status;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1720">1720</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1720">          SLONG  StepCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1721">1721</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1721">          SLONG  StepCntTst;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1722">1722</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1722"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1723">1723</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1723">          <span class="pl-c">// Status used to check if ramp up has completed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1724">1724</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1724">          Status  = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1725">1725</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1725"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1726">1726</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1726">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1727">1727</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1727">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1728">1728</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1728">            Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1729">1729</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1729">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1730">1730</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1730">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1731">1731</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1731">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1732">1732</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1732">            Motor[No].<span class="pl-smi">TimeCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1733">1733</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1733">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1734">1734</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1734"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1735">1735</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1735">          <span class="pl-c1">GetCompareCounts</span>(No, &amp;StepCnt, &amp;StepCntTst);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1736">1736</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1736"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1737">1737</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1737">          <span class="pl-k">if</span> ((<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(StepCntTst, Motor[No].<span class="pl-smi">TachoCntUp</span>, Motor[No].<span class="pl-smi">Dir</span>)) &amp;&amp; (<span class="pl-c1">FALSE</span> == Motor[No].<span class="pl-smi">LockRampDown</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1738">1738</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1738">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1739">1739</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1739">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> != Motor[No].<span class="pl-smi">Speed</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1740">1740</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1740">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1741">1741</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1741">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Motor[No].<span class="pl-smi">Power</span>, (StepCnt * (Motor[No].<span class="pl-smi">RampUpFactor</span>))<span class="pl-c">/*/RAMP_FACTOR*/</span>, Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1742">1742</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1742">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1743">1743</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1743">                <span class="pl-c">// if very slow ramp up then power could be calculated as 0 for a while</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1744">1744</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1744">                <span class="pl-c">// avoid starting and stopping</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1745">1745</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1745">                Motor[No].<span class="pl-smi">Power</span> = (StepCnt * (Motor[No].<span class="pl-smi">RampUpFactor</span>))/RAMP_FACTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1746">1746</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1746"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1747">1747</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1747">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1748">1748</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1748"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1749">1749</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1749">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Motor[No].<span class="pl-smi">Power</span>, <span class="pl-c1">0</span>, Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1750">1750</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1750">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1751">1751</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1751">                <span class="pl-c">// Avoid motor turning the wrong way</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1752">1752</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1752">                Motor[No].<span class="pl-smi">Power</span> = Motor[No].<span class="pl-smi">Power</span> * -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1753">1753</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1753">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1754">1754</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1754">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1755">1755</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1755">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1756">1756</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1756">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1757">1757</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1757">              Motor[No].<span class="pl-smi">Power</span> += (<span class="pl-c1">20</span> * Motor[No].<span class="pl-smi">Dir</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1758">1758</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1758">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1759">1759</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1759">            <span class="pl-c1">SetPower</span>(No,Motor[No].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1760">1760</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1760">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1761">1761</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1761">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1762">1762</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1762">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1763">1763</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1763">            <span class="pl-c">// Done Stepping up</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1764">1764</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1764">            Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1765">1765</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1765">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == Motor[No].<span class="pl-smi">BrakeAfter</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1766">1766</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1766">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1767">1767</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1767">              Status = <span class="pl-c1">RampDownToBrake</span>(No, StepCnt, Motor[No].<span class="pl-smi">TachoCntUp</span>, Motor[No].<span class="pl-smi">Dir</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1768">1768</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1768">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1769">1769</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1769">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1770">1770</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1770">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1771">1771</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1771">              Status = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1772">1772</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1772">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1773">1773</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1773">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1774">1774</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1774"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1775">1775</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1775">          <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == Status)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1776">1776</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1776">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1777">1777</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1777">            <span class="pl-c">// Ramp up completed check for next step</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1778">1778</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1778">            <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepPowerCheckTachoCntConst</span>(No, Motor[No].<span class="pl-smi">TachoCntUp</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1779">1779</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1779">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1780">1780</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1780">              <span class="pl-c1">StepPowerCheckTachoCntDown</span>(No, Motor[No].<span class="pl-smi">TachoCntUp</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1781">1781</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1781">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1782">1782</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1782">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1783">1783</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1783">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1784">1784</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1784">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1785">1785</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1785"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1786">1786</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1786">        <span class="pl-k">case</span> LIMITED_UNREG_STEPCONST:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1787">1787</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1787">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1788">1788</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1788">          SLONG   StepCnt, StepCntTst;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1789">1789</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1789"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1790">1790</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1790">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1791">1791</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1791">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1792">1792</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1792">            Motor[No].<span class="pl-smi">TachoCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1793">1793</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1793">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1794">1794</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1794">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1795">1795</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1795">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1796">1796</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1796">            Motor[No].<span class="pl-smi">TimeCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1797">1797</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1797">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1798">1798</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1798"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1799">1799</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1799">          <span class="pl-c1">GetCompareCounts</span>(No, &amp;StepCnt, &amp;StepCntTst);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1800">1800</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1800"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1801">1801</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1801">          <span class="pl-k">if</span> ((<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(StepCntTst, Motor[No].<span class="pl-smi">TachoCntConst</span>, Motor[No].<span class="pl-smi">Dir</span>)) &amp;&amp; (<span class="pl-c1">FALSE</span> == Motor[No].<span class="pl-smi">LockRampDown</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1802">1802</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1802">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1803">1803</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1803">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1804">1804</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1804">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1805">1805</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1805">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1806">1806</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1806">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == Motor[No].<span class="pl-smi">BrakeAfter</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1807">1807</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1807">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1808">1808</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1808"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1809">1809</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1809">              Motor[No].<span class="pl-smi">LockRampDown</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1810">1810</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1810">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">RampDownToBrake</span>(No, StepCnt, Motor[No].<span class="pl-smi">TachoCntConst</span>, Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1811">1811</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1811">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1812">1812</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1812">                <span class="pl-c1">StepPowerCheckTachoCntDown</span>(No, Motor[No].<span class="pl-smi">TachoCntConst</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1813">1813</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1813">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1814">1814</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1814">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1815">1815</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1815">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1816">1816</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1816">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1817">1817</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1817">              <span class="pl-c1">StepPowerCheckTachoCntDown</span>(No, Motor[No].<span class="pl-smi">TachoCntConst</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1818">1818</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1818">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1819">1819</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1819">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1820">1820</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1820">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1821">1821</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1821">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1822">1822</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1822"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1823">1823</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1823">        <span class="pl-k">case</span> LIMITED_UNREG_STEPDOWN:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1824">1824</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1824">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1825">1825</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1825">          SLONG   StepCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1826">1826</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1826"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1827">1827</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1827">          StepCnt = *StepPowerSteps[No];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1828">1828</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1828"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1829">1829</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1829">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1830">1830</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1830">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1831">1831</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1831">            Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1832">1832</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1832">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1833">1833</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1833">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1834">1834</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1834">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1835">1835</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1835">            Motor[No].<span class="pl-smi">TimeCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1836">1836</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1836">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1837">1837</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1837"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1838">1838</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1838">          <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(StepCnt, Motor[No].<span class="pl-smi">TachoCntDown</span>, Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1839">1839</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1839">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1840">1840</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1840">            <span class="pl-k">if</span> ((<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((<span class="pl-c1">2</span> * Motor[No].<span class="pl-smi">Dir</span>), Motor[No].<span class="pl-smi">Speed</span>, Motor[No].<span class="pl-smi">Dir</span>)) &amp;&amp; (<span class="pl-c1">FALSE</span> == MinRegEnabled[No]))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1841">1841</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1841">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1842">1842</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1842">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((<span class="pl-c1">4</span> * Motor[No].<span class="pl-smi">Dir</span>), (Motor[No].<span class="pl-smi">TargetPower</span> - ((StepCnt * (Motor[No].<span class="pl-smi">RampDownFactor</span>))/ RAMP_FACTOR)), Motor[No].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1843">1843</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1843">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1844">1844</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1844">                Motor[No].<span class="pl-smi">Power</span> = Motor[No].<span class="pl-smi">TargetPower</span> - ((StepCnt * (Motor[No].<span class="pl-smi">RampDownFactor</span>))/ RAMP_FACTOR);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1845">1845</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1845">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1846">1846</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1846">              <span class="pl-c1">SetPower</span>(No,Motor[No].<span class="pl-smi">Power</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1847">1847</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1847">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1848">1848</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1848">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1849">1849</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1849">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1850">1850</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1850"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1851">1851</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1851">              MinRegEnabled[No]     = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1852">1852</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1852">              Motor[No].<span class="pl-smi">TargetSpeed</span> = (<span class="pl-c1">2</span> * Motor[No].<span class="pl-smi">Dir</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1853">1853</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1853">              <span class="pl-c1">dRegulateSpeed</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1854">1854</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1854">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1855">1855</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1855">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1856">1856</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1856">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1857">1857</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1857">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1858">1858</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1858">            <span class="pl-c1">StepPowerStopMotor</span>(No, Motor[No].<span class="pl-smi">TachoCntDown</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1859">1859</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1859">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1860">1860</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1860">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1861">1861</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1861">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1862">1862</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1862"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1863">1863</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1863">        <span class="pl-k">case</span> LIMITED_STEP_SYNC:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1864">1864</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1864">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1865">1865</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1865">          <span class="pl-c">// Here motor are syncronized and supposed to drive straight</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1866">1866</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1866"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1867">1867</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1867">          UBYTE   Cnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1868">1868</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1868">          UBYTE   Status;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1869">1869</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1869">          SLONG   StepCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1870">1870</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1870"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1871">1871</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1871">          StepCnt = *StepPowerSteps[No];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1872">1872</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1872"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1873">1873</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1873">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1874">1874</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1874">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1875">1875</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1875">            Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1876">1876</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1876">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1877">1877</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1877">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1878">1878</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1878">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1879">1879</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1879">            Motor[No].<span class="pl-smi">TimeCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1880">1880</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1880">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1881">1881</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1881"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1882">1882</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1882">          Status  = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1883">1883</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1883"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1884">1884</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1884">          <span class="pl-k">if</span> ((Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Power</span> &gt; (MAX_PWM_CNT - <span class="pl-c1">100</span>)) || (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Power</span> &lt; (-MAX_PWM_CNT + <span class="pl-c1">100</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1885">1885</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1885">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1886">1886</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1886">            <span class="pl-c">// Regulation is stretched to the limit....... Checked in both directions</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1887">1887</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1887">            Status = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1888">1888</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1888">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>), (SLONG)(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span>), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1889">1889</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1889">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1890">1890</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1890">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>), (SLONG)(MaxSyncSpeed), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1891">1891</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1891">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1892">1892</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1892">                <span class="pl-c">// Check for running the same direction as target speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1893">1893</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1893">                <span class="pl-k">if</span> (((Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span> &lt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span> &lt;= <span class="pl-c1">0</span>)) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1894">1894</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1894">                    ((Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span> &gt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span> &gt;= <span class="pl-c1">0</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1895">1895</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1895">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1896">1896</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1896">                  MaxSyncSpeed = Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1897">1897</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1897">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1898">1898</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1898">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1899">1899</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1899">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1900">1900</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1900">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1901">1901</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1901">          <span class="pl-k">if</span> ((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Power</span> &gt; (MAX_PWM_CNT - <span class="pl-c1">100</span>)) || (Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Power</span> &lt; (-MAX_PWM_CNT + <span class="pl-c1">100</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1902">1902</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1902">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1903">1903</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1903">            <span class="pl-c">// Regulation is stretched to the limit....... Checked in both directions</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1904">1904</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1904">            Status = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1905">1905</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1905">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span>), (SLONG)(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span>), (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span> * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1906">1906</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1906">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1907">1907</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1907">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span>), (SLONG)(MaxSyncSpeed), (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span> * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1908">1908</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1908">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1909">1909</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1909">                <span class="pl-c">// Check for running the same direction as target speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1910">1910</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1910">                <span class="pl-k">if</span> (((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span> &lt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span> &lt;= <span class="pl-c1">0</span>)) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1911">1911</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1911">                    ((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span> &gt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span> &gt;= <span class="pl-c1">0</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1912">1912</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1912">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1913">1913</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1913">                  MaxSyncSpeed = Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1914">1914</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1914">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1915">1915</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1915">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1916">1916</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1916">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1917">1917</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1917">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1918">1918</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1918"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1919">1919</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1919">          <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == Status)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1920">1920</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1920">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1921">1921</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1921">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(MaxSyncSpeed), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetPower</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1922">1922</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1922">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1923">1923</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1923">              <span class="pl-c">// TargetSpeed has been reduced but now there is room to increase</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1924">1924</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1924">              <span class="pl-c1">IncSpeed</span>(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>, &amp;MaxSyncSpeed);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1925">1925</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1925">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1926">1926</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1926">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1927">1927</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1927"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1928">1928</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1928">          <span class="pl-k">for</span> (Cnt = <span class="pl-c1">0</span>; Cnt &lt; MAX_SYNC_MOTORS; Cnt++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1929">1929</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1929">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1930">1930</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1930">            <span class="pl-c">//Update all motors to the max sync speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1931">1931</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1931">            Motor[SyncMNos[Cnt]].<span class="pl-smi">TargetSpeed</span> = MaxSyncSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1932">1932</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1932">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1933">1933</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1933"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1934">1934</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1934">          <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TachoCnt</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCnt</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1935">1935</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1935">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1936">1936</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1936">            <span class="pl-c1">DecSpeed</span>(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>, &amp;(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1937">1937</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1937">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1938">1938</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1938"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1939">1939</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1939">          <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCnt</span>, Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TachoCnt</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1940">1940</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1940">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1941">1941</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1941">            <span class="pl-c1">DecSpeed</span>(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>, &amp;(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1942">1942</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1942">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1943">1943</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1943"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1944">1944</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1944">          <span class="pl-c1">dRegulateSpeed</span>(SyncMNos[<span class="pl-c1">0</span>]);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1945">1945</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1945">          <span class="pl-c1">dRegulateSpeed</span>(SyncMNos[<span class="pl-c1">1</span>]);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1946">1946</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1946"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1947">1947</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1947">          <span class="pl-c1">CheckforEndOfSync</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1948">1948</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1948"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1949">1949</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1949">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1950">1950</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1950">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1951">1951</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1951">        <span class="pl-k">case</span> SYNCED_SLAVE:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1952">1952</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1952">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1953">1953</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1953">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1954">1954</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1954">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1955">1955</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1955">            Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1956">1956</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1956">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1957">1957</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1957">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1958">1958</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1958">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1959">1959</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1959">            Motor[No].<span class="pl-smi">TimeCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1960">1960</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1960">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1961">1961</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1961">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1962">1962</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1962">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1963">1963</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1963">        <span class="pl-k">case</span> LIMITED_DIFF_TURN_SYNC:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1964">1964</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1964">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1965">1965</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1965">          UBYTE   Status;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1966">1966</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1966">          SLONG   StepCnt;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1967">1967</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1967"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1968">1968</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1968">          StepCnt = *StepPowerSteps[No];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1969">1969</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1969"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1970">1970</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1970">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1971">1971</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1971">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1972">1972</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1972">            Motor[No].<span class="pl-smi">TachoCnt</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1973">1973</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1973">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1974">1974</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1974">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1975">1975</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1975">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1976">1976</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1976">            Motor[No].<span class="pl-smi">TimeCnt</span> =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1977">1977</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1977">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1978">1978</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1978"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1979">1979</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1979">          Status  = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1980">1980</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1980"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1981">1981</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1981">          <span class="pl-k">if</span> ((Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Power</span> &gt; (MAX_PWM_CNT - <span class="pl-c1">100</span>)) || (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Power</span> &lt; (-MAX_PWM_CNT + <span class="pl-c1">100</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1982">1982</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1982">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1983">1983</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1983">            <span class="pl-c">// Regulation is stretched to the limit....... in both directions</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1984">1984</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1984">            Status = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1985">1985</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1985">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>), (SLONG)(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span>), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1986">1986</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1986">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1987">1987</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1987">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>), (SLONG)(MaxSyncSpeed), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1988">1988</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1988">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1989">1989</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1989">                <span class="pl-c">// Check for running the same direction as target speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1990">1990</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1990">                <span class="pl-k">if</span> (((Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span> &lt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span> &lt;= <span class="pl-c1">0</span>)) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1991">1991</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1991">                    ((Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span> &gt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span> &gt;= <span class="pl-c1">0</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1992">1992</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1992">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1993">1993</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1993">                  MaxSyncSpeed = Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1994">1994</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1994">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1995">1995</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1995">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1996">1996</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1996">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1997">1997</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1997">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1998">1998</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1998"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L1999">1999</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC1999">          <span class="pl-k">if</span> ((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Power</span> &gt; (MAX_PWM_CNT - <span class="pl-c1">100</span>)) || (Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Power</span> &lt; (-MAX_PWM_CNT + <span class="pl-c1">100</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2000">2000</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2000">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2001">2001</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2001">            <span class="pl-c">// Regulation is stretched to the limit....... in both directions</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2002">2002</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2002">            Status = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2003">2003</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2003">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span>), (SLONG)(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span>), (Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span> * Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2004">2004</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2004">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2005">2005</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2005">              <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span> * <span class="pl-c1">100</span>)/(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span> * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>)), (SLONG)(MaxSyncSpeed), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2006">2006</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2006">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2007">2007</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2007">                <span class="pl-k">if</span> ((<span class="pl-c1">0</span> == Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>) || (<span class="pl-c1">0</span> == Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2008">2008</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2008">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2009">2009</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2009">                  MaxSyncSpeed = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2010">2010</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2010">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2011">2011</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2011">                <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2012">2012</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2012">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2013">2013</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2013">                  <span class="pl-c">// Check for running the same direction as target speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2014">2014</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2014">                  <span class="pl-k">if</span> (((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span> &lt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span> &lt;= <span class="pl-c1">0</span>)) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2015">2015</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2015">                      ((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span> &gt;= <span class="pl-c1">0</span>) &amp;&amp; (Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span> &gt;= <span class="pl-c1">0</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2016">2016</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2016">                  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2017">2017</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2017">                    MaxSyncSpeed = ((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Speed</span> * <span class="pl-c1">100</span>)/Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>) * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2018">2018</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2018">                  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2019">2019</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2019">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2020">2020</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2020">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2021">2021</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2021">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2022">2022</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2022">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2023">2023</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2023"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2024">2024</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2024">          <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == Status)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2025">2025</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2025">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2026">2026</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2026">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((SLONG)(MaxSyncSpeed), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetPower</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2027">2027</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2027">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2028">2028</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2028">              <span class="pl-c">// TargetSpeed has been reduced but now there is room to increase</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2029">2029</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2029">              <span class="pl-c1">IncSpeed</span>(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>, &amp;MaxSyncSpeed);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2030">2030</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2030">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2031">2031</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2031">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2032">2032</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2032"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2033">2033</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2033">          <span class="pl-c">// Set the new</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2034">2034</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2034">          Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span> = MaxSyncSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2035">2035</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2035">          <span class="pl-k">if</span> ((<span class="pl-c1">0</span> == Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>) || (<span class="pl-c1">0</span> == MaxSyncSpeed))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2036">2036</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2036">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2037">2037</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2037">            Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2038">2038</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2038">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2039">2039</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2039">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2040">2040</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2040">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2041">2041</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2041">            Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span> = ((MaxSyncSpeed * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>)/<span class="pl-c1">100</span>) * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2042">2042</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2042">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2043">2043</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2043"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2044">2044</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2044">          <span class="pl-k">if</span>(<span class="pl-c1">0</span> != Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2045">2045</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2045">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2046">2046</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2046">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>((((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TachoCnt</span> * <span class="pl-c1">100</span>)/Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>) * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCnt</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2047">2047</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2047">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2048">2048</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2048">              <span class="pl-c1">DecSpeed</span>(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>, &amp;(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2049">2049</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2049">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2050">2050</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2050">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2051">2051</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2051"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2052">2052</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2052">          <span class="pl-k">if</span>(<span class="pl-c1">0</span> != Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2053">2053</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2053">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2054">2054</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2054">            <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCnt</span>, ((Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TachoCnt</span> * <span class="pl-c1">100</span>)/(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>) * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2055">2055</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2055">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2056">2056</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2056">              <span class="pl-c1">DecSpeed</span>(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span> * Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>, &amp;(Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2057">2057</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2057">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2058">2058</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2058">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2059">2059</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2059"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2060">2060</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2060">          <span class="pl-c1">dRegulateSpeed</span>(SyncMNos[<span class="pl-c1">0</span>]);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2061">2061</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2061">          <span class="pl-c1">dRegulateSpeed</span>(SyncMNos[<span class="pl-c1">1</span>]);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2062">2062</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2062"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2063">2063</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2063">          <span class="pl-c1">CheckforEndOfSync</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2064">2064</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2064"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2065">2065</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2065">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2066">2066</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2066">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2067">2067</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2067"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2068">2068</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2068">        <span class="pl-k">case</span> RAMP_DOWN_SYNC:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2069">2069</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2069">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2070">2070</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2070"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2071">2071</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2071">          SLONG   Count0, Count1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2072">2072</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2072"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2073">2073</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2073">          <span class="pl-k">if</span> (StepPowerSteps[No] != &amp;(Motor[No].<span class="pl-smi">TachoCnt</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2074">2074</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2074">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2075">2075</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2075">            Motor[No].<span class="pl-smi">TachoCnt</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2076">2076</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2076">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2077">2077</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2077">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2078">2078</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2078">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2079">2079</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2079">            Motor[No].<span class="pl-smi">TimeCnt</span>  = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2080">2080</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2080">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2081">2081</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2081"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2082">2082</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2082">          <span class="pl-c">// Duration is either dependent on timer ticks or tacho counts</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2083">2083</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2083">          <span class="pl-c1">GetSyncDurationCnt</span>(&amp;Count0, &amp;Count1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2084">2084</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2084"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2085">2085</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2085">          <span class="pl-k">if</span> (<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Count0, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCntConst</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2086">2086</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2086">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2087">2087</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2087"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2088">2088</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2088">            <span class="pl-c1">RampDownToBrake</span>(SyncMNos[<span class="pl-c1">0</span>], Count0, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCntConst</span>, Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2089">2089</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2089"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2090">2090</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2090">            <span class="pl-k">if</span> (StepPowerSteps[SyncMNos[<span class="pl-c1">0</span>]] == TimerSteps[SyncMNos[<span class="pl-c1">0</span>]])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2091">2091</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2091">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2092">2092</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2092">              <span class="pl-c">// Needs to adjust second synchronised in time mode - both motor needs to run for the same</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2093">2093</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2093">              <span class="pl-c">// amount of time but not at the same speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2094">2094</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2094">              <span class="pl-c1">RampDownToBrake</span>(SyncMNos[<span class="pl-c1">1</span>], ((Count1 * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>)/<span class="pl-c1">100</span>),(( Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TachoCntConst</span> * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TurnRatio</span>)/<span class="pl-c1">100</span>), (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span> * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2095">2095</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2095">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2096">2096</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2096">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2097">2097</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2097">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2098">2098</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2098">              <span class="pl-c1">RampDownToBrake</span>(SyncMNos[<span class="pl-c1">1</span>], Count1, Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TachoCntConst</span>, (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span> * Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Dir</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2099">2099</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2099">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2100">2100</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2100">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2101">2101</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2101">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2102">2102</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2102">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2103">2103</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2103">            MaxSyncSpeed                    = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2104">2104</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2104">            Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TargetSpeed</span>  = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2105">2105</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2105">            Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TargetSpeed</span>  = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2106">2106</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2106">            <span class="pl-c1">StepPowerStopMotor</span>(SyncMNos[<span class="pl-c1">0</span>], Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCntConst</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2107">2107</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2107">            <span class="pl-c1">StepPowerStopMotor</span>(SyncMNos[<span class="pl-c1">1</span>], Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">TachoCntConst</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2108">2108</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2108">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2109">2109</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2109">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2110">2110</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2110">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2111">2111</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2111"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2112">2112</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2112">        <span class="pl-k">case</span> STOP_MOTOR:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2113">2113</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2113">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2114">2114</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2114">          <span class="pl-k">if</span> (PrgStopTimer[No])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2115">2115</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2115">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2116">2116</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2116">            PrgStopTimer[No]--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2117">2117</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2117">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2118">2118</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2118">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2119">2119</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2119">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2120">2120</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2120">            Motor[No].<span class="pl-smi">State</span>        = IDLE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2121">2121</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2121">            Motor[No].<span class="pl-smi">TargetState</span>  = UNLIMITED_UNREG;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2122">2122</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2122">            <span class="pl-c1">SetCoast</span>(No);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2123">2123</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2123">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2124">2124</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2124">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2125">2125</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2125">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2126">2126</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2126"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2127">2127</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2127">        <span class="pl-k">case</span> BRAKED:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2128">2128</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2128">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2129">2129</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2129">          <span class="pl-c1">BrakeMotor</span>(No, Motor[No].<span class="pl-smi">TachoCnt</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2130">2130</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2130">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2131">2131</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2131">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2132">2132</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2132"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2133">2133</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2133">        <span class="pl-k">case</span> IDLE:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2134">2134</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2134">        { <span class="pl-c">/* Intentionally left empty */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2135">2135</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2135">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2136">2136</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2136">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2137">2137</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2137">        <span class="pl-k">default</span>:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2138">2138</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2138">        { <span class="pl-c">/* Intentionally left empty */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2139">2139</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2139">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2140">2140</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2140">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2141">2141</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2141">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2142">2142</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2142">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2143">2143</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2143">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2144">2144</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2144">  <span class="pl-k">return</span> (HRTIMER_RESTART);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2145">2145</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2145">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2146">2146</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2146"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2147">2147</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2147"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2148">2148</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2148"><span class="pl-k">void</span>      <span class="pl-en">GetSyncDurationCnt</span>(SLONG *pCount0, SLONG *pCount1)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2149">2149</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2149">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2150">2150</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2150">  <span class="pl-k">if</span> (StepPowerSteps[SyncMNos[<span class="pl-c1">0</span>]] == TimerSteps[SyncMNos[<span class="pl-c1">0</span>]])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2151">2151</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2151">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2152">2152</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2152">    *pCount0 = *TimerSteps[SyncMNos[<span class="pl-c1">0</span>]];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2153">2153</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2153">    *pCount1 = *TimerSteps[SyncMNos[<span class="pl-c1">1</span>]];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2154">2154</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2154">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2155">2155</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2155">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2156">2156</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2156">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2157">2157</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2157">    *pCount0 = *TachoSteps[SyncMNos[<span class="pl-c1">0</span>]];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2158">2158</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2158">    *pCount1 = *TachoSteps[SyncMNos[<span class="pl-c1">1</span>]];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2159">2159</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2159">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2160">2160</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2160">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2161">2161</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2161"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2162">2162</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2162"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2163">2163</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2163"><span class="pl-k">void</span>      <span class="pl-en">CheckforEndOfSync</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2164">2164</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2164">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2165">2165</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2165">  SLONG   Count0, Count1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2166">2166</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2166">  SBYTE   Speed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2167">2167</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2167"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2168">2168</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2168">  <span class="pl-c">// Duration is either dependent on timer ticks or tacho counts</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2169">2169</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2169">  <span class="pl-c1">GetSyncDurationCnt</span>(&amp;Count0, &amp;Count1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2170">2170</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2170"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2171">2171</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2171">  <span class="pl-k">if</span> (StepPowerSteps[SyncMNos[<span class="pl-c1">0</span>]] == TimerSteps[SyncMNos[<span class="pl-c1">0</span>]])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2172">2172</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2172">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2173">2173</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2173">    Speed = (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2174">2174</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2174">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2175">2175</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2175">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2176">2176</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2176">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2177">2177</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2177">    Speed = (Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Speed</span>/<span class="pl-c1">2</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2178">2178</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2178">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2179">2179</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2179"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2180">2180</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2180">  <span class="pl-k">if</span> ((<span class="pl-c1">TRUE</span> == <span class="pl-c1">CheckLessThanSpecial</span>(Count0 + (SLONG)(Speed), Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCntConst</span>,Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Dir</span>)) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2181">2181</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2181">      (<span class="pl-c1">0</span> == Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">TachoCntConst</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2182">2182</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2182">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2183">2183</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2183">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2184">2184</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2184">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2185">2185</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2185">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2186">2186</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2186">    Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">State</span>  =  RAMP_DOWN_SYNC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2187">2187</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2187">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2188">2188</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2188">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2189">2189</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2189"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2190">2190</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2190"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2191">2191</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2191"><span class="pl-c">/*! \page PWMModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2192">2192</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2192"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2193">2193</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2193"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2194">2194</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2194"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2195">2195</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2195"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2196">2196</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2196"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2197">2197</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2197"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2198">2198</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2198"><span class="pl-c">/*! \brief    Device1Write</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2199">2199</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2199"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2200">2200</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2200"><span class="pl-c"> *  VALID COMMANDS:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2201">2201</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2201"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2202">2202</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2202"><span class="pl-c"> *  opOUTPUT_SET_TYPE:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2203">2203</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2203"><span class="pl-c"> *  opOUTPUT_GET_TYPE</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2204">2204</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2204"><span class="pl-c"> *  opOUTPUT_SET_TYPE</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2205">2205</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2205"><span class="pl-c"> *  opOUTPUT_RESET:       Resets the output tacho counters</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2206">2206</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2206"><span class="pl-c"> *  opOUTPUT_STOP:        Stops the motor - either Braked or coasted</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2207">2207</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2207"><span class="pl-c"> *  opOUTPUT_POWER:       Sets the power - Duty -                        Do not start the motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2208">2208</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2208"><span class="pl-c"> *  opOUTPUT_SPEED:       Sets the Speed - setpoint for regulation -     Do not start the motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2209">2209</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2209"><span class="pl-c"> *  opOUTPUT_START:       Starts the motor if not started</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2210">2210</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2210"><span class="pl-c"> *  opOUTPUT_POLARITY:    Sets the polarity of the motor -               Do not start the motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2211">2211</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2211"><span class="pl-c"> *  opOUTPUT_READ:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2212">2212</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2212"><span class="pl-c"> *  opOUTPUT_TEST:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2213">2213</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2213"><span class="pl-c"> *  opOUTPUT_READY:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2214">2214</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2214"><span class="pl-c"> *  opOUTPUT_POSITION:    Runs the motor to the absolute tacho positon - Starts the motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2215">2215</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2215"><span class="pl-c"> *  opOUTPUT_STEP_POWER:  Runs the motor un-regulated with ramp up const and down according to the tacho</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2216">2216</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2216"><span class="pl-c"> *  opOUTPUT_TIME_POWER:  Runs the motor un-regulated with ramp up const and down according to time</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2217">2217</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2217"><span class="pl-c"> *  opOUTPUT_STEP_SPEED:  Runs the motor regulated with ramp up const and down according to the tacho</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2218">2218</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2218"><span class="pl-c"> *  opOUTPUT_TIME_SPEED:  Runs the motor regulated with ramp up const and down according to the time</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2219">2219</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2219"><span class="pl-c"> *  opOUTPUT_STEP_SYNC:   Runs two motors regulated and syncronized, duration as specified by tacho cnts</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2220">2220</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2220"><span class="pl-c"> *  opOUTPUT_TIME_SYNC:   Runs two motors regulated and syncronized, duration as specified by time</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2221">2221</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2221"><span class="pl-c"> *  opOUTPUT_CLR_COUNT:   Resets the tacho count related to when motor is used as a sensor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2222">2222</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2222"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2223">2223</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2223"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2224">2224</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2224"><span class="pl-c"> *  Default state:        TBD</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2225">2225</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2225"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2226">2226</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2226"><span class="pl-k">static</span> <span class="pl-c1">ssize_t</span> <span class="pl-en">Device1Write</span>(<span class="pl-k">struct</span> file *File,<span class="pl-k">const</span> <span class="pl-k">char</span> *Buffer,<span class="pl-c1">size_t</span> Count,<span class="pl-c1">loff_t</span> *Data)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2227">2227</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2227">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2228">2228</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2228"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2229">2229</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2229">  SBYTE   Buf[<span class="pl-c1">20</span>];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2230">2230</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2230">  <span class="pl-k">int</span>     Lng = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2231">2231</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2231"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2232">2232</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2232">  <span class="pl-c1">copy_from_user</span>(Buf,Buffer,Count);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2233">2233</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2233"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2234">2234</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2234">  <span class="pl-k">switch</span>((UBYTE)(Buf[<span class="pl-c1">0</span>]))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2235">2235</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2235">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2236">2236</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2236"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2237">2237</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2237">    <span class="pl-k">case</span> opPROGRAM_STOP:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2238">2238</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2238">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2239">2239</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2239">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2240">2240</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2240"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2241">2241</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2241">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>; Tmp &lt; OUTPUTS; Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2242">2242</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2242">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2243">2243</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2243"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2244">2244</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2244">        Motor[Tmp].<span class="pl-smi">Mutex</span>   =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2245">2245</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2245">        ReadyStatus       &amp;=  ~(0x01 &lt;&lt; Tmp);   <span class="pl-c">// Clear Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2246">2246</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2246">        TestStatus        &amp;=  ~(0x01 &lt;&lt; Tmp);   <span class="pl-c">// Clear Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2247">2247</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2247"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2248">2248</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2248">        Motor[Tmp].<span class="pl-smi">Power</span>       = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2249">2249</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2249">        Motor[Tmp].<span class="pl-smi">Speed</span>       = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2250">2250</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2250">        MaxSyncSpeed           = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2251">2251</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2251">        Motor[Tmp].<span class="pl-smi">TargetSpeed</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2252">2252</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2252"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2253">2253</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2253">        <span class="pl-k">if</span> (((IDLE == Motor[Tmp].<span class="pl-smi">State</span>) &amp;&amp; ((<span class="pl-c1">OutputRead</span>(Tmp,DIR0)) &amp;&amp; (<span class="pl-c1">OutputRead</span>(Tmp,DIR1)))) || (BRAKED == Motor[Tmp].<span class="pl-smi">State</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2254">2254</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2254">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2255">2255</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2255">          PrgStopTimer[Tmp]       = <span class="pl-c1">100</span>/SOFT_TIMER_MS;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2256">2256</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2256">          Motor[Tmp].<span class="pl-smi">State</span>        = STOP_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2257">2257</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2257">          Motor[Tmp].<span class="pl-smi">TargetState</span>  = UNLIMITED_UNREG;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2258">2258</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2258">          <span class="pl-c1">SetBrake</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2259">2259</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2259">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2260">2260</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2260">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2261">2261</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2261">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2262">2262</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2262">          Motor[Tmp].<span class="pl-smi">State</span>        = IDLE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2263">2263</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2263">          Motor[Tmp].<span class="pl-smi">TargetState</span>  = UNLIMITED_UNREG;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2264">2264</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2264">          <span class="pl-c1">SetCoast</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2265">2265</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2265">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2266">2266</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2266">        Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2267">2267</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2267">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2268">2268</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2268">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2269">2269</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2269"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2270">2270</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2270">    <span class="pl-k">case</span> opPROGRAM_START:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2271">2271</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2271">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2272">2272</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2272">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2273">2273</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2273"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2274">2274</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2274">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>; Tmp &lt; OUTPUTS; Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2275">2275</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2275">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2276">2276</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2276">        Motor[Tmp].<span class="pl-smi">Pol</span> = <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2277">2277</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2277">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2278">2278</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2278">      SyncMNos[<span class="pl-c1">0</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2279">2279</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2279">      SyncMNos[<span class="pl-c1">1</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2280">2280</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2280">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2281">2281</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2281">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2282">2282</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2282"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2283">2283</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2283">    <span class="pl-k">case</span> opOUTPUT_SET_TYPE:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2284">2284</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2284">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2285">2285</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2285">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2286">2286</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2286"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2287">2287</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2287">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>; Tmp &lt; OUTPUTS; Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2288">2288</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2288">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2289">2289</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2289">        <span class="pl-k">if</span> (Buf[Tmp + <span class="pl-c1">1</span>] != Motor[Tmp].<span class="pl-smi">Type</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2290">2290</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2290">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2291">2291</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2291">          Motor[Tmp].<span class="pl-smi">Mutex</span>  =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2292">2292</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2292">          <span class="pl-k">if</span> ((TYPE_TACHO == Buf[Tmp + <span class="pl-c1">1</span>]) || (TYPE_MINITACHO == Buf[Tmp + <span class="pl-c1">1</span>]))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2293">2293</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2293">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2294">2294</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2294">            <span class="pl-c">// There is a motor attached the port</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2295">2295</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2295">            <span class="pl-c1">CLEARTachoArray</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2296">2296</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2296">            <span class="pl-c1">SETMotorType</span>(Tmp, Buf[Tmp + <span class="pl-c1">1</span>]);             <span class="pl-c">//  Motor types can be: TYPE_TACHO, TYPE_NONE, TYPE_MINITACHO</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2297">2297</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2297">            <span class="pl-c1">SETAvgTachoCount</span>(Tmp, <span class="pl-c1">0</span>);                    <span class="pl-c">//  Switching motor =&gt; speed = 0</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2298">2298</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2298">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2299">2299</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2299">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2300">2300</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2300">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2301">2301</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2301">            <span class="pl-c">// No motor is connected</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2302">2302</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2302">            Motor[Tmp].<span class="pl-smi">State</span>  =  IDLE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2303">2303</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2303">            <span class="pl-c1">SetCoast</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2304">2304</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2304">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2305">2305</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2305">          Motor[Tmp].<span class="pl-smi">Type</span>          =  Buf[Tmp + <span class="pl-c1">1</span>];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2306">2306</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2306"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2307">2307</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2307">          <span class="pl-c">// All counts are reset when motor type changes</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2308">2308</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2308">          Motor[Tmp].<span class="pl-smi">TachoCnt</span>      =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2309">2309</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2309">          pMotor[Tmp].<span class="pl-smi">TachoCounts</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2310">2310</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2310">          Motor[Tmp].<span class="pl-smi">TimeCnt</span>       =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2311">2311</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2311">          pMotor[Tmp].<span class="pl-smi">TachoSensor</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2312">2312</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2312">          Motor[Tmp].<span class="pl-smi">TachoSensor</span>   =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2313">2313</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2313">          Motor[Tmp].<span class="pl-smi">Mutex</span>         =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2314">2314</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2314">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2315">2315</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2315">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2316">2316</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2316">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2317">2317</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2317">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2318">2318</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2318"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2319">2319</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2319">    <span class="pl-k">case</span> opOUTPUT_RESET:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2320">2320</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2320">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2321">2321</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2321">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2322">2322</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2322"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2323">2323</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2323">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(Buf[<span class="pl-c1">1</span>], <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2324">2324</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2324"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2325">2325</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2325">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2326">2326</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2326">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2327">2327</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2327">        <span class="pl-k">if</span> (Buf[<span class="pl-c1">1</span>] &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2328">2328</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2328">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2329">2329</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2329">          Motor[Tmp].<span class="pl-smi">Mutex</span>         =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2330">2330</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2330">          Motor[Tmp].<span class="pl-smi">TachoCnt</span>      =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2331">2331</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2331">          pMotor[Tmp].<span class="pl-smi">TachoCounts</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2332">2332</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2332">          Motor[Tmp].<span class="pl-smi">TimeCnt</span>       =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2333">2333</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2333">          Motor[Tmp].<span class="pl-smi">Mutex</span>         =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2334">2334</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2334">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2335">2335</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2335">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2336">2336</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2336">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2337">2337</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2337">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2338">2338</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2338"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2339">2339</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2339">    <span class="pl-k">case</span> opOUTPUT_CLR_COUNT:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2340">2340</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2340">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2341">2341</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2341">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2342">2342</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2342">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2343">2343</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2343">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2344">2344</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2344">        <span class="pl-k">if</span> (Buf[<span class="pl-c1">1</span>] &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2345">2345</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2345">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2346">2346</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2346">          Motor[Tmp].<span class="pl-smi">Mutex</span>         =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2347">2347</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2347">          pMotor[Tmp].<span class="pl-smi">TachoSensor</span>  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2348">2348</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2348">          Motor[Tmp].<span class="pl-smi">TachoSensor</span>   =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2349">2349</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2349">          Motor[Tmp].<span class="pl-smi">Mutex</span>         =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2350">2350</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2350">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2351">2351</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2351">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2352">2352</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2352">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2353">2353</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2353">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2354">2354</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2354"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2355">2355</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2355">    <span class="pl-k">case</span> opOUTPUT_STOP:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2356">2356</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2356">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2357">2357</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2357">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2358">2358</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2358"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2359">2359</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2359">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(Buf[<span class="pl-c1">1</span>], <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2360">2360</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2360"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2361">2361</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2361">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2362">2362</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2362">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2363">2363</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2363">        <span class="pl-k">if</span> (Buf[<span class="pl-c1">1</span>] &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2364">2364</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2364">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2365">2365</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2365">          Motor[Tmp].<span class="pl-smi">Mutex</span>     = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2366">2366</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2366"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2367">2367</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2367">          <span class="pl-k">if</span> (Buf[<span class="pl-c1">2</span>])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2368">2368</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2368">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2369">2369</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2369">            <span class="pl-c1">StopAndBrakeMotor</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2370">2370</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2370">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2371">2371</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2371">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2372">2372</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2372">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2373">2373</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2373">            <span class="pl-c1">StopAndFloatMotor</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2374">2374</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2374">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2375">2375</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2375"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2376">2376</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2376">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2377">2377</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2377">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2378">2378</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2378">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2379">2379</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2379">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2380">2380</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2380">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2381">2381</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2381"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2382">2382</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2382">    <span class="pl-k">case</span> opOUTPUT_POWER:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2383">2383</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2383">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2384">2384</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2384">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2385">2385</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2385"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2386">2386</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2386">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(Buf[<span class="pl-c1">1</span>], <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2387">2387</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2387"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2388">2388</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2388">      <span class="pl-c1">CheckSpeedPowerLimits</span>(&amp;(Buf[<span class="pl-c1">2</span>]));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2389">2389</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2389"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2390">2390</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2390">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2391">2391</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2391">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2392">2392</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2392">        <span class="pl-k">if</span> (Buf[<span class="pl-c1">1</span>] &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2393">2393</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2393">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2394">2394</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2394">          Motor[Tmp].<span class="pl-smi">Mutex</span>       = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2395">2395</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2395">          Motor[Tmp].<span class="pl-smi">TargetPower</span> = (SLONG)(Buf[<span class="pl-c1">2</span>]) * (SLONG)(Motor[Tmp].<span class="pl-smi">Pol</span>) * (SLONG)SPEED_PWMCNT_REL;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2396">2396</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2396"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2397">2397</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2397">          <span class="pl-k">if</span> ((IDLE == Motor[Tmp].<span class="pl-smi">State</span>) || (BRAKED == Motor[Tmp].<span class="pl-smi">State</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2398">2398</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2398">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2399">2399</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2399">            Motor[Tmp].<span class="pl-smi">TargetState</span> = UNLIMITED_UNREG;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2400">2400</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2400">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2401">2401</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2401">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2402">2402</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2402">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2403">2403</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2403">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2404">2404</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2404">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2405">2405</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2405">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2406">2406</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2406"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2407">2407</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2407">    <span class="pl-k">case</span> opOUTPUT_SPEED:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2408">2408</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2408">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2409">2409</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2409">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2410">2410</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2410"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2411">2411</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2411">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(Buf[<span class="pl-c1">1</span>], <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2412">2412</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2412"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2413">2413</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2413">      <span class="pl-c1">CheckSpeedPowerLimits</span>(&amp;(Buf[<span class="pl-c1">2</span>]));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2414">2414</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2414"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2415">2415</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2415">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2416">2416</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2416">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2417">2417</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2417">        <span class="pl-k">if</span> (Buf[<span class="pl-c1">1</span>] &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2418">2418</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2418">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2419">2419</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2419">          Motor[Tmp].<span class="pl-smi">Mutex</span>        = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2420">2420</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2420">          Motor[Tmp].<span class="pl-smi">TargetSpeed</span>  = (Buf[<span class="pl-c1">2</span>]) * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2421">2421</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2421">          <span class="pl-k">if</span> ((IDLE == Motor[Tmp].<span class="pl-smi">State</span>) || (BRAKED == Motor[Tmp].<span class="pl-smi">State</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2422">2422</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2422">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2423">2423</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2423">            Motor[Tmp].<span class="pl-smi">TargetState</span> = UNLIMITED_REG;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2424">2424</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2424">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2425">2425</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2425">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2426">2426</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2426">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2427">2427</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2427">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2428">2428</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2428">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2429">2429</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2429">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2430">2430</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2430"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2431">2431</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2431">    <span class="pl-k">case</span> opOUTPUT_START:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2432">2432</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2432">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2433">2433</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2433">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2434">2434</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2434">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2435">2435</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2435">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2436">2436</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2436">        <span class="pl-k">if</span> (Buf[<span class="pl-c1">1</span>] &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2437">2437</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2437">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2438">2438</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2438">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2439">2439</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2439">          <span class="pl-k">if</span> ((IDLE == Motor[Tmp].<span class="pl-smi">State</span>) || (BRAKED == Motor[Tmp].<span class="pl-smi">State</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2440">2440</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2440">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2441">2441</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2441">            Motor[Tmp].<span class="pl-smi">State</span>  = Motor[Tmp].<span class="pl-smi">TargetState</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2442">2442</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2442">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2443">2443</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2443">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2444">2444</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2444">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2445">2445</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2445">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2446">2446</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2446">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2447">2447</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2447">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2448">2448</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2448"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2449">2449</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2449">    <span class="pl-k">case</span> opOUTPUT_POLARITY:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2450">2450</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2450">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2451">2451</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2451">      UBYTE Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2452">2452</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2452"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2453">2453</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2453">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(Buf[<span class="pl-c1">1</span>], <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2454">2454</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2454"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2455">2455</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2455">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2456">2456</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2456">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2457">2457</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2457">        <span class="pl-k">if</span> (Buf[<span class="pl-c1">1</span>] &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2458">2458</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2458">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2459">2459</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2459">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2460">2460</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2460">          <span class="pl-k">if</span> (<span class="pl-c1">0</span> == (SBYTE)Buf[<span class="pl-c1">2</span>])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2461">2461</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2461">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2462">2462</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2462">            <span class="pl-c">/* 0 == Toggle */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2463">2463</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2463">            Motor[Tmp].<span class="pl-smi">TargetPower</span> = (Motor[Tmp].<span class="pl-smi">TargetPower</span>) * -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2464">2464</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2464">            Motor[Tmp].<span class="pl-smi">TargetSpeed</span> = (Motor[Tmp].<span class="pl-smi">TargetSpeed</span>) * -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2465">2465</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2465"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2466">2466</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2466">            <span class="pl-k">if</span> (<span class="pl-c1">1</span> == Motor[Tmp].<span class="pl-smi">Pol</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2467">2467</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2467">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2468">2468</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2468">              Motor[Tmp].<span class="pl-smi">Pol</span> = -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2469">2469</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2469">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2470">2470</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2470">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2471">2471</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2471">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2472">2472</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2472">              Motor[Tmp].<span class="pl-smi">Pol</span> =  <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2473">2473</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2473">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2474">2474</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2474">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2475">2475</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2475">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2476">2476</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2476">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2477">2477</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2477"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2478">2478</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2478">            <span class="pl-k">if</span> (Motor[Tmp].<span class="pl-smi">Pol</span> != (SBYTE)Buf[<span class="pl-c1">2</span>])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2479">2479</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2479">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2480">2480</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2480">              Motor[Tmp].<span class="pl-smi">TargetPower</span>  = (Motor[Tmp].<span class="pl-smi">TargetPower</span>) * -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2481">2481</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2481">              Motor[Tmp].<span class="pl-smi">TargetSpeed</span>  = (Motor[Tmp].<span class="pl-smi">TargetSpeed</span>) * -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2482">2482</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2482">              Motor[Tmp].<span class="pl-smi">Pol</span>          = Buf[<span class="pl-c1">2</span>];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2483">2483</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2483">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2484">2484</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2484">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2485">2485</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2485">          <span class="pl-c1">SetPower</span>(Tmp, Motor[Tmp].<span class="pl-smi">TargetPower</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2486">2486</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2486">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2487">2487</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2487">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2488">2488</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2488">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2489">2489</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2489">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2490">2490</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2490">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2491">2491</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2491"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2492">2492</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2492">    <span class="pl-k">case</span> opOUTPUT_POSITION:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2493">2493</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2493">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2494">2494</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2494">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2495">2495</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2495">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2496">2496</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2496"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2497">2497</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2497">    <span class="pl-k">case</span> opOUTPUT_STEP_POWER:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2498">2498</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2498">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2499">2499</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2499">      UBYTE       Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2500">2500</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2500">      STEPPOWER   StepPower;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2501">2501</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2501"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2502">2502</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2502">      <span class="pl-c1">memcpy</span>((UBYTE*)(&amp;(StepPower.<span class="pl-smi">Cmd</span>)), &amp;Buf[<span class="pl-c1">0</span>], <span class="pl-k">sizeof</span>(StepPower));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2503">2503</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2503"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2504">2504</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2504">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(StepPower.<span class="pl-smi">Nos</span>, <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2505">2505</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2505"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2506">2506</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2506">      <span class="pl-c1">CheckSpeedPowerLimits</span>(&amp;(StepPower.<span class="pl-smi">Power</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2507">2507</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2507"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2508">2508</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2508">      <span class="pl-c">// Adjust if there is inconsistency between power and steps</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2509">2509</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2509">      <span class="pl-k">if</span> (((StepPower.<span class="pl-smi">Power</span> &lt; <span class="pl-c1">0</span>) &amp;&amp; ((StepPower.<span class="pl-smi">Step1</span> &gt; <span class="pl-c1">0</span>) || (StepPower.<span class="pl-smi">Step2</span> &gt; <span class="pl-c1">0</span>) || (StepPower.<span class="pl-smi">Step3</span> &gt; <span class="pl-c1">0</span>))) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2510">2510</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2510">          ((StepPower.<span class="pl-smi">Power</span> &gt; <span class="pl-c1">0</span>) &amp;&amp; ((StepPower.<span class="pl-smi">Step1</span> &lt; <span class="pl-c1">0</span>) || (StepPower.<span class="pl-smi">Step2</span> &lt; <span class="pl-c1">0</span>) || (StepPower.<span class="pl-smi">Step3</span> &lt; <span class="pl-c1">0</span>))))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2511">2511</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2511">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2512">2512</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2512">        StepPower.<span class="pl-smi">Step1</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2513">2513</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2513">        StepPower.<span class="pl-smi">Step2</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2514">2514</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2514">        StepPower.<span class="pl-smi">Step3</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2515">2515</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2515">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2516">2516</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2516"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2517">2517</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2517">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2518">2518</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2518">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2519">2519</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2519">        <span class="pl-k">if</span> (StepPower.<span class="pl-smi">Nos</span> &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2520">2520</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2520">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2521">2521</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2521">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2522">2522</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2522"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2523">2523</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2523">          StepPowerSteps[Tmp] = TachoSteps[Tmp];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2524">2524</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2524"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2525">2525</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2525">          ReadyStatus |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2526">2526</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2526">          TestStatus  |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2527">2527</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2527"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2528">2528</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2528">          Motor[Tmp].<span class="pl-smi">TargetPower</span>   = StepPower.<span class="pl-smi">Power</span> * SPEED_PWMCNT_REL * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2529">2529</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2529">          Motor[Tmp].<span class="pl-smi">TachoCntUp</span>    = StepPower.<span class="pl-smi">Step1</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2530">2530</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2530">          Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = StepPower.<span class="pl-smi">Step2</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2531">2531</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2531">          Motor[Tmp].<span class="pl-smi">TachoCntDown</span>  = StepPower.<span class="pl-smi">Step3</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2532">2532</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2532">          Motor[Tmp].<span class="pl-smi">TargetBrake</span>   = StepPower.<span class="pl-smi">Brake</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2533">2533</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2533">          <span class="pl-k">if</span> (Motor[Tmp].<span class="pl-smi">TargetPower</span> &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2534">2534</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2534">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2535">2535</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2535">            Motor[Tmp].<span class="pl-smi">Dir</span> = <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2536">2536</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2536">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2537">2537</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2537">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2538">2538</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2538">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2539">2539</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2539">            Motor[Tmp].<span class="pl-smi">Dir</span> = -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2540">2540</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2540">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2541">2541</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2541"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2542">2542</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2542">          TimeOutSpeed0[Tmp] = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2543">2543</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2543"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2544">2544</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2544">          <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepPowerCheckTachoCntUp</span>(Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2545">2545</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2545">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2546">2546</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2546">            SLONG AdjustTachoValue = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2547">2547</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2547">            <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepPowerCheckTachoCntConst</span>(Tmp, AdjustTachoValue))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2548">2548</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2548">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2549">2549</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2549">              <span class="pl-c1">StepPowerCheckTachoCntDown</span>(Tmp, AdjustTachoValue);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2550">2550</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2550">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2551">2551</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2551">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2552">2552</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2552">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2553">2553</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2553">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2554">2554</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2554">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2555">2555</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2555">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2556">2556</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2556">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2557">2557</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2557"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2558">2558</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2558">    <span class="pl-k">case</span> opOUTPUT_TIME_POWER:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2559">2559</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2559">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2560">2560</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2560">      UBYTE       Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2561">2561</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2561">      TIMEPOWER   TimePower;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2562">2562</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2562">      SLONG       Inc;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2563">2563</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2563"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2564">2564</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2564">      <span class="pl-c1">memcpy</span>((UBYTE*)(&amp;(TimePower.<span class="pl-smi">Cmd</span>)), &amp;Buf[<span class="pl-c1">0</span>], <span class="pl-k">sizeof</span>(TimePower));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2565">2565</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2565"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2566">2566</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2566">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(TimePower.<span class="pl-smi">Nos</span>, <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2567">2567</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2567"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2568">2568</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2568">      <span class="pl-c">// Adjust if there is inconsistency between power and Time</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2569">2569</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2569">      <span class="pl-k">if</span> (((TimePower.<span class="pl-smi">Power</span> &lt; <span class="pl-c1">0</span>) &amp;&amp; ((TimePower.<span class="pl-smi">Time1</span> &gt; <span class="pl-c1">0</span>) || (TimePower.<span class="pl-smi">Time2</span> &gt; <span class="pl-c1">0</span>) || (TimePower.<span class="pl-smi">Time3</span> &gt; <span class="pl-c1">0</span>))) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2570">2570</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2570">          ((TimePower.<span class="pl-smi">Power</span> &gt; <span class="pl-c1">0</span>) &amp;&amp; ((TimePower.<span class="pl-smi">Time1</span> &lt; <span class="pl-c1">0</span>) || (TimePower.<span class="pl-smi">Time2</span> &lt; <span class="pl-c1">0</span>) || (TimePower.<span class="pl-smi">Time3</span> &lt; <span class="pl-c1">0</span>))))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2571">2571</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2571">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2572">2572</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2572">        TimePower.<span class="pl-smi">Time1</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2573">2573</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2573">        TimePower.<span class="pl-smi">Time2</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2574">2574</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2574">        TimePower.<span class="pl-smi">Time3</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2575">2575</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2575">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2576">2576</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2576"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2577">2577</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2577">      <span class="pl-k">if</span> ((TimePower.<span class="pl-smi">Time1</span> &gt; <span class="pl-c1">0</span>) || (TimePower.<span class="pl-smi">Time2</span> &gt; <span class="pl-c1">0</span>) || (TimePower.<span class="pl-smi">Time3</span> &gt; <span class="pl-c1">0</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2578">2578</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2578">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2579">2579</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2579">        Inc =  SOFT_TIMER_MS;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2580">2580</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2580">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2581">2581</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2581">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2582">2582</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2582">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2583">2583</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2583">        Inc = -SOFT_TIMER_MS;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2584">2584</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2584">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2585">2585</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2585"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2586">2586</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2586">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2587">2587</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2587">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2588">2588</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2588">        <span class="pl-k">if</span> (TimePower.<span class="pl-smi">Nos</span> &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2589">2589</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2589">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2590">2590</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2590">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2591">2591</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2591"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2592">2592</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2592">          StepPowerSteps[Tmp]   =  TimerSteps[Tmp];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2593">2593</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2593">          Motor[Tmp].<span class="pl-smi">TimeInc</span>    =  Inc * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2594">2594</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2594">          *StepPowerSteps[Tmp]  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2595">2595</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2595"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2596">2596</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2596">          ReadyStatus |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2597">2597</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2597">          TestStatus  |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2598">2598</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2598"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2599">2599</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2599">          Motor[Tmp].<span class="pl-smi">TargetPower</span>   = TimePower.<span class="pl-smi">Power</span> * SPEED_PWMCNT_REL * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2600">2600</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2600">          Motor[Tmp].<span class="pl-smi">TachoCntUp</span>    = TimePower.<span class="pl-smi">Time1</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2601">2601</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2601">          Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = TimePower.<span class="pl-smi">Time2</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2602">2602</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2602">          Motor[Tmp].<span class="pl-smi">TachoCntDown</span>  = TimePower.<span class="pl-smi">Time3</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2603">2603</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2603">          Motor[Tmp].<span class="pl-smi">TargetBrake</span>   = TimePower.<span class="pl-smi">Brake</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2604">2604</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2604"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2605">2605</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2605">          <span class="pl-k">if</span> (Motor[Tmp].<span class="pl-smi">TargetPower</span> &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2606">2606</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2606">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2607">2607</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2607">            Motor[Tmp].<span class="pl-smi">Dir</span> = <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2608">2608</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2608">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2609">2609</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2609">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2610">2610</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2610">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2611">2611</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2611">            Motor[Tmp].<span class="pl-smi">Dir</span> = -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2612">2612</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2612">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2613">2613</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2613"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2614">2614</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2614">          TimeOutSpeed0[Tmp] = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2615">2615</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2615"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2616">2616</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2616">          <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepPowerCheckTachoCntUp</span>(Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2617">2617</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2617">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2618">2618</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2618">            SLONG AdjustTachoValue = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2619">2619</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2619">            <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepPowerCheckTachoCntConst</span>(Tmp, AdjustTachoValue))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2620">2620</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2620">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2621">2621</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2621">              <span class="pl-c1">StepPowerCheckTachoCntDown</span>(Tmp, AdjustTachoValue);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2622">2622</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2622">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2623">2623</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2623">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2624">2624</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2624">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2625">2625</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2625">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2626">2626</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2626">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2627">2627</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2627">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2628">2628</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2628">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2629">2629</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2629"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2630">2630</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2630">    <span class="pl-k">case</span> opOUTPUT_STEP_SPEED:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2631">2631</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2631">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2632">2632</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2632">      UBYTE       Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2633">2633</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2633">      STEPSPEED   StepSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2634">2634</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2634"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2635">2635</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2635">      <span class="pl-c1">memcpy</span>((UBYTE*)(&amp;(StepSpeed.<span class="pl-smi">Cmd</span>)), &amp;Buf[<span class="pl-c1">0</span>], <span class="pl-k">sizeof</span>(StepSpeed));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2636">2636</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2636"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2637">2637</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2637">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(StepSpeed.<span class="pl-smi">Nos</span>, <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2638">2638</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2638"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2639">2639</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2639">      <span class="pl-c1">CheckSpeedPowerLimits</span>(&amp;(StepSpeed.<span class="pl-smi">Speed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2640">2640</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2640"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2641">2641</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2641">      <span class="pl-c">// Adjust if there is inconsistency between Speed and Steps</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2642">2642</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2642">      <span class="pl-k">if</span> (((StepSpeed.<span class="pl-smi">Speed</span> &lt; <span class="pl-c1">0</span>) &amp;&amp; ((StepSpeed.<span class="pl-smi">Step1</span> &gt; <span class="pl-c1">0</span>) || (StepSpeed.<span class="pl-smi">Step2</span> &gt; <span class="pl-c1">0</span>) || (StepSpeed.<span class="pl-smi">Step3</span> &gt; <span class="pl-c1">0</span>))) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2643">2643</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2643">          ((StepSpeed.<span class="pl-smi">Speed</span> &gt; <span class="pl-c1">0</span>) &amp;&amp; ((StepSpeed.<span class="pl-smi">Step1</span> &lt; <span class="pl-c1">0</span>) || (StepSpeed.<span class="pl-smi">Step2</span> &lt; <span class="pl-c1">0</span>) || (StepSpeed.<span class="pl-smi">Step3</span> &lt; <span class="pl-c1">0</span>))))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2644">2644</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2644">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2645">2645</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2645">        StepSpeed.<span class="pl-smi">Step1</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2646">2646</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2646">        StepSpeed.<span class="pl-smi">Step2</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2647">2647</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2647">        StepSpeed.<span class="pl-smi">Step3</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2648">2648</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2648">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2649">2649</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2649"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2650">2650</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2650">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2651">2651</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2651">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2652">2652</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2652">        <span class="pl-k">if</span> (StepSpeed.<span class="pl-smi">Nos</span> &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2653">2653</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2653">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2654">2654</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2654">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2655">2655</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2655"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2656">2656</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2656">          StepPowerSteps[Tmp] = TachoSteps[Tmp];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2657">2657</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2657"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2658">2658</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2658">          ReadyStatus |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2659">2659</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2659">          TestStatus  |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2660">2660</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2660"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2661">2661</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2661">          Motor[Tmp].<span class="pl-smi">TargetPower</span>   = StepSpeed.<span class="pl-smi">Speed</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2662">2662</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2662">          Motor[Tmp].<span class="pl-smi">TachoCntUp</span>    = StepSpeed.<span class="pl-smi">Step1</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2663">2663</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2663">          Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = StepSpeed.<span class="pl-smi">Step2</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2664">2664</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2664">          Motor[Tmp].<span class="pl-smi">TachoCntDown</span>  = StepSpeed.<span class="pl-smi">Step3</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2665">2665</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2665">          Motor[Tmp].<span class="pl-smi">TargetBrake</span>   = StepSpeed.<span class="pl-smi">Brake</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2666">2666</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2666"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2667">2667</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2667">          <span class="pl-k">if</span> (Motor[Tmp].<span class="pl-smi">TargetPower</span> &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2668">2668</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2668">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2669">2669</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2669">            Motor[Tmp].<span class="pl-smi">Dir</span> = <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2670">2670</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2670">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2671">2671</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2671">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2672">2672</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2672">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2673">2673</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2673">            Motor[Tmp].<span class="pl-smi">Dir</span> = -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2674">2674</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2674">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2675">2675</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2675"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2676">2676</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2676">          TimeOutSpeed0[Tmp] = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2677">2677</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2677"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2678">2678</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2678">          <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepSpeedCheckTachoCntUp</span>(Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2679">2679</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2679">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2680">2680</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2680">            SLONG AdjustTachoValue = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2681">2681</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2681">            <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepSpeedCheckTachoCntConst</span>(Tmp, AdjustTachoValue))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2682">2682</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2682">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2683">2683</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2683">              <span class="pl-c1">StepSpeedCheckTachoCntDown</span>(Tmp, AdjustTachoValue);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2684">2684</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2684">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2685">2685</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2685">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2686">2686</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2686">          Motor[Tmp].<span class="pl-smi">TargetSpeed</span> = Motor[Tmp].<span class="pl-smi">TargetPower</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2687">2687</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2687">          Motor[Tmp].<span class="pl-smi">Mutex</span>       = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2688">2688</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2688">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2689">2689</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2689">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2690">2690</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2690">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2691">2691</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2691">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2692">2692</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2692"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2693">2693</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2693">    <span class="pl-k">case</span> opOUTPUT_TIME_SPEED:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2694">2694</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2694">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2695">2695</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2695">      UBYTE       Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2696">2696</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2696">      SLONG       Inc;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2697">2697</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2697">      TIMESPEED   TimeSpeed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2698">2698</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2698"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2699">2699</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2699"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2700">2700</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2700">      <span class="pl-c1">memcpy</span>((UBYTE*)(&amp;(TimeSpeed.<span class="pl-smi">Cmd</span>)), &amp;Buf[<span class="pl-c1">0</span>], <span class="pl-k">sizeof</span>(TimeSpeed));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2701">2701</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2701"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2702">2702</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2702">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(TimeSpeed.<span class="pl-smi">Nos</span>, <span class="pl-c1">FALSE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2703">2703</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2703"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2704">2704</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2704">      <span class="pl-c1">CheckSpeedPowerLimits</span>(&amp;(TimeSpeed.<span class="pl-smi">Speed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2705">2705</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2705"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2706">2706</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2706">      <span class="pl-c">// Adjust if there is inconsistency between Speed and Time</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2707">2707</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2707">      <span class="pl-k">if</span> (((TimeSpeed.<span class="pl-smi">Speed</span> &lt; <span class="pl-c1">0</span>) &amp;&amp; ((TimeSpeed.<span class="pl-smi">Time1</span> &gt; <span class="pl-c1">0</span>) || (TimeSpeed.<span class="pl-smi">Time2</span> &gt; <span class="pl-c1">0</span>) || (TimeSpeed.<span class="pl-smi">Time3</span> &gt; <span class="pl-c1">0</span>))) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2708">2708</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2708">          ((TimeSpeed.<span class="pl-smi">Speed</span> &gt; <span class="pl-c1">0</span>) &amp;&amp; ((TimeSpeed.<span class="pl-smi">Time1</span> &lt; <span class="pl-c1">0</span>) || (TimeSpeed.<span class="pl-smi">Time2</span> &lt; <span class="pl-c1">0</span>) || (TimeSpeed.<span class="pl-smi">Time3</span> &lt; <span class="pl-c1">0</span>))))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2709">2709</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2709">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2710">2710</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2710">        TimeSpeed.<span class="pl-smi">Time1</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2711">2711</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2711">        TimeSpeed.<span class="pl-smi">Time2</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2712">2712</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2712">        TimeSpeed.<span class="pl-smi">Time3</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2713">2713</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2713">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2714">2714</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2714"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2715">2715</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2715">      <span class="pl-k">if</span> ((TimeSpeed.<span class="pl-smi">Time1</span> &gt; <span class="pl-c1">0</span>) || (TimeSpeed.<span class="pl-smi">Time2</span> &gt; <span class="pl-c1">0</span>) || (TimeSpeed.<span class="pl-smi">Time3</span> &gt; <span class="pl-c1">0</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2716">2716</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2716">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2717">2717</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2717">        Inc = SOFT_TIMER_MS;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2718">2718</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2718">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2719">2719</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2719">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2720">2720</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2720">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2721">2721</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2721">        Inc = -SOFT_TIMER_MS;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2722">2722</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2722">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2723">2723</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2723"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2724">2724</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2724">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2725">2725</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2725">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2726">2726</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2726">        <span class="pl-k">if</span> (TimeSpeed.<span class="pl-smi">Nos</span> &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2727">2727</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2727">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2728">2728</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2728">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2729">2729</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2729"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2730">2730</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2730">          StepPowerSteps[Tmp]   =  TimerSteps[Tmp];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2731">2731</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2731">          Motor[Tmp].<span class="pl-smi">TimeInc</span>    =  Inc * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2732">2732</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2732">          *StepPowerSteps[Tmp]  =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2733">2733</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2733"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2734">2734</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2734">          ReadyStatus |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2735">2735</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2735">          TestStatus  |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2736">2736</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2736"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2737">2737</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2737">          Motor[Tmp].<span class="pl-smi">TargetPower</span>   = TimeSpeed.<span class="pl-smi">Speed</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2738">2738</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2738">          Motor[Tmp].<span class="pl-smi">TachoCntUp</span>    = TimeSpeed.<span class="pl-smi">Time1</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2739">2739</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2739">          Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = TimeSpeed.<span class="pl-smi">Time2</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2740">2740</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2740">          Motor[Tmp].<span class="pl-smi">TachoCntDown</span>  = TimeSpeed.<span class="pl-smi">Time3</span> * (Motor[Tmp].<span class="pl-smi">Pol</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2741">2741</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2741">          Motor[Tmp].<span class="pl-smi">TargetBrake</span>   = TimeSpeed.<span class="pl-smi">Brake</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2742">2742</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2742"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2743">2743</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2743">          <span class="pl-k">if</span> (Motor[Tmp].<span class="pl-smi">TargetPower</span> &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2744">2744</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2744">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2745">2745</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2745">            Motor[Tmp].<span class="pl-smi">Dir</span> = <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2746">2746</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2746">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2747">2747</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2747">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2748">2748</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2748">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2749">2749</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2749">            Motor[Tmp].<span class="pl-smi">Dir</span> = -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2750">2750</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2750">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2751">2751</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2751"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2752">2752</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2752">          TimeOutSpeed0[Tmp] = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2753">2753</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2753"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2754">2754</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2754">          <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepSpeedCheckTachoCntUp</span>(Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2755">2755</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2755">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2756">2756</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2756">            SLONG AdjustTachoValue = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2757">2757</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2757">            <span class="pl-k">if</span> (<span class="pl-c1">FALSE</span> == <span class="pl-c1">StepSpeedCheckTachoCntConst</span>(Tmp, AdjustTachoValue))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2758">2758</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2758">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2759">2759</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2759">              <span class="pl-c1">StepSpeedCheckTachoCntDown</span>(Tmp, AdjustTachoValue);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2760">2760</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2760">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2761">2761</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2761">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2762">2762</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2762">          Motor[Tmp].<span class="pl-smi">TargetSpeed</span> = Motor[Tmp].<span class="pl-smi">TargetPower</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2763">2763</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2763">          Motor[Tmp].<span class="pl-smi">Mutex</span>       = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2764">2764</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2764">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2765">2765</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2765">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2766">2766</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2766">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2767">2767</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2767">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2768">2768</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2768"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2769">2769</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2769">    <span class="pl-k">case</span> opOUTPUT_STEP_SYNC:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2770">2770</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2770">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2771">2771</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2771">      UBYTE       No  = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2772">2772</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2772">      UBYTE       Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2773">2773</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2773">      STEPSYNC    StepSync;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2774">2774</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2774"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2775">2775</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2775">      <span class="pl-c1">memcpy</span>((UBYTE*)(&amp;(StepSync.<span class="pl-smi">Cmd</span>)), &amp;Buf[<span class="pl-c1">0</span>], <span class="pl-k">sizeof</span>(StepSync));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2776">2776</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2776"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2777">2777</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2777">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(StepSync.<span class="pl-smi">Nos</span>, <span class="pl-c1">TRUE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2778">2778</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2778"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2779">2779</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2779">      <span class="pl-c">//Check if exceeding speed limits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2780">2780</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2780">      <span class="pl-c1">CheckSpeedPowerLimits</span>(&amp;(StepSync.<span class="pl-smi">Speed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2781">2781</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2781"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2782">2782</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2782">      <span class="pl-k">if</span> (((StepSync.<span class="pl-smi">Speed</span> &lt; <span class="pl-c1">0</span>) &amp;&amp; (StepSync.<span class="pl-smi">Step</span> &gt; <span class="pl-c1">0</span>)) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2783">2783</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2783">          ((StepSync.<span class="pl-smi">Speed</span> &gt; <span class="pl-c1">0</span>) &amp;&amp; (StepSync.<span class="pl-smi">Step</span> &lt; <span class="pl-c1">0</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2784">2784</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2784">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2785">2785</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2785">        StepSync.<span class="pl-smi">Step</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2786">2786</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2786">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2787">2787</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2787"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2788">2788</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2788">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2789">2789</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2789">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2790">2790</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2790"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2791">2791</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2791">        <span class="pl-k">if</span> (StepSync.<span class="pl-smi">Nos</span> &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2792">2792</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2792">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2793">2793</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2793">          Motor[Tmp].<span class="pl-smi">Mutex</span> = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2794">2794</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2794"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2795">2795</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2795">          ReadyStatus           |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2796">2796</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2796">          TestStatus            |= (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2797">2797</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2797">          StepPowerSteps[Tmp]    = TachoSteps[Tmp];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2798">2798</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2798">          Motor[Tmp].<span class="pl-smi">TargetBrake</span> =  StepSync.<span class="pl-smi">Brake</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2799">2799</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2799"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2800">2800</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2800">          <span class="pl-k">if</span> (<span class="pl-c1">0</span> == StepSync.<span class="pl-smi">Step</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2801">2801</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2801">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2802">2802</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2802">            <span class="pl-c">// If run forever</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2803">2803</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2803">            *StepPowerSteps[Tmp] = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2804">2804</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2804">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2805">2805</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2805"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2806">2806</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2806">          <span class="pl-k">if</span> (<span class="pl-c1">0</span> == StepSync.<span class="pl-smi">Turn</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2807">2807</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2807">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2808">2808</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2808">            <span class="pl-c">// Synced motors are going straight</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2809">2809</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2809">            Motor[Tmp].<span class="pl-smi">TargetPower</span>   = StepSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2810">2810</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2810">            Motor[Tmp].<span class="pl-smi">TurnRatio</span>     = <span class="pl-c1">100</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2811">2811</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2811">            Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = StepSync.<span class="pl-smi">Step</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2812">2812</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2812">            SyncMNos[No]             = Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2813">2813</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2813">            TimeOutSpeed0[Tmp]       = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2814">2814</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2814">            MaxSyncSpeed             = StepSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2815">2815</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2815"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2816">2816</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2816">            <span class="pl-c">// Find the direction the main motor will drive</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2817">2817</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2817">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt;= StepSync.<span class="pl-smi">Speed</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2818">2818</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2818">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2819">2819</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2819">              Motor[Tmp].<span class="pl-smi">Dir</span> = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2820">2820</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2820">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2821">2821</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2821">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2822">2822</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2822">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2823">2823</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2823">              Motor[Tmp].<span class="pl-smi">Dir</span> = INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2824">2824</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2824">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2825">2825</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2825"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2826">2826</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2826">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> == No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2827">2827</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2827">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2828">2828</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2828">              Motor[Tmp].<span class="pl-smi">State</span> = LIMITED_STEP_SYNC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2829">2829</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2829">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2830">2830</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2830">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2831">2831</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2831">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2832">2832</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2832">              Motor[Tmp].<span class="pl-smi">State</span> = SYNCED_SLAVE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2833">2833</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2833">              Motor[Tmp].<span class="pl-smi">Dir</span>   = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2834">2834</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2834">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2835">2835</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2835">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2836">2836</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2836">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2837">2837</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2837">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2838">2838</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2838">            <span class="pl-c">// Turning</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2839">2839</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2839">            UBYTE MotorIndex;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2840">2840</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2840"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2841">2841</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2841">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt; StepSync.<span class="pl-smi">Turn</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2842">2842</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2842">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2843">2843</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2843">              MotorIndex = No;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2844">2844</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2844">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2845">2845</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2845">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2846">2846</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2846">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2847">2847</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2847">              <span class="pl-c">// Invert if turning left (right motor runs fastest)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2848">2848</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2848">              MotorIndex = <span class="pl-c1">1</span> - No;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2849">2849</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2849">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2850">2850</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2850"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2851">2851</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2851">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> == MotorIndex)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2852">2852</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2852">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2853">2853</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2853">              <span class="pl-k">if</span> (StepSync.<span class="pl-smi">Speed</span> &gt; <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2854">2854</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2854">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2855">2855</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2855">                Motor[Tmp].<span class="pl-smi">Dir</span> = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2856">2856</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2856">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2857">2857</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2857">              <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2858">2858</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2858">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2859">2859</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2859">                Motor[Tmp].<span class="pl-smi">Dir</span> = INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2860">2860</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2860">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2861">2861</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2861">              Motor[Tmp].<span class="pl-smi">TurnRatio</span> = StepSync.<span class="pl-smi">Turn</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2862">2862</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2862">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2863">2863</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2863">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2864">2864</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2864">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2865">2865</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2865">              <span class="pl-k">if</span> ((StepSync.<span class="pl-smi">Turn</span> &lt; <span class="pl-c1">100</span>) &amp;&amp; (StepSync.<span class="pl-smi">Turn</span> &gt; -<span class="pl-c1">100</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2866">2866</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2866">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2867">2867</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2867">                Motor[Tmp].<span class="pl-smi">Dir</span> = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2868">2868</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2868"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2869">2869</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2869">                <span class="pl-k">if</span> (StepSync.<span class="pl-smi">Turn</span> &gt; <span class="pl-c1">0</span>)       <span class="pl-c">// Invert the ratio in the first quarter</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2870">2870</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2870">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2871">2871</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2871">                  Motor[Tmp].<span class="pl-smi">TurnRatio</span> = <span class="pl-c1">100</span> - StepSync.<span class="pl-smi">Turn</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2872">2872</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2872">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2873">2873</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2873">                <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2874">2874</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2874">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2875">2875</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2875">                  Motor[Tmp].<span class="pl-smi">TurnRatio</span> = -<span class="pl-c1">100</span> - StepSync.<span class="pl-smi">Turn</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2876">2876</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2876">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2877">2877</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2877">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2878">2878</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2878">              <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2879">2879</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2879">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2880">2880</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2880">                <span class="pl-k">if</span> ((StepSync.<span class="pl-smi">Turn</span> &gt;= <span class="pl-c1">100</span>) || (StepSync.<span class="pl-smi">Turn</span> &lt;= -<span class="pl-c1">100</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2881">2881</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2881">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2882">2882</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2882">                  <span class="pl-c">// Both motors are turning</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2883">2883</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2883">                  Motor[Tmp].<span class="pl-smi">Dir</span> = INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2884">2884</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2884">                  <span class="pl-k">if</span> (StepSync.<span class="pl-smi">Turn</span> &lt;= -<span class="pl-c1">100</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2885">2885</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2885">                  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2886">2886</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2886">                    Motor[Tmp].<span class="pl-smi">TurnRatio</span> = (StepSync.<span class="pl-smi">Turn</span> + <span class="pl-c1">100</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2887">2887</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2887">                  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2888">2888</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2888">                  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2889">2889</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2889">                  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2890">2890</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2890">                    Motor[Tmp].<span class="pl-smi">TurnRatio</span> = (StepSync.<span class="pl-smi">Turn</span> - <span class="pl-c1">100</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2891">2891</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2891">                  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2892">2892</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2892">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2893">2893</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2893">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2894">2894</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2894">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2895">2895</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2895"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2896">2896</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2896">            SyncMNos[MotorIndex] = Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2897">2897</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2897"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2898">2898</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2898">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> &gt; StepSync.<span class="pl-smi">Turn</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2899">2899</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2899">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2900">2900</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2900">              Motor[Tmp].<span class="pl-smi">TurnRatio</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2901">2901</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2901">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2902">2902</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2902"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2903">2903</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2903">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> == MotorIndex)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2904">2904</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2904">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2905">2905</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2905">              Motor[Tmp].<span class="pl-smi">TargetPower</span>   = StepSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2906">2906</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2906">              Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = StepSync.<span class="pl-smi">Step</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2907">2907</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2907">              MaxSyncSpeed             = StepSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2908">2908</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2908">              Motor[Tmp].<span class="pl-smi">State</span>         = LIMITED_DIFF_TURN_SYNC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2909">2909</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2909">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2910">2910</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2910">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2911">2911</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2911">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2912">2912</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2912">              Motor[Tmp].<span class="pl-smi">TargetPower</span>   = (SLONG)(((SLONG)(StepSync.<span class="pl-smi">Speed</span>) * (SLONG)(Motor[Tmp].<span class="pl-smi">TurnRatio</span>))/((SLONG)<span class="pl-c1">100</span> * Motor[Tmp].<span class="pl-smi">Dir</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2913">2913</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2913">              Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = ((StepSync.<span class="pl-smi">Step</span>  * (SLONG)(Motor[Tmp].<span class="pl-smi">TurnRatio</span>))/<span class="pl-c1">100</span>) * Motor[Tmp].<span class="pl-smi">Dir</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2914">2914</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2914">              Motor[Tmp].<span class="pl-smi">State</span>         = SYNCED_SLAVE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2915">2915</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2915">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2916">2916</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2916"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2917">2917</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2917">            TimeOutSpeed0[Tmp] = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2918">2918</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2918">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2919">2919</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2919">          No++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2920">2920</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2920">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2921">2921</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2921">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2922">2922</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2922">      Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Mutex</span>      =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2923">2923</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2923">      Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Mutex</span>      =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2924">2924</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2924">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2925">2925</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2925">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2926">2926</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2926"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2927">2927</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2927">    <span class="pl-k">case</span> opOUTPUT_TIME_SYNC:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2928">2928</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2928">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2929">2929</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2929">      SLONG     Inc;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2930">2930</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2930">      UBYTE     No  = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2931">2931</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2931">      UBYTE     Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2932">2932</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2932">      TIMESYNC  TimeSync;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2933">2933</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2933"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2934">2934</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2934">      <span class="pl-c1">memcpy</span>((UBYTE*)(&amp;(TimeSync.<span class="pl-smi">Cmd</span>)), &amp;Buf[<span class="pl-c1">0</span>], <span class="pl-k">sizeof</span>(TimeSync));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2935">2935</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2935"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2936">2936</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2936">      <span class="pl-c1">TestAndFloatSyncedMotors</span>(TimeSync.<span class="pl-smi">Nos</span>, <span class="pl-c1">TRUE</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2937">2937</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2937"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2938">2938</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2938">      <span class="pl-c">//Check if exceeding speed limits</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2939">2939</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2939">      <span class="pl-c1">CheckSpeedPowerLimits</span>(&amp;(TimeSync.<span class="pl-smi">Speed</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2940">2940</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2940"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2941">2941</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2941">      <span class="pl-k">if</span> (((TimeSync.<span class="pl-smi">Speed</span> &lt; <span class="pl-c1">0</span>) &amp;&amp; (TimeSync.<span class="pl-smi">Time</span> &gt; <span class="pl-c1">0</span>)) ||</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2942">2942</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2942">          ((TimeSync.<span class="pl-smi">Speed</span> &gt; <span class="pl-c1">0</span>) &amp;&amp; (TimeSync.<span class="pl-smi">Time</span> &lt; <span class="pl-c1">0</span>)))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2943">2943</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2943">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2944">2944</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2944">        TimeSync.<span class="pl-smi">Time</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2945">2945</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2945">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2946">2946</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2946"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2947">2947</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2947">      <span class="pl-k">if</span> (TimeSync.<span class="pl-smi">Time</span> &gt; <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2948">2948</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2948">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2949">2949</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2949">        Inc = SOFT_TIMER_MS;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2950">2950</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2950">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2951">2951</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2951">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2952">2952</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2952">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2953">2953</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2953">        Inc = -SOFT_TIMER_MS;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2954">2954</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2954">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2955">2955</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2955"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2956">2956</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2956">      <span class="pl-k">for</span> (Tmp = <span class="pl-c1">0</span>;Tmp &lt; OUTPUTS;Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2957">2957</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2957">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2958">2958</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2958">        <span class="pl-k">if</span> (TimeSync.<span class="pl-smi">Nos</span> &amp; (<span class="pl-c1">1</span> &lt;&lt; Tmp))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2959">2959</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2959">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2960">2960</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2960">          Motor[Tmp].<span class="pl-smi">Mutex</span>       =  <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2961">2961</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2961"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2962">2962</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2962">          ReadyStatus           |=  (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2963">2963</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2963">          TestStatus            |=  (0x01 &lt;&lt; Tmp);   <span class="pl-c">// Set Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2964">2964</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2964"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2965">2965</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2965">          StepPowerSteps[Tmp]    =  TimerSteps[Tmp];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2966">2966</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2966">          Motor[Tmp].<span class="pl-smi">TimeInc</span>     =  Inc;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2967">2967</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2967">          *TimerSteps[Tmp]       =  <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2968">2968</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2968"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2969">2969</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2969">          Motor[Tmp].<span class="pl-smi">TargetBrake</span> =  TimeSync.<span class="pl-smi">Brake</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2970">2970</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2970"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2971">2971</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2971">          <span class="pl-k">if</span> (<span class="pl-c1">0</span> == TimeSync.<span class="pl-smi">Turn</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2972">2972</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2972">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2973">2973</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2973">            <span class="pl-c">// Synced motors are going straight</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2974">2974</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2974">            Motor[Tmp].<span class="pl-smi">TargetPower</span>   = TimeSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2975">2975</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2975">            Motor[Tmp].<span class="pl-smi">TurnRatio</span>     = <span class="pl-c1">100</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2976">2976</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2976">            Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = TimeSync.<span class="pl-smi">Time</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2977">2977</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2977">            SyncMNos[No]             = Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2978">2978</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2978">            TimeOutSpeed0[Tmp]       = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2979">2979</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2979">            MaxSyncSpeed             = TimeSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2980">2980</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2980"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2981">2981</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2981">            <span class="pl-c">// Find the direction the main motor will drive</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2982">2982</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2982">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt;= TimeSync.<span class="pl-smi">Speed</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2983">2983</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2983">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2984">2984</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2984">              Motor[Tmp].<span class="pl-smi">Dir</span> = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2985">2985</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2985">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2986">2986</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2986">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2987">2987</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2987">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2988">2988</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2988">              Motor[Tmp].<span class="pl-smi">Dir</span> = INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2989">2989</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2989">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2990">2990</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2990"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2991">2991</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2991">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> == No)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2992">2992</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2992">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2993">2993</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2993">              Motor[Tmp].<span class="pl-smi">State</span> = LIMITED_STEP_SYNC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2994">2994</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2994">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2995">2995</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2995">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2996">2996</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2996">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2997">2997</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2997">              Motor[Tmp].<span class="pl-smi">State</span> = SYNCED_SLAVE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2998">2998</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2998">              Motor[Tmp].<span class="pl-smi">Dir</span>   = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L2999">2999</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC2999">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3000">3000</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3000">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3001">3001</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3001">          <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3002">3002</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3002">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3003">3003</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3003">            <span class="pl-c">//   Turning</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3004">3004</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3004">            UBYTE MotorIndex;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3005">3005</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3005"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3006">3006</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3006">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> &lt; TimeSync.<span class="pl-smi">Turn</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3007">3007</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3007">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3008">3008</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3008">              MotorIndex = No;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3009">3009</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3009">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3010">3010</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3010">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3011">3011</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3011">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3012">3012</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3012">              <span class="pl-c">// Invert if turning left (right motor runs fastest)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3013">3013</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3013">              MotorIndex = <span class="pl-c1">1</span> - No;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3014">3014</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3014">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3015">3015</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3015"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3016">3016</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3016">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> == MotorIndex)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3017">3017</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3017">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3018">3018</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3018">              <span class="pl-k">if</span> (TimeSync.<span class="pl-smi">Speed</span> &gt; <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3019">3019</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3019">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3020">3020</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3020">                Motor[Tmp].<span class="pl-smi">Dir</span> = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3021">3021</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3021">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3022">3022</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3022">              <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3023">3023</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3023">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3024">3024</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3024">                Motor[Tmp].<span class="pl-smi">Dir</span> = INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3025">3025</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3025">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3026">3026</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3026">              Motor[Tmp].<span class="pl-smi">TurnRatio</span> = TimeSync.<span class="pl-smi">Turn</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3027">3027</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3027">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3028">3028</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3028">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3029">3029</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3029">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3030">3030</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3030">              <span class="pl-k">if</span> ((TimeSync.<span class="pl-smi">Turn</span> &lt; <span class="pl-c1">100</span>) &amp;&amp; (TimeSync.<span class="pl-smi">Turn</span> &gt; -<span class="pl-c1">100</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3031">3031</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3031">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3032">3032</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3032">                Motor[Tmp].<span class="pl-smi">Dir</span> = NON_INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3033">3033</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3033"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3034">3034</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3034">                <span class="pl-k">if</span> (TimeSync.<span class="pl-smi">Turn</span> &gt; <span class="pl-c1">0</span>)       <span class="pl-c">// Invert the ratio in the first quarter</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3035">3035</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3035">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3036">3036</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3036">                  Motor[Tmp].<span class="pl-smi">TurnRatio</span> = <span class="pl-c1">100</span> - TimeSync.<span class="pl-smi">Turn</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3037">3037</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3037">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3038">3038</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3038">                <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3039">3039</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3039">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3040">3040</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3040">                  Motor[Tmp].<span class="pl-smi">TurnRatio</span> = -<span class="pl-c1">100</span> - TimeSync.<span class="pl-smi">Turn</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3041">3041</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3041">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3042">3042</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3042">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3043">3043</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3043">              <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3044">3044</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3044">              {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3045">3045</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3045">                <span class="pl-k">if</span> ((TimeSync.<span class="pl-smi">Turn</span> &gt;= <span class="pl-c1">100</span>) || (TimeSync.<span class="pl-smi">Turn</span> &lt;= -<span class="pl-c1">100</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3046">3046</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3046">                {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3047">3047</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3047">                  <span class="pl-c">// Both motors are turning</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3048">3048</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3048">                  Motor[Tmp].<span class="pl-smi">Dir</span> = INV;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3049">3049</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3049">                  <span class="pl-k">if</span> (TimeSync.<span class="pl-smi">Turn</span> &lt;= -<span class="pl-c1">100</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3050">3050</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3050">                  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3051">3051</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3051">                    Motor[Tmp].<span class="pl-smi">TurnRatio</span> = (TimeSync.<span class="pl-smi">Turn</span> + <span class="pl-c1">100</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3052">3052</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3052">                  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3053">3053</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3053">                  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3054">3054</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3054">                  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3055">3055</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3055">                    Motor[Tmp].<span class="pl-smi">TurnRatio</span> = (TimeSync.<span class="pl-smi">Turn</span> - <span class="pl-c1">100</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3056">3056</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3056">                  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3057">3057</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3057">                }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3058">3058</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3058">              }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3059">3059</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3059">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3060">3060</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3060"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3061">3061</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3061">            SyncMNos[MotorIndex] = Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3062">3062</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3062"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3063">3063</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3063">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> &gt; TimeSync.<span class="pl-smi">Turn</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3064">3064</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3064">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3065">3065</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3065">              Motor[Tmp].<span class="pl-smi">TurnRatio</span> *= -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3066">3066</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3066">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3067">3067</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3067"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3068">3068</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3068">            <span class="pl-k">if</span> (<span class="pl-c1">0</span> == MotorIndex)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3069">3069</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3069">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3070">3070</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3070">              Motor[Tmp].<span class="pl-smi">TargetPower</span>   = TimeSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3071">3071</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3071">              Motor[Tmp].<span class="pl-smi">TachoCntConst</span> = TimeSync.<span class="pl-smi">Time</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3072">3072</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3072">              MaxSyncSpeed             = TimeSync.<span class="pl-smi">Speed</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3073">3073</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3073">              Motor[Tmp].<span class="pl-smi">State</span>         = LIMITED_DIFF_TURN_SYNC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3074">3074</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3074">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3075">3075</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3075">            <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3076">3076</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3076">            {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3077">3077</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3077">              Motor[Tmp].<span class="pl-smi">TargetPower</span>    = (SLONG)(((SLONG)(TimeSync.<span class="pl-smi">Speed</span>) * (SLONG)(Motor[Tmp].<span class="pl-smi">TurnRatio</span>))/((SLONG)<span class="pl-c1">100</span> * Motor[Tmp].<span class="pl-smi">Dir</span>));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3078">3078</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3078">              Motor[Tmp].<span class="pl-smi">TachoCntConst</span>  = TimeSync.<span class="pl-smi">Time</span>  * Motor[Tmp].<span class="pl-smi">Dir</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3079">3079</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3079">              Motor[Tmp].<span class="pl-smi">TimeInc</span>       *= Motor[Tmp].<span class="pl-smi">Dir</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3080">3080</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3080">              Motor[Tmp].<span class="pl-smi">State</span>          = SYNCED_SLAVE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3081">3081</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3081">            }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3082">3082</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3082">            TimeOutSpeed0[Tmp] = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3083">3083</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3083">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3084">3084</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3084">          No++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3085">3085</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3085">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3086">3086</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3086">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3087">3087</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3087">      Motor[SyncMNos[<span class="pl-c1">0</span>]].<span class="pl-smi">Mutex</span>      =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3088">3088</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3088">      Motor[SyncMNos[<span class="pl-c1">1</span>]].<span class="pl-smi">Mutex</span>      =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3089">3089</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3089">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3090">3090</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3090">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3091">3091</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3091"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3092">3092</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3092">    <span class="pl-k">default</span>:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3093">3093</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3093">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3094">3094</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3094">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3095">3095</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3095">    <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3096">3096</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3096">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3097">3097</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3097"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3098">3098</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3098">  <span class="pl-k">return</span> (Lng);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3099">3099</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3099">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3100">3100</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3100"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3101">3101</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3101"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3102">3102</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3102"><span class="pl-k">static</span> <span class="pl-c1">ssize_t</span> <span class="pl-en">Device1Read</span>(<span class="pl-k">struct</span> file *File,<span class="pl-k">char</span> *Buffer,<span class="pl-c1">size_t</span> Count,<span class="pl-c1">loff_t</span> *Offset)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3103">3103</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3103">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3104">3104</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3104">  <span class="pl-k">int</span>     Lng     = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3105">3105</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3105"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3106">3106</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3106">  Lng    =  <span class="pl-c1">snprintf</span>(&amp;Buffer[<span class="pl-c1">0</span>],Count,<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-c1">%01u</span> <span class="pl-pds">&quot;</span></span>,ReadyStatus);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3107">3107</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3107">  Lng   +=  <span class="pl-c1">snprintf</span>(&amp;Buffer[Lng],Count - Lng,<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-c1">%01u</span> <span class="pl-pds">&quot;</span></span>,TestStatus);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3108">3108</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3108"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3109">3109</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3109">  <span class="pl-k">return</span> (Lng);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3110">3110</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3110">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3111">3111</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3111"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3112">3112</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3112"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3113">3113</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3113"><span class="pl-k">static</span>    <span class="pl-k">const</span> <span class="pl-k">struct</span> file_operations Device1Entries =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3114">3114</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3114">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3115">3115</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3115">  .<span class="pl-smi">owner</span>        = THIS_MODULE,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3116">3116</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3116">  .<span class="pl-smi">read</span>         = Device1Read,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3117">3117</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3117">  .<span class="pl-smi">write</span>        = Device1Write</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3118">3118</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3118">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3119">3119</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3119"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3120">3120</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3120"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3121">3121</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3121"><span class="pl-k">static</span>    <span class="pl-k">struct</span> miscdevice Device1 =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3122">3122</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3122">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3123">3123</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3123">  MISC_DYNAMIC_MINOR,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3124">3124</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3124">  DEVICE1_NAME,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3125">3125</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3125">  &amp;Device1Entries</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3126">3126</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3126">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3127">3127</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3127"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3128">3128</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3128"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3129">3129</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3129"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3130">3130</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3130"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3131">3131</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3131"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3132">3132</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3132"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3133">3133</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3133"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3134">3134</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3134"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3135">3135</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3135"><span class="pl-c">/*! \brief    GetPeriphealBasePtr</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3136">3136</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3136"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3137">3137</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3137"><span class="pl-c"> *  Helper function for getting the peripheal HW base address</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3138">3138</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3138"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3139">3139</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3139"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3140">3140</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3140"><span class="pl-k">void</span>    <span class="pl-en">GetPeriphealBasePtr</span>(ULONG Address, ULONG <span class="pl-c1">Size</span>, ULONG **<span class="pl-c1">Ptr</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3141">3141</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3141">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3142">3142</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3142">  <span class="pl-c">/* eCAP0 pointer */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3143">3143</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3143">  <span class="pl-k">if</span> (<span class="pl-c1">request_mem_region</span>(Address,<span class="pl-c1">Size</span>,MODULE_NAME) &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3144">3144</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3144">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3145">3145</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3145"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3146">3146</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3146">    *<span class="pl-c1">Ptr</span>  =  (ULONG*)<span class="pl-c1">ioremap</span>(Address,<span class="pl-c1">Size</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3147">3147</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3147"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3148">3148</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3148">    <span class="pl-k">if</span> (*<span class="pl-c1">Ptr</span> != <span class="pl-c1">NULL</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3149">3149</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3149">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3150">3150</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3150">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3151">3151</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3151">      <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-c1">%s</span> memory Remapped from 0x<span class="pl-c1">%08lX</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE1_NAME,(<span class="pl-k">unsigned</span> <span class="pl-k">long</span>)*<span class="pl-c1">Ptr</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3152">3152</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3152">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3153">3153</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3153">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3154">3154</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3154">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3155">3155</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3155">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3156">3156</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3156">      <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>Memory remap ERROR<span class="pl-pds">&quot;</span></span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3157">3157</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3157">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3158">3158</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3158">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3159">3159</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3159">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3160">3160</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3160">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3161">3161</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3161">    <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>Region request error<span class="pl-pds">&quot;</span></span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3162">3162</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3162">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3163">3163</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3163">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3164">3164</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3164"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3165">3165</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3165"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3166">3166</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3166"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3167">3167</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3167"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3168">3168</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3168"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3169">3169</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3169"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3170">3170</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3170"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3171">3171</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3171"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3172">3172</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3172"><span class="pl-c">/*! \brief    Device1Init</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3173">3173</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3173"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3174">3174</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3174"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3175">3175</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3175"><span class="pl-k">static</span> <span class="pl-k">int</span> <span class="pl-en">Device1Init</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3176">3176</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3176">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3177">3177</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3177">  <span class="pl-k">int</span>     Result = -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3178">3178</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3178">  UBYTE   Tmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3179">3179</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3179"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3180">3180</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3180">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01C14000, 0x190, (ULONG**)&amp;SYSCFG0);  <span class="pl-c">/* SYSCFG0 pointer    */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3181">3181</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3181">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01E2C000, 0x1C,  (ULONG**)&amp;SYSCFG1);  <span class="pl-c">/* SYSCFG1 pointer    */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3182">3182</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3182">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01F02000, 0x2854,(ULONG**)&amp;eHRPWM1);  <span class="pl-c">/* eHRPWM Pointer     */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3183">3183</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3183">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01F06000, 0x60,  (ULONG**)&amp;eCAP0);    <span class="pl-c">/* eCAP0 pointer      */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3184">3184</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3184">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01F07000, 0x60,  (ULONG**)&amp;eCAP1);    <span class="pl-c">/* eCAP1 pointer      */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3185">3185</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3185">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01F0D000, 0x80,  (ULONG**)&amp;TIMER64P3);<span class="pl-c">/* TIMER64P3 pointer  */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3186">3186</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3186">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01E26000, 0xD4,  (ULONG**)&amp;GPIO);     <span class="pl-c">/* GPIO pointer       */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3187">3187</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3187">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01E1A000, 0x1F8, (ULONG**)&amp;PLLC1);    <span class="pl-c">/* PLLC1 pointer      */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3188">3188</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3188">  <span class="pl-c1">GetPeriphealBasePtr</span>(0x01E27000, 0xA80, (ULONG**)&amp;PSC1);     <span class="pl-c">/* PSC1 pointer       */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3189">3189</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3189"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3190">3190</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3190">  Result  =  <span class="pl-c1">misc_register</span>(&amp;Device1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3191">3191</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3191">  <span class="pl-k">if</span> (Result)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3192">3192</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3192">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3193">3193</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3193">    <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> device register failed<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE1_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3194">3194</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3194">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3195">3195</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3195">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3196">3196</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3196">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3197">3197</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3197">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3198">3198</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3198">    <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> device register succes<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE1_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3199">3199</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3199">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3200">3200</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3200"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3201">3201</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3201">    <span class="pl-c1">iowrite32</span>(0x00000003, &amp;PSC1[0x291]); <span class="pl-c">/* Setup ePWM module power on  */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3202">3202</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3202">    <span class="pl-c1">iowrite32</span>(0x00000003, &amp;PSC1[0x48]);  <span class="pl-c">/* Eval the NEXT field         */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3203">3203</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3203"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3204">3204</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3204">    <span class="pl-c1">iowrite32</span>((<span class="pl-c1">ioread32</span>(&amp;PSC1[0x294]) | 0x00000003), &amp;PSC1[0x294]);<span class="pl-c">/* Turn PSC on for the eCAP module */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3205">3205</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3205">    <span class="pl-c1">iowrite32</span>((<span class="pl-c1">ioread32</span>(&amp;PSC1[0x48])  | 0x00000003), &amp;PSC1[0x48]); <span class="pl-c">/* Execute the next step           */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3206">3206</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3206"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3207">3207</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3207">    <span class="pl-k">for</span>(Tmp = <span class="pl-c1">0</span>; Tmp &lt; NO_OF_OUTPUT_PORTS; Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3208">3208</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3208">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3209">3209</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3209">      <span class="pl-c1">memset</span>(&amp;Motor[Tmp], <span class="pl-c1">0</span>, <span class="pl-k">sizeof</span>(MOTOR));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3210">3210</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3210"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3211">3211</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3211">      Motor[Tmp].<span class="pl-smi">TargetBrake</span>  =  COAST;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3212">3212</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3212">      Motor[Tmp].<span class="pl-smi">Pol</span>          =  <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3213">3213</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3213">      Motor[Tmp].<span class="pl-smi">Direction</span>    =  FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3214">3214</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3214">      Motor[Tmp].<span class="pl-smi">Type</span>         =  TYPE_NONE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3215">3215</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3215">      Motor[Tmp].<span class="pl-smi">State</span>        =  IDLE;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3216">3216</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3216">      Motor[Tmp].<span class="pl-smi">TargetState</span>  =  UNLIMITED_UNREG; <span class="pl-c">//default startup state</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3217">3217</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3217">      Motor[Tmp].<span class="pl-smi">Mutex</span>        =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3218">3218</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3218">      Motor[Tmp].<span class="pl-smi">BrakeAfter</span>   =  <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3219">3219</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3219"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3220">3220</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3220">      <span class="pl-c1">CLEARTachoArray</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3221">3221</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3221">      <span class="pl-c1">SETMotorType</span>(Tmp, TYPE_NONE);                  <span class="pl-c">//  Motor types can be: TYPE_TACHO, TYPE_NONE, TYPE_MINITACHO</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3222">3222</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3222">      <span class="pl-c1">SETAvgTachoCount</span>(Tmp, <span class="pl-c1">0</span>);                      <span class="pl-c">//  At initialisation speed is assumed to be zero</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3223">3223</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3223">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3224">3224</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3224"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3225">3225</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3225">    <span class="pl-c">/* Float the tacho inputs */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3226">3226</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3226">    <span class="pl-k">for</span>(Tmp = <span class="pl-c1">0</span>; Tmp &lt; NO_OF_OUTPUT_PORTS; Tmp++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3227">3227</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3227">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3228">3228</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3228">      <span class="pl-c1">OutputFloat</span>(Tmp,INT);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3229">3229</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3229">      <span class="pl-c1">OutputFloat</span>(Tmp,DIR);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3230">3230</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3230">      <span class="pl-c1">SetCoast</span>(Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3231">3231</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3231">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3232">3232</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3232"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3233">3233</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3233">    SyncMNos[<span class="pl-c1">0</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3234">3234</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3234">    SyncMNos[<span class="pl-c1">1</span>] = UNUSED_SYNC_MOTOR;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3235">3235</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3235"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3236">3236</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3236">    <span class="pl-c">/* Setup the PWM peripheals */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3237">3237</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3237">    SETUPPwmModules;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3238">3238</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3238"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3239">3239</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3239">    <span class="pl-c">/* Setup interrupt for the tacho int pins */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3240">3240</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3240">    <span class="pl-c1">SetGpioRisingIrq</span>(IRQA_PINNO, IntA);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3241">3241</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3241">    <span class="pl-c1">SetGpioRisingIrq</span>(IRQB_PINNO, IntB);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3242">3242</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3242">    <span class="pl-c1">SetGpioRisingIrq</span>(IRQC_PINNO, IntC);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3243">3243</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3243">    <span class="pl-c1">SetGpioRisingIrq</span>(IRQD_PINNO, IntD);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3244">3244</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3244">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3245">3245</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3245">  <span class="pl-k">return</span> (Result);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3246">3246</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3246">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3247">3247</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3247"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3248">3248</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3248"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3249">3249</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3249"><span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">Device1Exit</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3250">3250</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3250">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3251">3251</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3251">  <span class="pl-c1">hrtimer_cancel</span>(&amp;Device1Timer);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3252">3252</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3252">  <span class="pl-c1">misc_deregister</span>(&amp;Device1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3253">3253</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3253">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3254">3254</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3254">  <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> device unregistered<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE1_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3255">3255</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3255">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3256">3256</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3256">  <span class="pl-c1">iounmap</span>(SYSCFG0);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3257">3257</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3257">  <span class="pl-c1">iounmap</span>(SYSCFG1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3258">3258</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3258">  <span class="pl-c1">iounmap</span>(GPIO);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3259">3259</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3259">  <span class="pl-c1">iounmap</span>(eCAP0);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3260">3260</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3260">  <span class="pl-c1">iounmap</span>(eCAP1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3261">3261</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3261">  <span class="pl-c1">iounmap</span>(TIMER64P3);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3262">3262</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3262">  <span class="pl-c1">iounmap</span>(eHRPWM1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3263">3263</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3263">  <span class="pl-c1">iounmap</span>(PLLC1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3264">3264</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3264">  <span class="pl-c1">iounmap</span>(PSC1);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3265">3265</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3265">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3266">3266</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3266">  <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> memory unmapped<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE1_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3267">3267</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3267">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3268">3268</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3268">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3269">3269</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3269"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3270">3270</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3270"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3271">3271</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3271"><span class="pl-k">static</span>    <span class="pl-k">void</span>  __iomem *GpioBase;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3272">3272</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3272"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3273">3273</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3273"><span class="pl-k">void</span>      <span class="pl-en">SetGpio</span>(<span class="pl-k">int</span> Pin)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3274">3274</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3274">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3275">3275</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3275">  <span class="pl-k">int</span>     Tmp = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3276">3276</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3276">  <span class="pl-k">void</span>    __iomem *Reg;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3277">3277</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3277"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3278">3278</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3278">  <span class="pl-k">if</span> (Pin &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3279">3279</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3279">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3280">3280</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3280">    <span class="pl-k">while</span> ((MuxRegMap[Tmp].<span class="pl-smi">Pin</span> != -<span class="pl-c1">1</span>) &amp;&amp; (MuxRegMap[Tmp].<span class="pl-smi">Pin</span> != Pin))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3281">3281</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3281">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3282">3282</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3282">      Tmp++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3283">3283</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3283">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3284">3284</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3284">    <span class="pl-k">if</span> (MuxRegMap[Tmp].<span class="pl-smi">Pin</span> == Pin)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3285">3285</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3285">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3286">3286</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3286">      Reg   =  da8xx_syscfg0_base + 0x120 + (MuxRegMap[Tmp].<span class="pl-smi">MuxReg</span> &lt;&lt; <span class="pl-c1">2</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3287">3287</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3287"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3288">3288</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3288">      *(u32*)Reg &amp;=  MuxRegMap[Tmp].<span class="pl-smi">Mask</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3289">3289</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3289">      *(u32*)Reg |=  MuxRegMap[Tmp].<span class="pl-smi">Mode</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3290">3290</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3290"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3291">3291</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3291">      <span class="pl-k">if</span> (Pin &lt; NO_OF_GPIOS)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3292">3292</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3292">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3293">3293</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3293">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3294">3294</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3294">        <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>    GP<span class="pl-c1">%d</span>_<span class="pl-c1">%-2d</span>   0x<span class="pl-c1">%08X</span> and 0x<span class="pl-c1">%08X</span> or 0x<span class="pl-c1">%08X</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,(Pin &gt;&gt; <span class="pl-c1">4</span>),(Pin &amp; 0x0F),(u32)Reg, MuxRegMap[Tmp].<span class="pl-smi">Mask</span>, MuxRegMap[Tmp].<span class="pl-smi">Mode</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3295">3295</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3295">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3296">3296</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3296">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3297">3297</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3297">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3298">3298</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3298">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3299">3299</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3299">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3300">3300</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3300">        <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>   OUTPUT FUNCTION 0x<span class="pl-c1">%08X</span> and 0x<span class="pl-c1">%08X</span> or 0x<span class="pl-c1">%08X</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,(u32)Reg, MuxRegMap[Tmp].<span class="pl-smi">Mask</span>, MuxRegMap[Tmp].<span class="pl-smi">Mode</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3301">3301</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3301">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3302">3302</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3302">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3303">3303</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3303">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3304">3304</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3304">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3305">3305</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3305">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3306">3306</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3306">      <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>    GP<span class="pl-c1">%d</span>_<span class="pl-c1">%-2d</span> Not found (Const no. <span class="pl-c1">%d</span>, Tmp = <span class="pl-c1">%d</span>)<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,(Pin &gt;&gt; <span class="pl-c1">4</span>),(Pin &amp; 0x0F), Pin, Tmp);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3307">3307</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3307">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3308">3308</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3308">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3309">3309</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3309">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3310">3310</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3310"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3311">3311</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3311"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3312">3312</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3312"><span class="pl-k">void</span>      <span class="pl-en">InitGpio</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3313">3313</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3313">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3314">3314</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3314">  <span class="pl-k">int</span>     Port;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3315">3315</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3315">  <span class="pl-k">int</span>     Pin;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3316">3316</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3316"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3317">3317</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3317">  <span class="pl-c">// unlock</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3318">3318</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3318">  REGUnlock;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3319">3319</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3319"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3320">3320</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3320">  <span class="pl-k">for</span> (Port = <span class="pl-c1">0</span>;Port &lt; NO_OF_OUTPUT_PORTS;Port++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3321">3321</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3321">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3322">3322</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3322">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3323">3323</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3323">    <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  Output port <span class="pl-c1">%d</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,Port + <span class="pl-c1">1</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3324">3324</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3324">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3325">3325</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3325">    <span class="pl-k">for</span> (Pin = <span class="pl-c1">0</span>;Pin &lt; OUTPUT_PORT_PINS;Pin++)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3326">3326</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3326">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3327">3327</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3327">      <span class="pl-k">if</span> ((pOutputPortPin[Hw][(Port * OUTPUT_PORT_PINS) + Pin].<span class="pl-smi">Pin</span>) &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3328">3328</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3328">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3329">3329</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3329">        pOutputPortPin[Hw][(Port * OUTPUT_PORT_PINS) + Pin].<span class="pl-smi">pGpio</span>  =  (<span class="pl-k">struct</span> gpio_controller *__iomem)(GpioBase + ((pOutputPortPin[Hw][(Port * OUTPUT_PORT_PINS) + Pin].<span class="pl-smi">Pin</span> &gt;&gt; <span class="pl-c1">5</span>) * 0x28) + 0x10);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3330">3330</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3330">        pOutputPortPin[Hw][(Port * OUTPUT_PORT_PINS) + Pin].<span class="pl-smi">Mask</span>   =  (<span class="pl-c1">1</span> &lt;&lt; (pOutputPortPin[Hw][(Port * OUTPUT_PORT_PINS) + Pin].<span class="pl-smi">Pin</span> &amp; 0x1F));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3331">3331</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3331"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3332">3332</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3332">        <span class="pl-c1">SetGpio</span>(pOutputPortPin[Hw][(Port * OUTPUT_PORT_PINS) + Pin].<span class="pl-smi">Pin</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3333">3333</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3333">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3334">3334</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3334">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3335">3335</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3335">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3336">3336</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3336"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3337">3337</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3337">  <span class="pl-c">// lock</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3338">3338</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3338">  REGLock;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3339">3339</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3339">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3340">3340</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3340"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3341">3341</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3341"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3342">3342</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3342"><span class="pl-k">void</span>    <span class="pl-en">SetGpioRisingIrq</span>(UBYTE PinNo, <span class="pl-c1">irqreturn_t</span> (*IntFuncPtr)(<span class="pl-k">int</span>, <span class="pl-k">void</span> *))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3343">3343</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3343">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3344">3344</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3344">  UWORD Status;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3345">3345</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3345"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3346">3346</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3346">  Status = <span class="pl-c1">request_irq</span>(<span class="pl-c1">gpio_to_irq</span>(PinNo), IntFuncPtr, <span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">&quot;</span>PWM_DEVICE<span class="pl-pds">&quot;</span></span>, <span class="pl-c1">NULL</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3347">3347</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3347">  <span class="pl-k">if</span>(Status &lt; <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3348">3348</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3348">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3349">3349</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3349">    <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>error <span class="pl-c1">%d</span> requesting GPIO IRQ <span class="pl-c1">%d</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>, Status, PinNo);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3350">3350</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3350">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3351">3351</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3351">  <span class="pl-c1">set_irq_type</span>(<span class="pl-c1">gpio_to_irq</span>(PinNo), IRQ_TYPE_EDGE_RISING | IRQ_TYPE_EDGE_FALLING);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3352">3352</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3352">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3353">3353</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3353">  <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>.. done<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3354">3354</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3354">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3355">3355</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3355">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3356">3356</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3356"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3357">3357</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3357"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3358">3358</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3358"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3359">3359</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3359"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3360">3360</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3360"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3361">3361</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3361"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3362">3362</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3362"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3363">3363</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3363"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3364">3364</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3364"><span class="pl-c">/*! \brief    IntA</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3365">3365</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3365"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3366">3366</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3366"><span class="pl-c"> *  Tacho A interrupt function</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3367">3367</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3367"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3368">3368</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3368"><span class="pl-c"> *  Tacho count is incremented or decremented on both positive</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3369">3369</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3369"><span class="pl-c"> *  and negative edges of the INT signal.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3370">3370</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3370"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3371">3371</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3371"><span class="pl-c"> *  For each positive and negative edge of the INT tacho signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3372">3372</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3372"><span class="pl-c"> *  a timer is sampled. this is used to calculate the speed later on.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3373">3373</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3373"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3374">3374</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3374"><span class="pl-c"> *  DirChgPtr is implemented for ensuring that there is enough</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3375">3375</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3375"><span class="pl-c"> *  samples in the same direction to calculate a speed.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3376">3376</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3376"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3377">3377</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3377"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3378">3378</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3378"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntA</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3379">3379</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3379">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3380">3380</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3380">  UBYTE   TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3381">3381</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3381">  ULONG   IntAState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3382">3382</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3382">  ULONG   DirAState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3383">3383</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3383">  ULONG   Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3384">3384</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3384"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3385">3385</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3385">  <span class="pl-c">// Sample all necessary items as fast as possible</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3386">3386</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3386">  IntAState  =  READIntA;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3387">3387</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3387">  DirAState  =  READDirA;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3388">3388</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3388">  Timer      =  FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3389">3389</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3389"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3390">3390</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3390">  TmpPtr = (TachoSamples[<span class="pl-c1">0</span>].<span class="pl-smi">ArrayPtr</span> + <span class="pl-c1">1</span>) &amp; (NO_OF_TACHO_SAMPLES-<span class="pl-c1">1</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3391">3391</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3391">  TachoSamples[<span class="pl-c1">0</span>].<span class="pl-smi">TachoArray</span>[TmpPtr]  =  Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3392">3392</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3392">  TachoSamples[<span class="pl-c1">0</span>].<span class="pl-smi">ArrayPtr</span>            =  TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3393">3393</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3393"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3394">3394</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3394">  <span class="pl-k">if</span> ((<span class="pl-c1">35</span> &lt; Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Speed</span>) || (-<span class="pl-c1">35</span> &gt; Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Speed</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3395">3395</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3395">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3396">3396</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3396">    <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3397">3397</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3397">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3398">3398</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3398">      (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3399">3399</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3399">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3400">3400</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3400">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3401">3401</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3401">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3402">3402</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3402">      (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3403">3403</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3403">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3404">3404</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3404">    <span class="pl-k">if</span> (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">0</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3405">3405</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3405">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3406">3406</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3406">      Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3407">3407</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3407">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3408">3408</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3408">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3409">3409</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3409">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3410">3410</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3410">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3411">3411</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3411">    <span class="pl-k">if</span> (IntAState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3412">3412</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3412">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3413">3413</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3413">      <span class="pl-k">if</span>(DirAState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3414">3414</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3414">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3415">3415</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3415">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3416">3416</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3416">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3417">3417</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3417">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">0</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3418">3418</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3418">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3419">3419</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3419">            Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3420">3420</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3420">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3421">3421</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3421">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3422">3422</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3422">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3423">3423</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3423">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3424">3424</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3424">          Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3425">3425</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3425">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3426">3426</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3426">        (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3427">3427</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3427">        Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3428">3428</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3428">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3429">3429</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3429">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3430">3430</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3430">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3431">3431</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3431">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3432">3432</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3432">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3433">3433</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3433">          TachoSamples[<span class="pl-c1">0</span>].<span class="pl-smi">TachoArray</span>[TmpPtr] = Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3434">3434</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3434">          TachoSamples[<span class="pl-c1">0</span>].<span class="pl-smi">ArrayPtr</span> = TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3435">3435</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3435">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">0</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3436">3436</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3436">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3437">3437</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3437">            Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3438">3438</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3438">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3439">3439</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3439">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3440">3440</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3440">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3441">3441</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3441">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3442">3442</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3442">          Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3443">3443</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3443">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3444">3444</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3444">        (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3445">3445</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3445">        Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3446">3446</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3446">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3447">3447</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3447">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3448">3448</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3448">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3449">3449</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3449">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3450">3450</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3450">      <span class="pl-k">if</span>(DirAState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3451">3451</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3451">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3452">3452</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3452">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3453">3453</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3453">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3454">3454</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3454">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">0</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3455">3455</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3455">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3456">3456</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3456">            Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3457">3457</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3457">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3458">3458</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3458">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3459">3459</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3459">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3460">3460</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3460">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3461">3461</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3461">          Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3462">3462</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3462">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3463">3463</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3463">        (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3464">3464</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3464">        Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3465">3465</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3465">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3466">3466</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3466">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3467">3467</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3467">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3468">3468</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3468">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3469">3469</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3469">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3470">3470</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3470">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">0</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3471">3471</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3471">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3472">3472</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3472">            Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3473">3473</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3473">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3474">3474</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3474">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3475">3475</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3475">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3476">3476</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3476">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3477">3477</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3477">          Motor[<span class="pl-c1">0</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3478">3478</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3478">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3479">3479</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3479">        (Motor[<span class="pl-c1">0</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3480">3480</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3480">        Motor[<span class="pl-c1">0</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3481">3481</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3481">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3482">3482</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3482">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3483">3483</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3483">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3484">3484</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3484">  <span class="pl-k">return</span> IRQ_HANDLED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3485">3485</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3485">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3486">3486</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3486"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3487">3487</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3487"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3488">3488</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3488"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntB</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3489">3489</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3489">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3490">3490</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3490">  UBYTE   <span class="pl-k">volatile</span> TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3491">3491</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3491">  ULONG   <span class="pl-k">volatile</span> IntBState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3492">3492</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3492">  ULONG   <span class="pl-k">volatile</span> DirBState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3493">3493</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3493">  ULONG   <span class="pl-k">volatile</span> Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3494">3494</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3494"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3495">3495</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3495">  <span class="pl-c">// Sample all necessary items as fast as possible</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3496">3496</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3496">  IntBState  =  READIntB;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3497">3497</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3497">  DirBState  =  READDirB;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3498">3498</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3498">  Timer      =  FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3499">3499</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3499"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3500">3500</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3500">  TmpPtr = (TachoSamples[<span class="pl-c1">1</span>].<span class="pl-smi">ArrayPtr</span> + <span class="pl-c1">1</span>) &amp; (NO_OF_TACHO_SAMPLES-<span class="pl-c1">1</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3501">3501</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3501">  TachoSamples[<span class="pl-c1">1</span>].<span class="pl-smi">TachoArray</span>[TmpPtr]  =  Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3502">3502</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3502">  TachoSamples[<span class="pl-c1">1</span>].<span class="pl-smi">ArrayPtr</span>            =  TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3503">3503</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3503"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3504">3504</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3504">  <span class="pl-k">if</span> ((<span class="pl-c1">35</span> &lt; Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Speed</span>) || (-<span class="pl-c1">35</span> &gt; Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Speed</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3505">3505</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3505">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3506">3506</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3506">    <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3507">3507</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3507">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3508">3508</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3508">      (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3509">3509</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3509">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3510">3510</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3510">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3511">3511</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3511">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3512">3512</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3512">      (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3513">3513</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3513">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3514">3514</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3514"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3515">3515</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3515">    <span class="pl-k">if</span> (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">1</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3516">3516</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3516">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3517">3517</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3517">      Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3518">3518</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3518">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3519">3519</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3519">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3520">3520</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3520">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3521">3521</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3521">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3522">3522</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3522">    <span class="pl-k">if</span> (IntBState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3523">3523</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3523">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3524">3524</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3524">      <span class="pl-k">if</span>(DirBState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3525">3525</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3525">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3526">3526</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3526">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3527">3527</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3527">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3528">3528</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3528">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">1</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3529">3529</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3529">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3530">3530</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3530">            Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3531">3531</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3531">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3532">3532</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3532">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3533">3533</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3533">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3534">3534</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3534">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3535">3535</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3535">          Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3536">3536</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3536">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3537">3537</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3537">        (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3538">3538</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3538">        Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3539">3539</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3539">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3540">3540</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3540">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3541">3541</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3541">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3542">3542</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3542">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3543">3543</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3543">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3544">3544</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3544">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">1</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3545">3545</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3545">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3546">3546</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3546">            Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3547">3547</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3547">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3548">3548</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3548">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3549">3549</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3549">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3550">3550</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3550">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3551">3551</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3551">          Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3552">3552</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3552">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3553">3553</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3553">        (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3554">3554</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3554">        Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3555">3555</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3555">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3556">3556</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3556">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3557">3557</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3557">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3558">3558</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3558">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3559">3559</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3559">      <span class="pl-k">if</span>(DirBState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3560">3560</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3560">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3561">3561</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3561">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3562">3562</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3562">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3563">3563</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3563">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">1</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3564">3564</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3564">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3565">3565</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3565">            Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3566">3566</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3566">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3567">3567</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3567">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3568">3568</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3568">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3569">3569</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3569">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3570">3570</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3570">          Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3571">3571</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3571">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3572">3572</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3572">        (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3573">3573</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3573">        Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3574">3574</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3574">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3575">3575</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3575">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3576">3576</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3576">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3577">3577</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3577">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3578">3578</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3578">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3579">3579</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3579">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">1</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3580">3580</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3580">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3581">3581</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3581">            Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3582">3582</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3582">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3583">3583</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3583">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3584">3584</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3584">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3585">3585</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3585">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3586">3586</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3586">          Motor[<span class="pl-c1">1</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3587">3587</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3587">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3588">3588</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3588">        (Motor[<span class="pl-c1">1</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3589">3589</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3589">        Motor[<span class="pl-c1">1</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3590">3590</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3590">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3591">3591</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3591">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3592">3592</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3592">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3593">3593</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3593">  <span class="pl-k">return</span> IRQ_HANDLED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3594">3594</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3594">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3595">3595</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3595"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3596">3596</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3596"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3597">3597</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3597"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntC</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3598">3598</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3598">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3599">3599</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3599">  UBYTE   TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3600">3600</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3600">  ULONG   IntCState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3601">3601</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3601">  ULONG   DirCState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3602">3602</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3602">  ULONG   Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3603">3603</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3603"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3604">3604</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3604">  <span class="pl-c">// Sample all necessary items as fast as possible</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3605">3605</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3605">  IntCState  =  READIntC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3606">3606</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3606">  DirCState  =  READDirC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3607">3607</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3607">  Timer      =  FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3608">3608</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3608"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3609">3609</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3609">  TmpPtr = (TachoSamples[<span class="pl-c1">2</span>].<span class="pl-smi">ArrayPtr</span> + <span class="pl-c1">1</span>) &amp; (NO_OF_TACHO_SAMPLES-<span class="pl-c1">1</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3610">3610</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3610">  TachoSamples[<span class="pl-c1">2</span>].<span class="pl-smi">TachoArray</span>[TmpPtr]  =  Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3611">3611</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3611">  TachoSamples[<span class="pl-c1">2</span>].<span class="pl-smi">ArrayPtr</span>            =  TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3612">3612</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3612"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3613">3613</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3613">  <span class="pl-k">if</span> ((<span class="pl-c1">35</span> &lt; Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Speed</span>) || (-<span class="pl-c1">35</span> &gt; Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Speed</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3614">3614</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3614">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3615">3615</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3615">    <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3616">3616</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3616">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3617">3617</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3617">      (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3618">3618</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3618">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3619">3619</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3619">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3620">3620</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3620">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3621">3621</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3621">      (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3622">3622</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3622">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3623">3623</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3623">    <span class="pl-k">if</span> (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">2</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3624">3624</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3624">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3625">3625</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3625">      Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3626">3626</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3626">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3627">3627</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3627">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3628">3628</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3628">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3629">3629</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3629">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3630">3630</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3630">    <span class="pl-k">if</span> (IntCState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3631">3631</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3631">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3632">3632</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3632">      <span class="pl-k">if</span>(DirCState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3633">3633</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3633">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3634">3634</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3634">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3635">3635</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3635">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3636">3636</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3636">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">2</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3637">3637</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3637">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3638">3638</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3638">            Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3639">3639</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3639">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3640">3640</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3640">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3641">3641</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3641">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3642">3642</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3642">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3643">3643</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3643">          Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3644">3644</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3644">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3645">3645</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3645">        (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3646">3646</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3646">        Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3647">3647</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3647">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3648">3648</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3648">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3649">3649</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3649">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3650">3650</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3650">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3651">3651</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3651">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3652">3652</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3652">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">2</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3653">3653</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3653">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3654">3654</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3654">            Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3655">3655</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3655">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3656">3656</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3656">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3657">3657</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3657">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3658">3658</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3658">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3659">3659</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3659">          Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3660">3660</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3660">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3661">3661</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3661">        (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3662">3662</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3662">        Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3663">3663</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3663">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3664">3664</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3664">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3665">3665</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3665">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3666">3666</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3666">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3667">3667</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3667">      <span class="pl-k">if</span>(DirCState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3668">3668</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3668">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3669">3669</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3669">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3670">3670</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3670">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3671">3671</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3671">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">2</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3672">3672</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3672">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3673">3673</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3673">            Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3674">3674</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3674">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3675">3675</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3675">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3676">3676</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3676">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3677">3677</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3677">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3678">3678</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3678">          Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3679">3679</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3679">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3680">3680</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3680">        (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3681">3681</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3681">        Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3682">3682</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3682">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3683">3683</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3683">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3684">3684</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3684">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3685">3685</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3685">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3686">3686</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3686">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3687">3687</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3687">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">2</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3688">3688</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3688">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3689">3689</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3689">            Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3690">3690</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3690">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3691">3691</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3691">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3692">3692</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3692">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3693">3693</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3693">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3694">3694</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3694">          Motor[<span class="pl-c1">2</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3695">3695</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3695">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3696">3696</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3696">        (Motor[<span class="pl-c1">2</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3697">3697</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3697">        Motor[<span class="pl-c1">2</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3698">3698</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3698">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3699">3699</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3699">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3700">3700</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3700">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3701">3701</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3701">  <span class="pl-k">return</span> IRQ_HANDLED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3702">3702</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3702">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3703">3703</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3703"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3704">3704</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3704"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3705">3705</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3705"><span class="pl-k">static</span>    <span class="pl-c1">irqreturn_t</span> <span class="pl-en">IntD</span> (<span class="pl-k">int</span> irq, <span class="pl-k">void</span> * dev)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3706">3706</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3706">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3707">3707</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3707">  UBYTE   TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3708">3708</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3708">  ULONG   IntDState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3709">3709</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3709">  ULONG   DirDState;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3710">3710</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3710">  ULONG   Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3711">3711</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3711"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3712">3712</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3712">  <span class="pl-c">// Sample all necessary items as fast as possible</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3713">3713</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3713">  IntDState  =  READIntD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3714">3714</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3714">  DirDState  =  READDirD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3715">3715</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3715">  Timer      =  FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3716">3716</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3716"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3717">3717</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3717">  TmpPtr = (TachoSamples[<span class="pl-c1">3</span>].<span class="pl-smi">ArrayPtr</span> + <span class="pl-c1">1</span>) &amp; (NO_OF_TACHO_SAMPLES-<span class="pl-c1">1</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3718">3718</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3718">  TachoSamples[<span class="pl-c1">3</span>].<span class="pl-smi">TachoArray</span>[TmpPtr]  =  Timer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3719">3719</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3719">  TachoSamples[<span class="pl-c1">3</span>].<span class="pl-smi">ArrayPtr</span>            =  TmpPtr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3720">3720</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3720"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3721">3721</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3721">  <span class="pl-k">if</span> ((<span class="pl-c1">35</span> &lt; Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Speed</span>) || (-<span class="pl-c1">35</span> &gt; Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Speed</span>))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3722">3722</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3722">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3723">3723</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3723">    <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3724">3724</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3724">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3725">3725</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3725">      (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3726">3726</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3726">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3727">3727</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3727">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3728">3728</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3728">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3729">3729</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3729">      (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3730">3730</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3730">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3731">3731</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3731">    <span class="pl-k">if</span> (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">3</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3732">3732</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3732">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3733">3733</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3733">      Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3734">3734</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3734">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3735">3735</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3735">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3736">3736</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3736">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3737">3737</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3737">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3738">3738</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3738">    <span class="pl-k">if</span> (IntDState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3739">3739</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3739">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3740">3740</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3740">      <span class="pl-k">if</span>(DirDState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3741">3741</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3741">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3742">3742</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3742">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3743">3743</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3743">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3744">3744</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3744">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">3</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3745">3745</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3745">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3746">3746</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3746">            Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3747">3747</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3747">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3748">3748</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3748">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3749">3749</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3749">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3750">3750</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3750">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3751">3751</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3751">          Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3752">3752</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3752">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3753">3753</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3753">        (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3754">3754</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3754">        Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3755">3755</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3755">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3756">3756</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3756">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3757">3757</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3757">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3758">3758</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3758">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3759">3759</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3759">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3760">3760</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3760">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">3</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3761">3761</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3761">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3762">3762</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3762">            Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3763">3763</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3763">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3764">3764</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3764">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3765">3765</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3765">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3766">3766</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3766">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3767">3767</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3767">          Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3768">3768</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3768">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3769">3769</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3769">        (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3770">3770</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3770">        Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3771">3771</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3771">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3772">3772</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3772">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3773">3773</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3773">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3774">3774</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3774">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3775">3775</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3775">      <span class="pl-k">if</span>(DirDState)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3776">3776</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3776">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3777">3777</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3777">        <span class="pl-k">if</span> (BACKWARD == Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3778">3778</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3778">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3779">3779</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3779">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">3</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3780">3780</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3780">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3781">3781</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3781">            Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3782">3782</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3782">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3783">3783</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3783">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3784">3784</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3784">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3785">3785</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3785">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3786">3786</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3786">          Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3787">3787</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3787">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3788">3788</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3788">        (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">IrqTacho</span>)--;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3789">3789</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3789">        Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span> = BACKWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3790">3790</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3790">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3791">3791</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3791">      <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3792">3792</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3792">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3793">3793</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3793">        <span class="pl-k">if</span> (FORWARD == Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3794">3794</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3794">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3795">3795</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3795">          <span class="pl-k">if</span> (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> &lt; SamplesPerSpeed[<span class="pl-c1">3</span>][SAMPLES_ABOVE_SPEED_75])</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3796">3796</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3796">          {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3797">3797</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3797">            Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span>++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3798">3798</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3798">          }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3799">3799</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3799">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3800">3800</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3800">        <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3801">3801</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3801">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3802">3802</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3802">          Motor[<span class="pl-c1">3</span>].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3803">3803</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3803">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3804">3804</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3804">        (Motor[<span class="pl-c1">3</span>].<span class="pl-smi">IrqTacho</span>)++;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3805">3805</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3805">        Motor[<span class="pl-c1">3</span>].<span class="pl-smi">Direction</span> = FORWARD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3806">3806</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3806">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3807">3807</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3807">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3808">3808</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3808">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3809">3809</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3809">  <span class="pl-k">return</span> IRQ_HANDLED;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3810">3810</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3810">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3811">3811</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3811"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3812">3812</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3812"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3813">3813</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3813"><span class="pl-c">/*! \page PwmModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3814">3814</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3814"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3815">3815</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3815"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3816">3816</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3816"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3817">3817</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3817"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3818">3818</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3818"><span class="pl-c">/*! \brief    dCalculateSpeed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3819">3819</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3819"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3820">3820</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3820"><span class="pl-c"> *  - Calculates the actual speed for a motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3821">3821</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3821"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3822">3822</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3822"><span class="pl-c"> *  - Returns TRUE when a new speed has been calculated, FALSE if otherwise</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3823">3823</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3823"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3824">3824</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3824"><span class="pl-c"> *  - Time is sampled every edge on the tacho</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3825">3825</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3825"><span class="pl-c"> *      - Timer used is 64bit timer plus (P3) module (dual 32bit un-chained mode)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3826">3826</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3826"><span class="pl-c"> *      - 64bit timer is running 33Mhz (24Mhz (Osc) * 22 (Multiplier) / 2 (Post divider) / 2 (DIV2)) / 4 (T64 prescaler)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3827">3827</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3827"><span class="pl-c"> *      - When reading the timer it is divided by 256 =&gt; timer is a factor 256 slower</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3828">3828</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3828"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3829">3829</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3829"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3830">3830</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3830"><span class="pl-c"> *  - Tacho counter is updated on every edge of the tacho INTx pin signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3831">3831</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3831"><span class="pl-c"> *  - Time capture is updated on every edge of the tacho INTx pin signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3832">3832</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3832"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3833">3833</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3833"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3834">3834</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3834"><span class="pl-c"> *  - Speed is calculated from the following parameters</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3835">3835</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3835"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3836">3836</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3836"><span class="pl-c"> *      - Time is measured edge to edge of the tacho interrupt pin. Average of time is always minimum 2 pulses</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3837">3837</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3837"><span class="pl-c"> *        (1 high + 1 low period or 1 low + 1 high period) because the duty of the high and low period of the</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3838">3838</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3838"><span class="pl-c"> *        tacho pulses are not always 50%.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3839">3839</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3839"><span class="pl-c"> *        - Average of the large motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3840">3840</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3840"><span class="pl-c"> *          - Above speed 80 it is:          64 samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3841">3841</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3841"><span class="pl-c"> *          - Between speed 60 - 80 it is:   32 samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3842">3842</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3842"><span class="pl-c"> *          - Between speed 40 - 60 it is:   16 samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3843">3843</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3843"><span class="pl-c"> *          - below speed 40 it is:           4 samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3844">3844</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3844"><span class="pl-c"> *        - Average of the medium motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3845">3845</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3845"><span class="pl-c"> *          - Above speed 80 it is:          16 samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3846">3846</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3846"><span class="pl-c"> *          - Between speed 60 - 80 it is:    8 samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3847">3847</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3847"><span class="pl-c"> *          - Between speed 40 - 60 it is:    4 samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3848">3848</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3848"><span class="pl-c"> *          - below speed 40 it is:           2 sample</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3849">3849</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3849"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3850">3850</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3850"><span class="pl-c"> *      - Number of samples is always determined based on 1 sample meaning 1 low period nor 1 high period,</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3851">3851</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3851"><span class="pl-c"> *        this is to enable fast adoption to changes in speed. Medium motor has the critical timing because</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3852">3852</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3852"><span class="pl-c"> *        it can change speed and direction very fast.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3853">3853</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3853"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3854">3854</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3854"><span class="pl-c"> *      - Large Motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3855">3855</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3855"><span class="pl-c"> *        - Maximum speed of the Large motor is approximately 2mS per tacho pulse (low + high period)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3856">3856</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3856"><span class="pl-c"> *          resulting in minimum timer value of: 2mS / (1/(33MHz / 256)) = 256 T64 timer ticks.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3857">3857</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3857"><span class="pl-c"> *          Because 1 sample is based on only half a period minimum speed is 256/2 = 128.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3858">3858</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3858"><span class="pl-c"> *        - Minimum speed of the large motor is a factor of 100 less than max. speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3859">3859</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3859"><span class="pl-c"> *          max. speed timer ticks * 100 =&gt; 256 * 100 = 25600 T64 timer ticks</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3860">3860</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3860"><span class="pl-c"> *          Because 1 sample is based on only half a period minimum speed is 25600/2 = 12800.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3861">3861</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3861"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3862">3862</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3862"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3863">3863</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3863"><span class="pl-c"> *      - Medium Motor</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3864">3864</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3864"><span class="pl-c"> *        - Maximum speed of the medium motor is approximately 1,25mS per tacho pulse (low + high period)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3865">3865</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3865"><span class="pl-c"> *          resulting in minimum timer value og: 1,25mS / (1/(33MHz / 256)) = 162 (approximately)</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3866">3866</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3866"><span class="pl-c"> *          Because 1 sample is based on only half a period minimum speed is 162/2 = 81.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3867">3867</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3867"><span class="pl-c"> *        - Minimum speed of the medium motor is a factor of 100 less than max. speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3868">3868</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3868"><span class="pl-c"> *          max. speed timer ticks * 100 =&gt; 162 * 100 = 16200 T64 timer ticks</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3869">3869</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3869"><span class="pl-c"> *          Because 1 sample is based on only half a period minimum speed is 16200/2 = 8100.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3870">3870</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3870"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3871">3871</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3871"><span class="pl-c"> *      - Actual speed is then calculated as:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3872">3872</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3872"><span class="pl-c"> *        - Medium motor:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3873">3873</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3873"><span class="pl-c"> *          8100 * number of samples / actual time elapsed for number of samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3874">3874</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3874"><span class="pl-c"> *        - Large motor:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3875">3875</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3875"><span class="pl-c"> *          12800 * number of samples / actual time elapsed for number of samples</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3876">3876</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3876"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3877">3877</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3877"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3878">3878</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3878"><span class="pl-c"> *  - Parameters:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3879">3879</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3879"><span class="pl-c"> *    - Input:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3880">3880</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3880"><span class="pl-c"> *      - No        : Motor output number</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3881">3881</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3881"><span class="pl-c"> *      - *pSpeed   : Pointer to the speed value</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3882">3882</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3882"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3883">3883</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3883"><span class="pl-c"> *    - Output:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3884">3884</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3884"><span class="pl-c"> *      - Status    : Indication of new speed available or not</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3885">3885</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3885"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3886">3886</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3886"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3887">3887</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3887"><span class="pl-c"> *  - Tacho pulse examples:</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3888">3888</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3888"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3889">3889</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3889"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3890">3890</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3890"><span class="pl-c"> *    - Normal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3891">3891</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3891"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3892">3892</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3892"><span class="pl-c"> *      ----       ------       ------       ------</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3893">3893</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3893"><span class="pl-c"> *          |     |      |     |      |     |      |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3894">3894</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3894"><span class="pl-c"> *          |     |      |     |      |     |      |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3895">3895</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3895"><span class="pl-c"> *          -------      -------      -------      --- DIRx signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3896">3896</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3896"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3897">3897</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3897"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3898">3898</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3898"><span class="pl-c"> *         ----       ------       ------       ------ INTx signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3899">3899</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3899"><span class="pl-c"> *             |     |      |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3900">3900</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3900"><span class="pl-c"> *             |     |      |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3901">3901</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3901"><span class="pl-c"> *             -------      -------      -------</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3902">3902</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3902"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3903">3903</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3903"><span class="pl-c"> *             ^     ^      ^     ^      ^     ^</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3904">3904</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3904"><span class="pl-c"> *             |     |      |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3905">3905</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3905"><span class="pl-c"> *             |   Timer    |   Timer    |   Timer</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3906">3906</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3906"><span class="pl-c"> *             |     +      |     +      |     +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3907">3907</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3907"><span class="pl-c"> *             |  Counter   |  Counter   |  Counter</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3908">3908</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3908"><span class="pl-c"> *             |            |            |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3909">3909</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3909"><span class="pl-c"> *           Timer        Timer        Timer</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3910">3910</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3910"><span class="pl-c"> *             +            +            +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3911">3911</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3911"><span class="pl-c"> *          Counter      Counter      Counter</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3912">3912</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3912"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3913">3913</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3913"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3914">3914</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3914"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3915">3915</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3915"><span class="pl-c"> *    - Direction change</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3916">3916</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3916"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3917">3917</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3917"><span class="pl-c"> *      DirChgPtr variable is used to indicate how many timer samples have been sampled</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3918">3918</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3918"><span class="pl-c"> *      since direction has been changed. DirChgPtr is set to 0 when tacho interrupt detects</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3919">3919</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3919"><span class="pl-c"> *      direction change and then it is counted up for every timer sample. So when DirChgPtr</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3920">3920</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3920"><span class="pl-c"> *      has the value of 2 then there must be 2 timer samples in the the same direction</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3921">3921</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3921"><span class="pl-c"> *      available.</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3922">3922</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3922"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3923">3923</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3923"><span class="pl-c"> *      ----       ------       ------       ------       ---</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3924">3924</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3924"><span class="pl-c"> *          |     |      |     |      |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3925">3925</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3925"><span class="pl-c"> *          |     |      |     |      |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3926">3926</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3926"><span class="pl-c"> *          -------      -------      -------      -------   DIRx signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3927">3927</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3927"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3928">3928</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3928"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3929">3929</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3929"><span class="pl-c"> *       ------       -------------       ------       ------INTx signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3930">3930</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3930"><span class="pl-c"> *             |     |             |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3931">3931</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3931"><span class="pl-c"> *             |     |             |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3932">3932</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3932"><span class="pl-c"> *             -------             -------      -------</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3933">3933</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3933"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3934">3934</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3934"><span class="pl-c"> *             ^     ^             ^     ^      ^     ^</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3935">3935</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3935"><span class="pl-c"> *             |     |             |     |      |     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3936">3936</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3936"><span class="pl-c"> *           Timer   |           Timer   |    Timer   |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3937">3937</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3937"><span class="pl-c"> *             +     |             +     |      +     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3938">3938</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3938"><span class="pl-c"> *          Counter  |          Counter  |   Counter  |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3939">3939</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3939"><span class="pl-c"> *             +     |             +     |      +     |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3940">3940</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3940"><span class="pl-c"> *       DirChgPtr++ |       DirChgPtr=0 |DirChgPtr++ |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3941">3941</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3941"><span class="pl-c"> *                 Timer               Timer        Timer</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3942">3942</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3942"><span class="pl-c"> *                   +                   +            +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3943">3943</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3943"><span class="pl-c"> *                Counter             Counter      Counter</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3944">3944</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3944"><span class="pl-c"> *                   +                   +            +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3945">3945</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3945"><span class="pl-c"> *               DirChgPtr++         DirChgPtr++  DirChgPtr++</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3946">3946</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3946"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3947">3947</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3947"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3948">3948</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3948"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3949">3949</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3949"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3950">3950</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3950"><span class="pl-c"> *      ----       ------             ------        ----</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3951">3951</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3951"><span class="pl-c"> *          |     |      |           |      |      |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3952">3952</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3952"><span class="pl-c"> *          |     |      |           |      |      |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3953">3953</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3953"><span class="pl-c"> *          -------      -------------       -------          DIRx signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3954">3954</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3954"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3955">3955</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3955"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3956">3956</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3956"><span class="pl-c"> *       ------       ------       ------       ------        INTx signal</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3957">3957</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3957"><span class="pl-c"> *             |     |      |     |      |     |      |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3958">3958</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3958"><span class="pl-c"> *             |     |      |     |      |     |      |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3959">3959</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3959"><span class="pl-c"> *             -------      -------      -------       ----</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3960">3960</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3960"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3961">3961</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3961"><span class="pl-c"> *             ^     ^      ^     ^      ^     ^      ^</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3962">3962</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3962"><span class="pl-c"> *             |     |      |     |      |     |      |</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3963">3963</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3963"><span class="pl-c"> *           Timer   |    Timer   |    Timer   |    Timer</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3964">3964</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3964"><span class="pl-c"> *             +     |      +     |      +     |      +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3965">3965</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3965"><span class="pl-c"> *          Counter  |   Counter  |   Counter  |   Counter</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3966">3966</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3966"><span class="pl-c"> *             +     |      +     |      +     |      +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3967">3967</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3967"><span class="pl-c"> *        DirChgPtr++| DirChgPtr++| DirChgPtr++| DirChgPtr++</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3968">3968</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3968"><span class="pl-c"> *                 Timer        Timer        Timer</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3969">3969</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3969"><span class="pl-c"> *                   +            +            +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3970">3970</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3970"><span class="pl-c"> *                Counter      Counter      Counter</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3971">3971</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3971"><span class="pl-c"> *                   +            +            +</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3972">3972</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3972"><span class="pl-c"> *               DirChgPtr++  DirChgPtr=0  DirChgPtr++</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3973">3973</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3973"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3974">3974</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3974"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3975">3975</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3975"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3976">3976</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3976"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3977">3977</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3977"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3978">3978</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3978">UBYTE     <span class="pl-en">dCalculateSpeed</span>(UBYTE No, SBYTE *pSpeed)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3979">3979</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3979">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3980">3980</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3980"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3981">3981</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3981">  ULONG Tmp1, Tmp2;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3982">3982</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3982">  ULONG Diff;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3983">3983</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3983">  UBYTE <span class="pl-c1">Ptr</span>, Status;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3984">3984</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3984">  SWORD Speed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3985">3985</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3985"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3986">3986</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3986">  Status  = <span class="pl-c1">FALSE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3987">3987</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3987"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3988">3988</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3988">  <span class="pl-c1">Ptr</span>     = TachoSamples[No].<span class="pl-smi">ArrayPtr</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3989">3989</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3989"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3990">3990</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3990">  <span class="pl-k">if</span> (Motor[No].<span class="pl-smi">DirChgPtr</span> &gt;= <span class="pl-c1">1</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3991">3991</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3991">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3992">3992</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3992">    Diff = (((TachoSamples[No].<span class="pl-smi">TachoArray</span>[<span class="pl-c1">Ptr</span>])-(TachoSamples[No].<span class="pl-smi">TachoArray</span>[((<span class="pl-c1">Ptr</span> - <span class="pl-c1">1</span>) &amp; (NO_OF_TACHO_SAMPLES - <span class="pl-c1">1</span>))])) &amp; 0x00FFFFFF);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3993">3993</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3993">    <span class="pl-k">if</span> (Diff)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3994">3994</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3994">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3995">3995</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3995">      <span class="pl-c1">SETAvgTachoCount</span>(No, (ULONG)((CountsPerPulse[No]/Diff) &amp; 0x00FFFFFF));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3996">3996</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3996">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3997">3997</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3997">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3998">3998</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3998">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L3999">3999</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC3999">      <span class="pl-c1">SETAvgTachoCount</span>(No, (ULONG)<span class="pl-c1">1</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4000">4000</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4000">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4001">4001</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4001">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4002">4002</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4002"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4003">4003</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4003">  Speed   = *pSpeed;    <span class="pl-c">// Maintain old speed if not changed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4004">4004</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4004">  Tmp1    = TachoSamples[No].<span class="pl-smi">TachoArray</span>[<span class="pl-c1">Ptr</span>];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4005">4005</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4005">  Tmp2    = TachoSamples[No].<span class="pl-smi">TachoArray</span>[((<span class="pl-c1">Ptr</span> - AVG_TACHO_COUNTS[No]) &amp; (NO_OF_TACHO_SAMPLES - <span class="pl-c1">1</span>))];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4006">4006</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4006"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4007">4007</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4007">  <span class="pl-k">if</span> ((<span class="pl-c1">Ptr</span> != TachoSamples[No].<span class="pl-smi">ArrayPtrOld</span>) &amp;&amp; (Motor[No].<span class="pl-smi">DirChgPtr</span> &gt;= AVG_TACHO_COUNTS[No]))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4008">4008</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4008">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4009">4009</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4009"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4010">4010</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4010">    Status                        = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4011">4011</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4011">    TimeOutSpeed0[No]             = Tmp1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4012">4012</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4012">    TachoSamples[No].<span class="pl-smi">ArrayPtrOld</span>  = <span class="pl-c1">Ptr</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4013">4013</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4013"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4014">4014</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4014">    Diff = ((Tmp1-Tmp2) &amp; 0x00FFFFFF);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4015">4015</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4015">    <span class="pl-k">if</span> (Diff)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4016">4016</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4016">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4017">4017</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4017">      Speed = (SWORD)((ULONG)(AVG_COUNTS[No])/(ULONG)Diff);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4018">4018</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4018">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4019">4019</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4019">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4020">4020</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4020">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4021">4021</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4021">      <span class="pl-c">// Safety check</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4022">4022</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4022">      Speed = <span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4023">4023</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4023">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4024">4024</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4024"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4025">4025</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4025">    <span class="pl-k">if</span> (Speed &gt; <span class="pl-c1">100</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4026">4026</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4026">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4027">4027</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4027">      Speed = <span class="pl-c1">100</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4028">4028</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4028">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4029">4029</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4029"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4030">4030</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4030">    <span class="pl-k">if</span> (BACKWARD == Motor[No].<span class="pl-smi">Direction</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4031">4031</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4031">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4032">4032</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4032">      Speed = <span class="pl-c1">0</span> - Speed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4033">4033</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4033">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4034">4034</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4034">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4035">4035</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4035">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4036">4036</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4036">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4037">4037</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4037">    <span class="pl-c">// No new Values check for speed 0</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4038">4038</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4038">    <span class="pl-k">if</span> ((CountsPerPulse[No]) &lt; ((FREERunning24bittimer - TimeOutSpeed0[No]) &amp; 0x00FFFFFF))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4039">4039</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4039">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4040">4040</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4040">      TimeOutSpeed0[No]   = FREERunning24bittimer;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4041">4041</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4041">      Speed               = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4042">4042</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4042">      Motor[No].<span class="pl-smi">DirChgPtr</span> = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4043">4043</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4043">      Status              = <span class="pl-c1">TRUE</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4044">4044</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4044">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4045">4045</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4045">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4046">4046</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4046"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4047">4047</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4047">  *pSpeed = (SBYTE)Speed;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4048">4048</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4048"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4049">4049</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4049">  <span class="pl-k">return</span>(Status);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4050">4050</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4050">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4051">4051</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4051"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4052">4052</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4052"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4053">4053</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4053"><span class="pl-c">/*! \page PWMModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4054">4054</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4054"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4055">4055</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4055"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4056">4056</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4056"><span class="pl-c"> *  &lt;b&gt;     write &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4057">4057</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4057"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4058">4058</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4058"> <span class="pl-c">/*! \brief    Device2Write</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4059">4059</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4059"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4060">4060</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4060"><span class="pl-c"> *  Only used for daisy chaining to ensure Busy flags being set from when message has been</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4061">4061</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4061"><span class="pl-c"> *  received until being executed by the VM</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4062">4062</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4062"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4063">4063</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4063"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4064">4064</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4064"><span class="pl-k">static</span> <span class="pl-c1">ssize_t</span> <span class="pl-en">Device2Write</span>(<span class="pl-k">struct</span> file *File,<span class="pl-k">const</span> <span class="pl-k">char</span> *Buffer,<span class="pl-c1">size_t</span> Count,<span class="pl-c1">loff_t</span> *Data)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4065">4065</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4065">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4066">4066</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4066">  <span class="pl-k">int</span>     Lng     = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4067">4067</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4067">  SBYTE   Buf[<span class="pl-c1">20</span>];</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4068">4068</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4068"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4069">4069</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4069">  <span class="pl-c1">copy_from_user</span>(Buf, Buffer, Count);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4070">4070</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4070"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4071">4071</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4071">  ReadyStatus |= Buf[<span class="pl-c1">0</span>];   <span class="pl-c">// Set Ready flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4072">4072</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4072">  TestStatus  |= Buf[<span class="pl-c1">0</span>];   <span class="pl-c">// Set Test flag</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4073">4073</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4073"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4074">4074</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4074">  <span class="pl-k">return</span> (Lng);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4075">4075</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4075">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4076">4076</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4076"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4077">4077</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4077"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4078">4078</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4078"><span class="pl-c">/*! \page PWMModule</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4079">4079</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4079"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4080">4080</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4080"><span class="pl-c"> *  &lt;hr size=&quot;1&quot;/&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4081">4081</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4081"><span class="pl-c"> *  &lt;b&gt;     read &lt;/b&gt;</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4082">4082</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4082"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4083">4083</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4083"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4084">4084</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4084"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4085">4085</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4085"><span class="pl-c">/*! \brief    Device2Read</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4086">4086</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4086"><span class="pl-c"> *</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4087">4087</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4087"><span class="pl-c"> */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4088">4088</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4088"><span class="pl-k">static</span> <span class="pl-c1">ssize_t</span> <span class="pl-en">Device2Read</span>(<span class="pl-k">struct</span> file *File,<span class="pl-k">char</span> *Buffer,<span class="pl-c1">size_t</span> Count,<span class="pl-c1">loff_t</span> *Offset)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4089">4089</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4089">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4090">4090</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4090">  <span class="pl-k">int</span>     Lng     = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4091">4091</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4091">  <span class="pl-k">return</span> (Lng);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4092">4092</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4092">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4093">4093</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4093"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4094">4094</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4094">#<span class="pl-k">define</span>     <span class="pl-en">SHM_LENGTH</span>    (<span class="pl-k">sizeof</span>(MotorData))</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4095">4095</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4095">#<span class="pl-k">define</span>     <span class="pl-en">NPAGES</span>        ((SHM_LENGTH + PAGE_SIZE - <span class="pl-c1">1</span>) / PAGE_SIZE)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4096">4096</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4096"><span class="pl-k">static</span> <span class="pl-k">void</span> *kmalloc_ptr;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4097">4097</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4097"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4098">4098</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4098"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4099">4099</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4099"><span class="pl-k">static</span> <span class="pl-k">int</span> <span class="pl-en">Device2Mmap</span>(<span class="pl-k">struct</span> file *filp, <span class="pl-k">struct</span> vm_area_struct *vma)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4100">4100</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4100">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4101">4101</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4101">   <span class="pl-k">int</span> ret;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4102">4102</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4102"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4103">4103</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4103">   ret = <span class="pl-c1">remap_pfn_range</span>(vma,vma-&gt;vm_start,<span class="pl-c1">virt_to_phys</span>((<span class="pl-k">void</span>*)((<span class="pl-k">unsigned</span> <span class="pl-k">long</span>)pMotor)) &gt;&gt; PAGE_SHIFT,vma-&gt;vm_end-vma-&gt;vm_start,PAGE_SHARED);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4104">4104</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4104"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4105">4105</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4105">   <span class="pl-k">if</span> (ret != <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4106">4106</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4106">   {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4107">4107</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4107">     ret  =  -EAGAIN;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4108">4108</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4108">   }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4109">4109</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4109"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4110">4110</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4110">   <span class="pl-k">return</span> (ret);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4111">4111</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4111">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4112">4112</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4112"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4113">4113</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4113"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4114">4114</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4114"><span class="pl-k">static</span>    <span class="pl-k">const</span> <span class="pl-k">struct</span> file_operations Device2Entries =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4115">4115</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4115">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4116">4116</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4116">  .<span class="pl-smi">owner</span>        = THIS_MODULE,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4117">4117</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4117">  .<span class="pl-smi">read</span>         = Device2Read,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4118">4118</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4118">  .<span class="pl-smi">write</span>        = Device2Write,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4119">4119</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4119">  .<span class="pl-smi">mmap</span>         = Device2Mmap,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4120">4120</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4120">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4121">4121</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4121"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4122">4122</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4122"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4123">4123</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4123"><span class="pl-k">static</span>    <span class="pl-k">struct</span> miscdevice Device2 =</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4124">4124</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4124">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4125">4125</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4125">  MISC_DYNAMIC_MINOR,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4126">4126</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4126">  DEVICE2_NAME,</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4127">4127</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4127">  &amp;Device2Entries</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4128">4128</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4128">};</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4129">4129</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4129"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4130">4130</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4130"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4131">4131</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4131"><span class="pl-k">static</span> <span class="pl-k">int</span> <span class="pl-en">Device2Init</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4132">4132</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4132">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4133">4133</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4133">  <span class="pl-k">int</span>       Result = -<span class="pl-c1">1</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4134">4134</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4134">  <span class="pl-k">int</span>       i;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4135">4135</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4135">  MOTORDATA *pTmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4136">4136</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4136"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4137">4137</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4137">  Result  =  <span class="pl-c1">misc_register</span>(&amp;Device2);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4138">4138</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4138">  <span class="pl-k">if</span> (Result)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4139">4139</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4139">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4140">4140</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4140">    <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> device register failed<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE2_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4141">4141</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4141">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4142">4142</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4142">  <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4143">4143</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4143">  { <span class="pl-c">// allocate kernel shared memory for tacho counts and speed</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4144">4144</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4144"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4145">4145</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4145">    <span class="pl-k">if</span> ((kmalloc_ptr = <span class="pl-c1">kmalloc</span>((NPAGES + <span class="pl-c1">2</span>) * PAGE_SIZE, GFP_KERNEL)) != <span class="pl-c1">NULL</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4146">4146</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4146">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4147">4147</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4147">      pTmp = (MOTORDATA*)((((<span class="pl-k">unsigned</span> <span class="pl-k">long</span>)kmalloc_ptr) + PAGE_SIZE - <span class="pl-c1">1</span>) &amp; PAGE_MASK);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4148">4148</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4148">      <span class="pl-k">for</span> (i = <span class="pl-c1">0</span>; i &lt; NPAGES * PAGE_SIZE; i += PAGE_SIZE)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4149">4149</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4149">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4150">4150</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4150">        <span class="pl-c1">SetPageReserved</span>(<span class="pl-c1">virt_to_page</span>(((<span class="pl-k">unsigned</span> <span class="pl-k">long</span>)pTmp) + i));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4151">4151</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4151">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4152">4152</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4152">      pMotor =  pTmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4153">4153</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4153">      <span class="pl-c1">memset</span>(pMotor,<span class="pl-c1">0</span>,<span class="pl-k">sizeof</span>(MotorData));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4154">4154</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4154"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4155">4155</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4155">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4156">4156</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4156">      <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> device register succes<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE2_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4157">4157</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4157">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4158">4158</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4158">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4159">4159</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4159">    <span class="pl-k">else</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4160">4160</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4160">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4161">4161</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4161">      <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> kmalloc failed !!<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE2_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4162">4162</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4162">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4163">4163</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4163">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4164">4164</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4164">  <span class="pl-k">return</span> (Result);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4165">4165</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4165">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4166">4166</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4166"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4167">4167</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4167"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4168">4168</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4168"><span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">Device2Exit</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4169">4169</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4169">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4170">4170</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4170">  MOTORDATA   *pTmp;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4171">4171</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4171">  <span class="pl-k">int</span>         i;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4172">4172</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4172"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4173">4173</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4173">  pTmp    =  pMotor;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4174">4174</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4174">  pMotor  =  MotorData;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4175">4175</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4175">  <span class="pl-c">// free shared memory</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4176">4176</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4176">  <span class="pl-k">for</span> (i = <span class="pl-c1">0</span>; i &lt; NPAGES * PAGE_SIZE; i+= PAGE_SIZE)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4177">4177</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4177">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4178">4178</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4178">    <span class="pl-c1">ClearPageReserved</span>(<span class="pl-c1">virt_to_page</span>(((<span class="pl-k">unsigned</span> <span class="pl-k">long</span>)pTmp) + i));</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4179">4179</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4179">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4180">4180</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4180">    <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> memory page <span class="pl-c1">%d</span> unmapped<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE1_NAME,i);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4181">4181</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4181">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4182">4182</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4182">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4183">4183</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4183">  <span class="pl-c1">kfree</span>(kmalloc_ptr);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4184">4184</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4184"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4185">4185</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4185">  <span class="pl-c1">misc_deregister</span>(&amp;Device2);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4186">4186</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4186">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4187">4187</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4187">  <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>  <span class="pl-c1">%s</span> device unregistered<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,DEVICE2_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4188">4188</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4188">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4189">4189</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4189">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4190">4190</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4190"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4191">4191</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4191"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4192">4192</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4192">#<span class="pl-k">ifndef</span> PCASM</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4193">4193</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4193"><span class="pl-en">module_param</span> (HwId, charp, <span class="pl-c1">0</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4194">4194</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4194">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4195">4195</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4195"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4196">4196</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4196"><span class="pl-k">static</span> <span class="pl-k">int</span> <span class="pl-en">ModuleInit</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4197">4197</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4197">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4198">4198</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4198">  Hw  =  HWID;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4199">4199</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4199"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4200">4200</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4200">  <span class="pl-k">if</span> (Hw &lt; PLATFORM_START)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4201">4201</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4201">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4202">4202</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4202">    Hw  =  PLATFORM_START;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4203">4203</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4203">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4204">4204</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4204">  <span class="pl-k">if</span> (Hw &gt; PLATFORM_END)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4205">4205</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4205">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4206">4206</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4206">    Hw  =  PLATFORM_END;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4207">4207</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4207">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4208">4208</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4208"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4209">4209</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4209">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4210">4210</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4210">  <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-c1">%s</span> init started<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,MODULE_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4211">4211</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4211">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4212">4212</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4212"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4213">4213</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4213">  <span class="pl-k">if</span> (<span class="pl-c1">request_mem_region</span>(DA8XX_GPIO_BASE,0xD8,MODULE_NAME) &gt;= <span class="pl-c1">0</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4214">4214</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4214">  {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4215">4215</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4215">    GpioBase  =  (<span class="pl-k">void</span>*)<span class="pl-c1">ioremap</span>(DA8XX_GPIO_BASE,0xD8);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4216">4216</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4216">    <span class="pl-k">if</span> (GpioBase != <span class="pl-c1">NULL</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4217">4217</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4217">    {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4218">4218</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4218">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4219">4219</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4219">      <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-c1">%s</span> gpio address mapped<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,MODULE_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4220">4220</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4220">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4221">4221</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4221"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4222">4222</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4222">      <span class="pl-k">switch</span>(Hw)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4223">4223</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4223">      {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4224">4224</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4224">        <span class="pl-k">case</span> EP2:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4225">4225</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4225">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4226">4226</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4226">          <span class="pl-c">/* This is to comply with changing of inverters on the tacho direction pins */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4227">4227</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4227">          <span class="pl-c">/* only Final hardware does not need to be inverted                         */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4228">4228</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4228">          HwInvBits = 0xFFFFFFFF;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4229">4229</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4229"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4230">4230</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4230">          <span class="pl-c">/* Motor PWM outputs has been switched in EP2 MA&lt;-&gt;MB and MC&lt;-&gt;MD */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4231">4231</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4231">          SetDuty[<span class="pl-c1">0</span>]  = SetDutyMB;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4232">4232</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4232">          SetDuty[<span class="pl-c1">1</span>]  = SetDutyMA;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4233">4233</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4233">          SetDuty[<span class="pl-c1">2</span>]  = SetDutyMD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4234">4234</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4234">          SetDuty[<span class="pl-c1">3</span>]  = SetDutyMC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4235">4235</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4235">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4236">4236</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4236">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4237">4237</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4237">        <span class="pl-k">case</span> FINALB:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4238">4238</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4238">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4239">4239</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4239">          <span class="pl-c">/* This is to comply with changing of inverters on the tacho direction pins */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4240">4240</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4240">          <span class="pl-c">/* only Final hardware does not need to be inverted                         */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4241">4241</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4241">          HwInvBits = 0xFFFFFFFF;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4242">4242</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4242"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4243">4243</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4243">          <span class="pl-c">/* Motor PWM outputs has been switched in EP2 MA&lt;-&gt;MB and MC&lt;-&gt;MD */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4244">4244</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4244">          SetDuty[<span class="pl-c1">0</span>]  = SetDutyMA;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4245">4245</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4245">          SetDuty[<span class="pl-c1">1</span>]  = SetDutyMB;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4246">4246</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4246">          SetDuty[<span class="pl-c1">2</span>]  = SetDutyMC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4247">4247</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4247">          SetDuty[<span class="pl-c1">3</span>]  = SetDutyMD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4248">4248</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4248">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4249">4249</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4249">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4250">4250</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4250">        <span class="pl-k">case</span> FINAL:</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4251">4251</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4251">        {</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4252">4252</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4252">          <span class="pl-c">/* This is to comply with changing of inverters on the tacho direction pins */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4253">4253</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4253">          <span class="pl-c">/* only Final hardware does not need to be inverted                         */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4254">4254</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4254">          HwInvBits = <span class="pl-c1">0</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4255">4255</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4255"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4256">4256</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4256">          <span class="pl-c">/* Motor PWM outputs has been switched in EP2 MA&lt;-&gt;MB and MC&lt;-&gt;MD */</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4257">4257</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4257">          SetDuty[<span class="pl-c1">0</span>]  = SetDutyMA;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4258">4258</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4258">          SetDuty[<span class="pl-c1">1</span>]  = SetDutyMB;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4259">4259</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4259">          SetDuty[<span class="pl-c1">2</span>]  = SetDutyMC;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4260">4260</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4260">          SetDuty[<span class="pl-c1">3</span>]  = SetDutyMD;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4261">4261</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4261">        }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4262">4262</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4262">        <span class="pl-k">break</span>;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4263">4263</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4263">      }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4264">4264</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4264"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4265">4265</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4265">      <span class="pl-c1">InitGpio</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4266">4266</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4266"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4267">4267</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4267">      <span class="pl-c1">Device1Init</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4268">4268</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4268">      <span class="pl-c1">Device2Init</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4269">4269</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4269"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4270">4270</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4270">      <span class="pl-c">/* Setup timer irq*/</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4271">4271</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4271">      Device1Time  =  <span class="pl-c1">ktime_set</span>(<span class="pl-c1">0</span>,SOFT_TIMER_SETUP);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4272">4272</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4272">      <span class="pl-c1">hrtimer_init</span>(&amp;Device1Timer,CLOCK_MONOTONIC,HRTIMER_MODE_REL);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4273">4273</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4273">      Device1Timer.<span class="pl-smi">function</span>  =  Device1TimerInterrupt1;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4274">4274</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4274">      <span class="pl-c1">hrtimer_start</span>(&amp;Device1Timer,Device1Time,HRTIMER_MODE_REL);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4275">4275</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4275">    }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4276">4276</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4276">  }</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4277">4277</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4277">  <span class="pl-k">return</span> (<span class="pl-c1">0</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4278">4278</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4278">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4279">4279</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4279"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4280">4280</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4280"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4281">4281</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4281"><span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">ModuleExit</span>(<span class="pl-k">void</span>)</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4282">4282</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4282">{</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4283">4283</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4283">#<span class="pl-k">ifdef</span> DEBUG</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4284">4284</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4284">  <span class="pl-c1">printk</span>(<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-c1">%s</span> exit started<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span>,MODULE_NAME);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4285">4285</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4285">#<span class="pl-k">endif</span></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4286">4286</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4286">  STOPPwm;</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4287">4287</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4287">  <span class="pl-c1">free_irq</span>(<span class="pl-c1">gpio_to_irq</span>(IRQA_PINNO), <span class="pl-c1">NULL</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4288">4288</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4288">  <span class="pl-c1">free_irq</span>(<span class="pl-c1">gpio_to_irq</span>(IRQB_PINNO), <span class="pl-c1">NULL</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4289">4289</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4289">  <span class="pl-c1">free_irq</span>(<span class="pl-c1">gpio_to_irq</span>(IRQC_PINNO), <span class="pl-c1">NULL</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4290">4290</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4290">  <span class="pl-c1">free_irq</span>(<span class="pl-c1">gpio_to_irq</span>(IRQD_PINNO), <span class="pl-c1">NULL</span>);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4291">4291</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4291"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4292">4292</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4292">  <span class="pl-c1">Device1Exit</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4293">4293</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4293">  <span class="pl-c1">Device2Exit</span>();</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4294">4294</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4294"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4295">4295</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4295">  <span class="pl-c1">iounmap</span>(GpioBase);</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4296">4296</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4296"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4297">4297</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4297">}</td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4298">4298</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4298"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4299">4299</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4299"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4300">4300</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4300"></td>
          </tr>
          <tr class="blame-line">
            <td class="line-age heat10"></td>
            <td class="blob-num blame-blob-num js-line-number" id="L4301">4301</td>
            <td class="blob-code blob-code-inner js-file-line" id="LC4301"></td>
          </tr>
    </table>
  </div>
</div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
      <li><a href="https://developer.github.com/" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="https://training.github.com/" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="https://shop.github.com/" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>

    <a href="https://github.com/" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
</a>
    <ul class="site-footer-links">
      <li>&copy; 2015 <span title="0.29115s from github-fe140-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact</a></li>
    </ul>
  </div>
</div>


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-suggester-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder=""></textarea>
      <div class="suggester-container">
        <div class="suggester fullscreen-suggester js-suggester js-navigation-container"></div>
      </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    

    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x flash-close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="../../../../../../../../assets-cdn.github.com/assets/frameworks-447ce66a36506ebddc8e84b4e32a77f6062f3d3482e77dd21a77a01f0643ad98.js"></script>
      <script async="async" crossorigin="anonymous" src="../../../../../../../../assets-cdn.github.com/assets/github/index-83be60956d0d00076a726f0864b49916aae8e7bc6ee140798791be0b6644d661.js"></script>
      
      
  </body>

<!-- Mirrored from github.com/mindboards/ev3sources/blame/7357369b6ebae4ee62001f3964f0f5fd0cce3c32/lms2012/d_pwm/Linuxmod_AM1808/d_pwm.c by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 01 Jun 2015 09:40:15 GMT -->
</html>

