<!DOCTYPE html>
<html>
  
<!-- Mirrored from blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 14 Aug 2015 06:51:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    
    <title>
    
        Designing a RESTful API using Flask-RESTful - miguelgrinberg.com
    
</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="description" content="miguelgrinberg.com">
	<meta name="copyright" content="Copyright (c) 2012-2015 Miguel Grinberg">
	<meta name="author" content="Miguel Grinberg">
    
    <meta name="keywords" content="python, programming, REST, RESTful, API, web, service, saas">
    

    
    <!-- Bootstrap -->
    <link href="../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../static/prettify.css" type="text/css" rel="stylesheet" />
    <link href="../static/colorbox/colorbox.css" rel="stylesheet" type="text/css" />
    <link href="../static/style.css" rel="stylesheet" type="text/css" />

    <link rel="shortcut icon" href="../static/favicon.ico">
	<link rel="alternate" type="application/rss+xml" href="../feed" title="miguelgrinberg.com RSS feed">

  </head>
  <body>
    
    <!-- facebook sdk -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "../../connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <!-- google plus sdk -->
    <script type="text/javascript" src="../../apis.google.com/js/plusone.js"></script>
    <!-- twitter sdk -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="../../platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <!-- linkedin sdk -->
    <script src="../../platform.linkedin.com/in.js" type="text/javascript"></script>

    
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://blog.miguelgrinberg.com/index">miguelgrinberg.com</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="http://blog.miguelgrinberg.com/index">Home</a></li>
                        <li><a href="about-me.html">About Me</a></li>
                        <li><a href="about-this-blog.html">About This Blog</a></li>
                        
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <p class="navbar-text" style="margin-top: 10px; margin-bottom: 0px;">
                                <a type="application/rss+xml" href="../feed"><img src="../static/rss.png" alt="RSS Feed" title="RSS Feed" /></a>
                                <a href="https://www.facebook.com/miguelgrinbergblog"><img src="../static/facebook.png" alt="Facebook" title="Facebook" /></a>
                                <a href="https://plus.google.com/u/0/117786742456929977820"><img src="../static/googleplus.png" alt="Google+" title="Google+" /></a>
                                <a href="http://www.linkedin.com/in/miguelgrinberg"><img src="../static/linkedin.png" alt="LinkedIn" title="LinkedIn" /></a>
                                <a href="http://github.com/miguelgrinberg"><img src="../static/github.png" alt="GitHub" title="GitHub" /></a>
                                <a href="https://twitter.com/#!/miguelgrinberg"><img src="../static/twitter.png" alt="Twitter" title="Twitter" /></a>
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
    </nav>

    
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-md-push-9 sidebar-bg">
                <div id="sidebar">
                    

                    
                    <h1>Building Web APIs with Flask</h1>
                    <p>Flask is the ideal Python framework for building REST APIs that are flexible, easy to maintain and efficient. I have created a training video with O'Reilly in which I show all my techniques:</p>
                    <p><center><a href="http://bit.ly/flaskapi"><img style="border: 1px solid black;" src="../static/flask-api-cover-tiny.png"></a></center></p>
                    <p>Visit <a href="http://flaskbook.com/">http://flaskbook.com</a> for information about this and other Flask training products I have created!</p>
                    

                    <h1>About Miguel</h1>
                    <img style="float: right; margin: 0px 8px 8px 0px; padding: 4px; border: 1px solid #ccc;" src="../static/miguel.jpg" />
                    <p>Welcome to my blog!</p>
                    <p>I'm a software engineer, photographer and filmmaker in Portland, Oregon, USA.</p>
                    <p>You can also find me on <a href="https://www.facebook.com/miguelgrinbergblog">Facebook</a>, <a href="https://plus.google.com/u/0/117786742456929977820">Google+</a>, <a href="http://www.linkedin.com/in/miguelgrinberg">LinkedIn</a>, <a href="https://github.com/miguelgrinberg">Github</a> and <a href="https://twitter.com/#!/miguelgrinberg">Twitter</a>.</p>
                    <p>Thank you for visiting!</p>

                    

                    
                    <h1>Categories</h1>
<ul>

	<li>
		<a href="../category/Arduino/feed">
			<img src="../static/rss-small.png" title="Arduino RSS Feed" label="Arduino RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Arduino.html">Arduino</a></span> (7)
	</li>

	<li>
		<a href="../category/Authentication/feed">
			<img src="../static/rss-small.png" title="Authentication RSS Feed" label="Authentication RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Authentication.html">Authentication</a></span> (4)
	</li>

	<li>
		<a href="../category/Blog/feed">
			<img src="../static/rss-small.png" title="Blog RSS Feed" label="Blog RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Blog.html">Blog</a></span> (1)
	</li>

	<li>
		<a href="../category/C%2b%2b/feed">
			<img src="../static/rss-small.png" title="C++ RSS Feed" label="C++ RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/C%2b%2b.html">C++</a></span> (5)
	</li>

	<li>
		<a href="../category/Cloud/feed">
			<img src="../static/rss-small.png" title="Cloud RSS Feed" label="Cloud RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Cloud.html">Cloud</a></span> (2)
	</li>

	<li>
		<a href="../category/Filmmaking/feed">
			<img src="../static/rss-small.png" title="Filmmaking RSS Feed" label="Filmmaking RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Filmmaking.html">Filmmaking</a></span> (6)
	</li>

	<li>
		<a href="../category/Flask/feed">
			<img src="../static/rss-small.png" title="Flask RSS Feed" label="Flask RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Flask.html">Flask</a></span> (39)
	</li>

	<li>
		<a href="../category/Games/feed">
			<img src="../static/rss-small.png" title="Games RSS Feed" label="Games RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Games.html">Games</a></span> (1)
	</li>

	<li>
		<a href="../category/Gear/feed">
			<img src="../static/rss-small.png" title="Gear RSS Feed" label="Gear RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Gear.html">Gear</a></span> (6)
	</li>

	<li>
		<a href="../category/HTML5/feed">
			<img src="../static/rss-small.png" title="HTML5 RSS Feed" label="HTML5 RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/HTML5.html">HTML5</a></span> (1)
	</li>

	<li>
		<a href="../category/Heroku/feed">
			<img src="../static/rss-small.png" title="Heroku RSS Feed" label="Heroku RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Heroku.html">Heroku</a></span> (1)
	</li>

	<li>
		<a href="../category/Javascript/feed">
			<img src="../static/rss-small.png" title="Javascript RSS Feed" label="Javascript RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Javascript.html">Javascript</a></span> (3)
	</li>

	<li>
		<a href="../category/Movie%20Reviews/feed">
			<img src="../static/rss-small.png" title="Movie Reviews RSS Feed" label="Movie Reviews RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Movie%20Reviews.html">Movie Reviews</a></span> (5)
	</li>

	<li>
		<a href="../category/Netflix/feed">
			<img src="../static/rss-small.png" title="Netflix RSS Feed" label="Netflix RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Netflix.html">Netflix</a></span> (5)
	</li>

	<li>
		<a href="../category/Node.js/feed">
			<img src="../static/rss-small.png" title="Node.js RSS Feed" label="Node.js RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Node.html">Node.js</a></span> (1)
	</li>

	<li>
		<a href="../category/OpenStack/feed">
			<img src="../static/rss-small.png" title="OpenStack RSS Feed" label="OpenStack RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/OpenStack.html">OpenStack</a></span> (1)
	</li>

	<li>
		<a href="../category/Personal/feed">
			<img src="../static/rss-small.png" title="Personal RSS Feed" label="Personal RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Personal.html">Personal</a></span> (1)
	</li>

	<li>
		<a href="../category/Photography/feed">
			<img src="../static/rss-small.png" title="Photography RSS Feed" label="Photography RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Photography.html">Photography</a></span> (6)
	</li>

	<li>
		<a href="../category/Product%20Reviews/feed">
			<img src="../static/rss-small.png" title="Product Reviews RSS Feed" label="Product Reviews RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Product%20Reviews.html">Product Reviews</a></span> (1)
	</li>

	<li>
		<a href="../category/Programming/feed">
			<img src="../static/rss-small.png" title="Programming RSS Feed" label="Programming RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Programming.html">Programming</a></span> (47)
	</li>

	<li>
		<a href="../category/Project%20Management/feed">
			<img src="../static/rss-small.png" title="Project Management RSS Feed" label="Project Management RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Project%20Management.html">Project Management</a></span> (1)
	</li>

	<li>
		<a href="../category/Python/feed">
			<img src="../static/rss-small.png" title="Python RSS Feed" label="Python RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Python.html">Python</a></span> (43)
	</li>

	<li>
		<a href="../category/REST/feed">
			<img src="../static/rss-small.png" title="REST RSS Feed" label="REST RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/REST.html">REST</a></span> (5)
	</li>

	<li>
		<a href="../category/Rackspace/feed">
			<img src="../static/rss-small.png" title="Rackspace RSS Feed" label="Rackspace RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Rackspace.html">Rackspace</a></span> (1)
	</li>

	<li>
		<a href="../category/Raspberry%20Pi/feed">
			<img src="../static/rss-small.png" title="Raspberry Pi RSS Feed" label="Raspberry Pi RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Raspberry%20Pi.html">Raspberry Pi</a></span> (6)
	</li>

	<li>
		<a href="../category/RhinoSteady/feed">
			<img src="../static/rss-small.png" title="RhinoSteady RSS Feed" label="RhinoSteady RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/RhinoSteady.html">RhinoSteady</a></span> (6)
	</li>

	<li>
		<a href="../category/Robotics/feed">
			<img src="../static/rss-small.png" title="Robotics RSS Feed" label="Robotics RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Robotics.html">Robotics</a></span> (6)
	</li>

	<li>
		<a href="../category/Video/feed">
			<img src="../static/rss-small.png" title="Video RSS Feed" label="Video RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Video.html">Video</a></span> (4)
	</li>

	<li>
		<a href="../category/Windows/feed">
			<img src="../static/rss-small.png" title="Windows RSS Feed" label="Windows RSS Feed" />
		</a>
		<span class="label label-primary"><a href="../category/Windows.html">Windows</a></span> (1)
	</li>

</ul>
                    
                </div>
            </div>
            <div class="col-md-8 col-md-pull-4">
                <div id="main">
                    
                    
                    
                    
                    

<div class="post">

<p class="date"><span class="flask-moment" data-timestamp="2013-07-28T19:11:38Z" data-format="format('LL')" data-refresh="0">2013-07-28T19:11:38Z</span></p>
<h1 class="post-title"><a href="designing-a-restful-api-using-flask-restful.html">Designing a RESTful API using Flask-RESTful</a></h1>
<div class="posted">Posted by <span class="label label-danger"><a href="http://blog.miguelgrinberg.com/author/Miguel Grinberg">Miguel Grinberg</a></span> under <span class="label label-primary"><a href="../category/Python.html">Python</a></span>, <span class="label label-primary"><a href="../category/Programming.html">Programming</a></span>, <span class="label label-primary"><a href="../category/REST.html">REST</a></span>, <span class="label label-primary"><a href="../category/Flask.html">Flask</a></span>. </div>
<div class="social-bar">
    <table>
        <tr>
            <td><div class="social-box" style="padding-top: 8px;"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful" data-via="miguelgrinberg" data-count="vertical">Tweet</a></div></td>
            <td><div class="social-box" style="padding-left: 6px;"><div class="fb-like" data-href="http://blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful" data-send="false" data-layout="box_count" data-width="450" data-show-faces="false" data-font="verdana"></div></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><g:plusone href="designing-a-restful-api-using-flask-restful.html" size="tall"></g:plusone></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful" data-counter="top"></script></div></td>
        </tr>
    </table>
</div>
<div class="post_body"><p>This is the third article in which I explore different aspects of writing RESTful APIs using the <a href="http://flask.pocoo.org/">Flask</a> microframework.</p>
<p>The example RESTful server I wrote before used only Flask as a dependency. Today I will show you how to write the same server using <a href="http://flask-restful.readthedocs.org/en/latest/">Flask-RESTful</a>, a Flask extension that simplifies the creation of APIs.</p>
<h2>The RESTful server</h2>
<p>As a reminder, here is the definition of the ToDo List web service that has been serving as an example in my RESTful articles:</p>
<table class="data">
<tr><th>HTTP Method</th><th>URI</th><th>Action</th></tr>
<tr><td>GET</td><td>http://[hostname]/todo/api/v1.0/tasks</td><td>Retrieve list of tasks</td></tr>
<tr><td>GET</td><td>http://[hostname]/todo/api/v1.0/tasks/[task_id]</td><td>Retrieve a task</td></tr>
<tr><td>POST</td><td>http://[hostname]/todo/api/v1.0/tasks</td><td>Create a new task</td></tr>
<tr><td>PUT</td><td>http://[hostname]/todo/api/v1.0/tasks/[task_id]</td><td>Update an existing task</td></tr>
<tr><td>DELETE</td><td>http://[hostname]/todo/api/v1.0/tasks/[task_id]</td><td>Delete a task</td></tr>
</table>

<p>The only resource exposed by this service is a "task", which has the following data fields:</p>
<ul>
<li><strong>uri</strong>: unique URI for the task. String type.</li>
<li><strong>title</strong>: short task description. String type.</li>
<li><strong>description</strong>: long task description. Text type.</li>
<li><strong>done</strong>: task completion state. Boolean type.</li>
</ul>
<h2>Routing</h2>
<p>In my first RESTful server example (source code <a href="https://github.com/miguelgrinberg/REST-tutorial/blob/master/rest-server.py">here</a>) I have used regular Flask view functions to define all the routes.</p>
<p>Flask-RESTful provides a <code>Resource</code> base class that can define the routing for one or more HTTP methods for a given URL. For example, to define a <code>User</code> resource with <code>GET</code>, <code>PUT</code> and <code>DELETE</code> methods you would write:</p>
<pre><code>from flask import Flask
from flask.ext.restful import Api, Resource

app = Flask(__name__)
api = Api(app)

class UserAPI(Resource):
    def get(self, id):
        pass

    def put(self, id):
        pass

    def delete(self, id):
        pass

api.add_resource(UserAPI, '/users/&lt;int:id&gt;', endpoint = 'user')
</code></pre>
<p>The <code>add_resource</code> function registers the routes with the framework using the given endpoint. If an endpoint isn't given then Flask-RESTful generates one for you from the class name, but since sometimes the endpoint is needed for functions such as <code>url_for</code> I prefer to make it explicit.</p>
<p>My ToDo API defines two URLs: <code>/todo/api/v1.0/tasks</code> for the list of tasks, and <code>/todo/api/v1.0/tasks/&lt;int:id&gt;</code> for an individual task. Since Flask-RESTful's <code>Resource</code> class can wrap a single URL this server will need two resources:</p>
<pre><code>class TaskListAPI(Resource):
    def get(self):
        pass

    def post(self):
        pass

class TaskAPI(Resource):
    def get(self, id):
        pass

    def put(self, id):
        pass

    def delete(self, id):
        pass

api.add_resource(TaskListAPI, '/todo/api/v1.0/tasks', endpoint = 'tasks')
api.add_resource(TaskAPI, '/todo/api/v1.0/tasks/&lt;int:id&gt;', endpoint = 'task')
</code></pre>
<p>Note that while the method views of <code>TaskListAPI</code> receive no arguments the ones in <code>TaskAPI</code> all receive the <code>id</code>, as specified in the URL under which the resource is registered.</p>
<h2>Request Parsing and Validation</h2>
<p>When I implemented this server in the previous article I did my own validation of the request data. For example, look at how long the <code>PUT</code> handler is in that version:</p>
<pre><code>@app.route('/todo/api/v1.0/tasks/&lt;int:task_id&gt;', methods = ['PUT'])
@auth.login_required
def update_task(task_id):
    task = filter(lambda t: t['id'] == task_id, tasks)
    if len(task) == 0:
        abort(404)
    if not request.json:
        abort(400)
    if 'title' in request.json and type(request.json['title']) != unicode:
        abort(400)
    if 'description' in request.json and type(request.json['description']) is not unicode:
        abort(400)
    if 'done' in request.json and type(request.json['done']) is not bool:
        abort(400)
    task[0]['title'] = request.json.get('title', task[0]['title'])
    task[0]['description'] = request.json.get('description', task[0]['description'])
    task[0]['done'] = request.json.get('done', task[0]['done'])
    return jsonify( { 'task': make_public_task(task[0]) } )
</code></pre>
<p>Here I have to make sure the data given with the request is valid before using it, and that makes the function pretty long.</p>
<p>Flask-RESTful provides a much better way to handle this with the <code>RequestParser</code> class. This class works in a similar way as <code>argparse</code> for command line arguments.</p>
<p>First, for each resource I define the arguments and how to validate them:</p>
<pre><code>from flask.ext.restful import reqparse

class TaskListAPI(Resource):
    def __init__(self):
        self.reqparse = reqparse.RequestParser()
        self.reqparse.add_argument('title', type = str, required = True,
            help = 'No task title provided', location = 'json')
        self.reqparse.add_argument('description', type = str, default = "", location = 'json')
        super(TaskListAPI, self).__init__()

    # ...

class TaskAPI(Resource):
    def __init__(self):
        self.reqparse = reqparse.RequestParser()
        self.reqparse.add_argument('title', type = str, location = 'json')
        self.reqparse.add_argument('description', type = str, location = 'json')
        self.reqparse.add_argument('done', type = bool, location = 'json')
        super(TaskAPI, self).__init__()

    # ...
</code></pre>
<p>In the <code>TaskListAPI</code> resource the <code>POST</code> method is the only one the receives arguments. The <code>title</code> argument is required here, so I included an error message that Flask-RESTful will send as a response to the client when the field is missing. The <code>description</code> field is optional, and when it is missing a default value of an empty string will be used. One interesting aspect of the <code>RequestParser</code> class is that by default it looks for fields in <code>request.values</code>, so the <code>location</code> optional argument must be set to indicate that the fields are coming in <code>request.json</code>.</p>
<p>The request parser for the <code>TaskAPI</code> is constructed in a similar way, but has a few differences. In this case it is the <code>PUT</code> method that will need to parse arguments, and for this method all the arguments are optional, including the <code>done</code> field that was not part of the request in the other resource.</p>
<p>Now that the request parsers are initialized, parsing and validating a request is pretty easy. For example, note how much simpler the <code>TaskAPI.put()</code> method becomes:</p>
<pre><code>    def put(self, id):
        task = filter(lambda t: t['id'] == id, tasks)
        if len(task) == 0:
            abort(404)
        task = task[0]
        args = self.reqparse.parse_args()
        for k, v in args.iteritems():
            if v != None:
                task[k] = v
        return jsonify( { 'task': make_public_task(task) } )
</code></pre>
<p>A side benefit of letting Flask-RESTful do the validation is that now there is no need to have a handler for the bad request code 400 error, this is all taken care of by the extension.</p>
<h2>Generating Responses</h2>
<p>My original REST server generates the responses using Flask's <code>jsonify</code> helper function. Flask-RESTful automatically handles the conversion to JSON, so instead of this:</p>
<pre><code>        return jsonify( { 'task': make_public_task(task) } )
</code></pre>
<p>I can do this:</p>
<pre><code>        return { 'task': make_public_task(task) }
</code></pre>
<p>Flask-RESTful also supports passing a custom status code back when necessary:</p>
<pre><code>        return { 'task': make_public_task(task) }, 201
</code></pre>
<p>But there is more. The <code>make_public_task</code> wrapper from the original server converted a task from its internal representation to the external representation that clients expected. The conversion included removing the <code>id</code> field and adding a <code>uri</code> field in its place. Flask-RESTful provides a helper function to do this in a much more elegant way that not only generates the <code>uri</code> but also does type conversion on the remaining fields:</p>
<pre><code>from flask.ext.restful import fields, marshal

task_fields = {
    'title': fields.String,
    'description': fields.String,
    'done': fields.Boolean,
    'uri': fields.Url('task')
}

class TaskAPI(Resource):
    # ...

    def put(self, id):
        # ...
        return { 'task': marshal(task, task_fields) }
</code></pre>
<p>The <code>task_fields</code> structure serves as a template for the <code>marshal</code> function. The <code>fields.Uri</code> type is a special type that generates a URL. The argument it takes is the endpoint (recall that I have used explicit endpoints when I registered the resources specifically so that I can refer to them when needed).</p>
<h2>Authentication</h2>
<p>The routes in the REST server are all protected with HTTP basic authentication. In the original server the protection was added using the decorator provided by the <a href="https://github.com/miguelgrinberg/flask-httpauth">Flask-HTTPAuth</a> extension.</p>
<p>Since the <code>Resouce</code> class inherits from Flask's <code>MethodView</code>, it is possible to attach decorators to the methods by defining a <code>decorators</code> class variable:</p>
<pre><code>from flask.ext.httpauth import HTTPBasicAuth
# ...
auth = HTTPBasicAuth()
# ...

class TaskAPI(Resource):
    decorators = [auth.login_required]
    # ...

class TaskAPI(Resource):
    decorators = [auth.login_required]
    # ...
</code></pre>
<h2>Conclusion</h2>
<p>The complete server implementation based on Flask-RESTful is available in my <a href="https://github.com/miguelgrinberg/REST-tutorial">REST-tutorial</a> project on github. The file with the Flask-RESTful server is <a href="https://github.com/miguelgrinberg/REST-tutorial/blob/master/rest-server-v2.py">rest-server-v2.py</a>.</p>
<p>You can also download the entire project including both server implementations and a javascript client to test it:</p>
<p><a href="https://codeload.github.com/miguelgrinberg/REST-tutorial/zip/master">Download REST-tutorial project</a>.</p>
<p>Let me know if you have any questions in the comments below.</p>
<p>Miguel</p></div>
<div class="social-bar">
    <table>
        <tr>
            <td><div class="social-box" style="padding-top: 8px;"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful" data-via="miguelgrinberg" data-count="vertical">Tweet</a></div></td>
            <td><div class="social-box" style="padding-left: 6px;"><div class="fb-like" data-href="http://blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful" data-send="false" data-layout="box_count" data-width="450" data-show-faces="false" data-font="verdana"></div></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><g:plusone href="designing-a-restful-api-using-flask-restful.html" size="tall"></g:plusone></div></td>
            <td><div class="social-box" style="padding-top: 8px;"><script type="IN/Share" data-url="http://blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful" data-counter="top"></script></div></td>
        </tr>
    </table>
</div>


<h4 style="text-align: right"><a name="comments"></a>114 comments</h4>


<div class="comment">
    <ul>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/ab1e142a46861a6e6653ef30bcd9ea88ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#1</span> <span class="label label-primary">Kuan</span> said
                    <span class="flask-moment" data-timestamp="2013-07-29T01:38:04Z" data-format="fromNow(0)" data-refresh="0">2013-07-29T01:38:04Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great Tut! thumb up!
</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/754b0e1ccaa341c50556c7f68cc71c48ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#2</span> <span class="label label-primary">rick</span> said
                    <span class="flask-moment" data-timestamp="2013-07-29T04:03:41Z" data-format="fromNow(0)" data-refresh="0">2013-07-29T04:03:41Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Loved your previous article.  This looks exactly like what I was looking for - using classes instead of individual methods.  I really like your clean examples and explanations.  Thanks for your posts.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/1d4899925a4d64c33dcba2d76d7f20dcce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#3</span> <span class="label label-primary"><a href="http://codetrips.com/">Marco Massenzio</a></span> said
                    <span class="flask-moment" data-timestamp="2013-08-02T07:33:49Z" data-format="fromNow(0)" data-refresh="0">2013-08-02T07:33:49Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great post, thanks!
Very timely too, as this is exactly what I needed for a project of mine.

Very minor point: you may want to add links to the other two articles.
Good luck with the book!</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/3bf9cdee52067928d3f9aa20b18a27b6ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#4</span> <span class="label label-primary">Daniel Donovan</span> said
                    <span class="flask-moment" data-timestamp="2013-08-03T18:56:00Z" data-format="fromNow(0)" data-refresh="0">2013-08-03T18:56:00Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Loving your tutorial very much.  I would love to see how you would create RESTful api&#39;s from SQLAlchemy models.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/f4ff19e3914f98a5f85a6ac0fed9f122ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#5</span> <span class="label label-primary">Danny</span> said
                    <span class="flask-moment" data-timestamp="2013-08-06T20:50:39Z" data-format="fromNow(0)" data-refresh="0">2013-08-06T20:50:39Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Your tutorials are some of the best I&#39;ve ever read.  

You are a champion.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/03de533c8cc2ef384bae16c738fc0145ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#6</span> <span class="label label-primary">Dan</span> said
                    <span class="flask-moment" data-timestamp="2013-08-11T06:58:56Z" data-format="fromNow(0)" data-refresh="0">2013-08-11T06:58:56Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Miguel,

Thanks for the great tutorial.  Having started with Flask based on one of your previous tutorials and then implementing Flask-Restful, it was great to see your examples and comments to compare notes...

Cheers,

Dan    </p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/f63aa35dce1abfa425f86deb6e6eb671ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#7</span> <span class="label label-primary">Akshay</span> said
                    <span class="flask-moment" data-timestamp="2013-08-26T06:54:29Z" data-format="fromNow(0)" data-refresh="0">2013-08-26T06:54:29Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Great articles Miguel, not only for the insight into Flask but also designing a Rest API. Would be awesome if you could discuss multi tenant design in Flask. Can&#39;t wait for your book</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/f8488d3296e244a3cb832d5b7f859552ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#8</span> <span class="label label-primary">Tim</span> said
                    <span class="flask-moment" data-timestamp="2013-09-05T12:07:35Z" data-format="fromNow(0)" data-refresh="0">2013-09-05T12:07:35Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Thanks for the example code. It was immensely helpful in getting going with flask_restful.

I am not sure if the implementation has changed since you published this code but I would just like to point out something that tripped me up. The args object returned by parse_args() will have an entry for each argument. Any that were not passed in the PUT request have a value of None. Calling args.get() will give unexpected results as the default value will never be used.

For example it seems that rather than doing:
  task[&#39;title&#39;] = args.get(&#39;title&#39;, task[&#39;title&#39;])
you need to do:
  if args.title != None:
      task[&#39;title&#39;] = args.title</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#9</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-09-06T16:11:32Z" data-format="fromNow(0)" data-refresh="0">2013-09-06T16:11:32Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Tim: not sure what&#39;s going on. Flask-RESTful defines this little class called Namespace, which inherits from dict. That is the type of the args. My approach uses the regular dict interface, yours uses the namespace syntax. Both should work the same.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/143615a20f580213f50d651cf5148d11ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#10</span> <span class="label label-primary"><a href="http://blog.miguelgrinberg.com/index">Chitrank Dixit</a></span> said
                    <span class="flask-moment" data-timestamp="2013-10-05T07:05:05Z" data-format="fromNow(0)" data-refresh="0">2013-10-05T07:05:05Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Thank you Miguel , I have searched a lot about writing the Flask-RESTful API a quick review but what you explain is really awesome.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/0649fbd79df4a9abb776b5c06ae37592ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#11</span> <span class="label label-primary">Dave Barndt</span> said
                    <span class="flask-moment" data-timestamp="2013-10-16T03:36:06Z" data-format="fromNow(0)" data-refresh="0">2013-10-16T03:36:06Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Miguel, thank you for the tutorial and the example.  Flask and the new RESTful extension are terrific to use, and your tutorial and example(s) help make it so.

I just have a quick question.  Flask&#39;s url_for() function allows you to specify an &#34;_external=True&#34; keyword argument to provide the full URL to a resource.  Is there a way to pass something similar to Flask-RESTful&#39;s fields.Url(&lt;endpoint&gt;) method so that when the field/URL value is marshaled and returned in a GET response, it will be a full URL?</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#12</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-10-16T16:27:14Z" data-format="fromNow(0)" data-refresh="0">2013-10-16T16:27:14Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Dave: Hmm. I somehow missed this when I wrote the article. Sounds like these URLs should be always external, since they are returned back to the client. I&#39;ll log a bug with Flask-Restful.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#13</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-10-16T16:34:33Z" data-format="fromNow(0)" data-refresh="0">2013-10-16T16:34:33Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Dave: I have sent Flask-Restful a pull request with this change. You can see what I changed here: https://github.com/twilio/flask-restful/pull/139</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/e02ec40a80767d380385c18fb26b3f76ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#14</span> <span class="label label-primary">ryzhiy</span> said
                    <span class="flask-moment" data-timestamp="2013-10-16T21:44:01Z" data-format="fromNow(0)" data-refresh="0">2013-10-16T21:44:01Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi Miguel,
Thanks for the best tutorials on Flask over the internet.
I had a quick question on managing unicode character. My application need to handle cyrillic characters, thus instead of using &#34;str&#34; I specify &#34;unicode&#34; type for my literals.
The issue is that my application instance one server works smoothly, but on another it fails permanently to handle properly the ajax data.
When I send latin strings in the POST it rejects them populating the &#34;help&#34; error message.
When I send non-latin strings, it receives parses the data, but fails to execute marshal scenario with an error MarshallingException: &#39;ascii&#39; codec can&#39;t decode byte 0xd0 in position 0: ordinal not in range(128)

Have you also met a similar issue before?

Thanks in advance</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#15</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-10-17T04:25:42Z" data-format="fromNow(0)" data-refresh="0">2013-10-17T04:25:42Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@ryzhiy: have you tried using utf-8? For this you have to set the charset in the Content-Type header.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/e02ec40a80767d380385c18fb26b3f76ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#16</span> <span class="label label-primary">ryzhiy</span> said
                    <span class="flask-moment" data-timestamp="2013-10-18T07:50:11Z" data-format="fromNow(0)" data-refresh="0">2013-10-18T07:50:11Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Yyes, I did. But this didn&#39;t help. The server accepts normally cyrillic encoded symbols and mixed strings (Cyrillic+ Latin), but not strings composed solely of Latin characters.

I assume that this is somehow related to the web server or python versions. On the server where this doesn&#39;t work there is a gevent WSGI server installed.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/ea496ad1627458ccfad06c94842b7624ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#17</span> <span class="label label-primary">Hooman</span> said
                    <span class="flask-moment" data-timestamp="2013-10-22T12:08:16Z" data-format="fromNow(0)" data-refresh="0">2013-10-22T12:08:16Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi Miguel,

I have a problem understanding how your authentication works here.

@auth.get_password
def get_password(username):
    if username == &#39;miguel&#39;:
        return &#39;python&#39;
    return None

This seems to look for the given username and to return the password in clear format.  Now if the given password matches the returned clear password for that user, the user is authorized.

$ curl -u miguel:python -i http://localhost:5000/todo/api/v1.0/tasks

In my case I need to send the password in clear format to the service and hash it right there and compare it to the existing hashed password in database. If its equal, then the user is authenticated.  But I don&#39;t understand how your method, is supposed to do this. May you please kindly clarify the `return &#39;python&#39;` part? Because I have no access to the clear passwords of the users.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#18</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-10-22T14:13:32Z" data-format="fromNow(0)" data-refresh="0">2013-10-22T14:13:32Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Hooman: this is a very simple example that does not deal with password hashing. If your password are hashed in the database (and they should be!) the get_password() function will return the password hash. My Flask-HTTPAuth extension includes a hash_password decorator that you can use to declare your hashing function. Example:

@auth.hash_password
def hash_pw(password):
    return md5(password).hexdigest()

This will be applied to all passwords coming from users before the comparison.

NOTE: in all these cases secure HTTP must be used, the password or the password hashes should never be sent on an unencrypted channel.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/0649fbd79df4a9abb776b5c06ae37592ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#19</span> <span class="label label-primary">Dave Barndt</span> said
                    <span class="flask-moment" data-timestamp="2013-10-22T19:48:11Z" data-format="fromNow(0)" data-refresh="0">2013-10-22T19:48:11Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi Miguel,

Thanks for a great tutorial - it&#39;s been VERY helpful..  I had a quick question.  I would like to be able to always specify full URLs when returning data.  I see it&#39;s possible to specify &#34;_external=True&#34; in calls to flask.ext.restful.Api.url_for(), but it&#39;s not clear to me how to do so for the URL returned from the flask.ext.restful.fields.Url() function...?

Thanks again for a great tutorial and examples.

Dave</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#20</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-10-22T21:13:54Z" data-format="fromNow(0)" data-refresh="0">2013-10-22T21:13:54Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Dave: You are not the first that noticed that the URLs returned by Flask-Restful are not external. I have forked the project and fixed it, you can find my fork at https://github.com/miguelgrinberg/flask-restful. I have submitted a pull request to the project with the change.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/0649fbd79df4a9abb776b5c06ae37592ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#21</span> <span class="label label-primary">Dave Barndt</span> said
                    <span class="flask-moment" data-timestamp="2013-10-23T17:15:15Z" data-format="fromNow(0)" data-refresh="0">2013-10-23T17:15:15Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi Miguel,

My bad, actually - I wound up asking the same question twice.  I neglected to notice there was a second page of comments for the article and just thought my original question hadn&#39;t been posted, or answered!  Please accept my sincere apologies.  I grabbed the forked/fixed fields.py module and it seems to work great.  Thank you again for a terrific tutorial and timely response, despite my lack of comment-page-navigation skills.  :^)

Dave</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/0649fbd79df4a9abb776b5c06ae37592ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#22</span> <span class="label label-primary">Dave Barndt</span> said
                    <span class="flask-moment" data-timestamp="2013-10-25T15:09:45Z" data-format="fromNow(0)" data-refresh="0">2013-10-25T15:09:45Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">Hi again Miguel,

I&#39;m having another problem that I can&#39;t make much headway on and I&#39;m wondering if something might be going on within Flask.

I&#39;m using lighttpd/flup/Flask (Flask-RESTful) to serve a JSON-based RESTful API.  Overall, it&#39;s working great so far.  The API&#39;s Resource-based classes return objects from which Flask is creating JSON as expected, returning a &#34;Content-Type: application/json&#34; in the HTTP response header and the JSON string in the HTTP response body.

What I&#39;d like to do is compress the returned JSON if the client indicates it will accept it.  I have mod_compress enabled in lighttpd.conf, with the following directive to set the MIME types to compress:

    compress.filetype = ( &#34;application/json&#34;, &#34;text/json&#34;, &#34;text/javascript&#34;,
    &#34;application/x-javascript&#34;, &#34;text/css&#34;, &#34;text/html&#34;, &#34;text/plain&#34; )

The client (browser-based) is always sending an &#34;Accept-Type: gzip, ...&#34; header.  When lighttpd returns &#34;text/*&#34; MIME types, it is setting the &#34;Content-Encoding: gzip&#34; header and compressing the data, and the client handles it fine.

However, this is not working for the &#34;application/json&#34; MIME type, and I&#39;m scratching my head.  Since this request/response path is going through Flask, I&#39;m wondering:  Is Flask supposed to get involved in the compression process at all, or is everything supposed to be handled at the lighttpd level?  I&#39;m guessing the latter, but any confirmation/light you can shed would be helpful.

Thanks again!

Dave</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#23</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-10-25T16:09:55Z" data-format="fromNow(0)" data-refresh="0">2013-10-25T16:09:55Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Dave: I may be wrong, but I vaguely recall lighttpd&#39;s mod_compress only working for static content. I believe for dynamic (i.e. FastCGI) responses the compression needs to be generated by the framework, so you may need to add a gzip middleware to the wsgi app.</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/0649fbd79df4a9abb776b5c06ae37592ce2c.png?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#24</span> <span class="label label-primary">Dave Barndt</span> said
                    <span class="flask-moment" data-timestamp="2013-10-25T16:17:13Z" data-format="fromNow(0)" data-refresh="0">2013-10-25T16:17:13Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">I think I&#39;ve found an initial answer to my own question.  The lighttpd docs for mod_compress say lighttpd only compresses static files automatically, and even then only static files that are &gt;= 128 bytes and &lt; 128 MB.  So it will not compress dynamic API data on my behalf.

OK. so having said that, are there any Flask utilities to compress the JSON data and set the appropriate headers from within my RESTful API app?  The HTTP response headers I would like to set would be:

Vary: Accept-Encoding
Content-Length: &lt;length of gzip-ed data&gt;
Content-Encoding: gzip
(...others?)</p>
                </div>
            </div>
        </li>
        
        <li>
            <div class="comment-thumbnail"><img src="../../gravatar.com/avatar/729e26a2a2c7ff24a71958d4aa4e5f35ce2c.jpeg?s=60&amp;d=identicon" /></div>
            <div class="comment-body">
                <p>
                    <span class="label label-default">#25</span> <span class="label label-danger">Miguel Grinberg</span> said
                    <span class="flask-moment" data-timestamp="2013-10-25T16:32:26Z" data-format="fromNow(0)" data-refresh="0">2013-10-25T16:32:26Z</span>
                </p>
                <div style="overflow: auto;">
                    <p style="white-space: pre-wrap;">@Dave: flup has a gzip middleware. I never used it, but looks like it might be what you need.</p>
                </div>
            </div>
        </li>
        
    </ul>
</div>

<div class="page">
<ul class="pager">
  <li class="previous disabled">
    <a href="#">&laquo;&laquo;</a>
  </li>
  <li class="previous disabled">
    <a href="#">&laquo;</a>
  </li>
  <li class="next">
    <a href="designing-a-restful-api-using-flask-restful/page/0.html#comments">&raquo;&raquo;</a>
  </li>
  <li class="next">
    <a href="designing-a-restful-api-using-flask-restful/page/2.html#comments">&raquo;</a>
  </li>
</ul>
</div>

<h3><a name="commentform"></a>Leave a Comment</h3>

<form action="#commentform" method="post"
  class="form" role="form">
  <div style="display:none;"><input id="csrf_token" name="csrf_token" type="hidden" value="1439536826.71##d1bbf0911227c52c95b8c0be853ba64b95f894a9"></div>
  
    
    






<div class="form-group "><label class="control-label" for="name">Name</label>
        <input class="form-control" id="name" name="name" required type="text" value="">
  </div>


    




<div class="form-group "><label class="control-label" for="url">URL</label>
        <input class="form-control" id="url" name="url" type="text" value="">
  </div>


    






<div class="form-group "><label class="control-label" for="email">Email</label>
        <input class="form-control" id="email" name="email" required type="text" value="">
  </div>


    






<div class="form-group "><label class="control-label" for="comment">Comment</label>
        <textarea class="form-control" id="comment" name="comment" required></textarea>
  </div>


    




<div class="form-group "><label class="control-label" for="captcha">Captcha</label>
        
<script type="text/javascript">var RecaptchaOptions = {"custom_translations": {"audio_challenge": "Get an audio challenge", "cant_hear_this": "Download sound as MP3", "help_btn": "Help", "image_alt_text": "reCAPTCHA challenge image", "incorrect_try_again": "Incorrect. Try again.", "instructions_audio": "Type what you hear", "instructions_visual": "Type the text", "play_again": "Play sound again", "privacy_and_terms": "Privacy & Terms", "refresh_btn": "Get a new challenge", "visual_challenge": "Get a visual challenge"}, "theme": "white"};</script>
<script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S"></script>
<noscript>
  <iframe src="http://www.google.com/recaptcha/api/noscript?k=6Ld5Zs4SAAAAAOY0DOi4r18bgHlEaz41qAoRf__S" height="300" width="500" frameborder="0"></iframe><br>
  <textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  <input type="hidden" name="recaptcha_response_field" value="manual_challenge">
</noscript>

  </div>


    





  


    <input class="btn btn-default" id="submit" name="submit" type="submit" value="Submit">
  





</form>


</div>

                </div>
            </div>
        </div>
        <div id="footer">
            <p class="elapsed">This page was generated in None seconds.</p>
            <p>&copy; 2014 by Miguel Grinberg. All rights reserved. <a href="mailto:webmaster _at_ miguelgrinberg _dot_ com">Questions?</a></p>
        </div>
    </div>


    
    
    <script src="../../cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="../../cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../../cdnjs.cloudflare.com/ajax/libs/jquery.colorbox/1.4.33/jquery.colorbox-min.js"></script>
    <script type="text/javascript" src="../static/prettify.js"></script>
    <script src="../../cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment-with-langs.min.js"></script>
<script>
function flask_moment_render(elem) {
    $(elem).text(eval('moment("' + $(elem).data('timestamp') + '").' + $(elem).data('format') + ';'));
    $(elem).removeClass('flask-moment');
}
function flask_moment_render_all() {
    $('.flask-moment').each(function() {
        flask_moment_render(this);
        if ($(this).data('refresh')) {
            (function(elem, interval) { setInterval(function() { flask_moment_render(elem) }, interval); })(this, $(this).data('refresh'));
        }
    })
}
$(document).ready(function() {
    flask_moment_render_all();
});
</script>
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-4777284-15']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
    <script type="text/javascript">
        $(document).ready(function(){
            $(".gallery").colorbox({rel:".gallery",maxWidth:"95%",maxHeight:"95%",scalePhotos:true});
            // add prettyprint class to all <pre><code></code></pre> blocks
            var prettify = false;
            $("pre code").parent().each(function() {
                $(this).addClass('prettyprint');
                prettify = true;
            });
            prettyPrint();
        });
    </script>


  </body>

<!-- Mirrored from blog.miguelgrinberg.com/post/designing-a-restful-api-using-flask-restful by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 14 Aug 2015 06:51:37 GMT -->
</html>
